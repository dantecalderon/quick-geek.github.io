<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Organization of search in a web page in JavaScript (without jQuery)</title>
  <meta name="description" content="A couple of days ago I received a test task from the company for the job Front-end dev. Of course, the task consisted of several points. But now it wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Organization of search in a web page in JavaScript (without jQuery)</h1><div class="post__text post__text-html js-mediator-article">  A couple of days ago I received a test task from the company for the job Front-end dev.  Of course, the task consisted of several points.  But now it will be only one of them - the organization of the search on the page.  Those.  a banal search for the text entered in the field (analogue of Ctrl + F in the browser).  The peculiarity of the task was that the use of any JS frameworks or libraries is prohibited.  <strong>All write in native native javascript</strong> . <br><br>  <i>(For clarity, I will continue to accompany the entire article with screenshots and code, so that I and you can understand what this is about at a particular moment)</i> <br><a name="habracut"></a><br><h2>  Search for a ready solution </h2><br>  My first thought: someone already wrote exactly this, you need to google and copy-paste.  So I did.  In an hour I found two quite good scripts which as a matter of fact worked equally, but were written differently.  I chose the one in the code of which I figured out better and inserted it into my starnichka. <br><br>  <i>If anyone is interested, I took the code <a href="http://lifeexample.ru/jquery-javascript-primeryi/javascript-poisk-po-stranitse.html">here</a> .</i> <br><br>  The script immediately earned.  I thought that the issue was resolved, but as it turned out, there was no offense to the author of the script, there was a huge flaw in it.  The script conducted a search on the entire contents of the tag <code>...</code> and, as you probably already guessed, when searching for any combination of characters that resemble a tag or its attributes, the entire HTML page was broken. <br><br><h2>  Why did the script work incorrectly? </h2><br>  It's simple.  The script works as follows.  First, we write the entire contents of the <strong>body</strong> tag to the variable, then we look for matches with the regular expression (the user sets it when entering the text field) and then replace all matches with the following code: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"background-color: yellow;"</span></span></span><span class="hljs-tag">&gt;</span></span>...–Ω–∞–π–¥–µ–Ω–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  And then we replace the current <strong>body</strong> tag with the new one received.  The markup is updated, the styles change and all the found results are highlighted in yellow on the screen. <br><br>  You have probably already understood what the problem is, but I will nevertheless explain in more detail.  Imagine that you entered the word <strong>"div"</strong> in the search field.  As you understand, inside the <strong>body</strong> there are many other tags, including the <strong>div</strong> .  And if we all apply the styles mentioned above to the <strong>‚Äúdiv‚Äù</strong> , then it will no longer be a block, but an incomprehensible thing, since the design breaks.  In the end, after rewriting the markup, we get a completely broken web page.  It looks like this. <br><br>  It was before the search: <a href="http://saveimg.ru/show-image.php%3Fid%3D7b8c30efdb2e14bfb64d794b7cd6ce7f"><img src="http://saveimg.ru/thumbnails/30-04-16/b43ea456d1d7d278464d613f7eec8630.png" alt="put the photo on the Internet"></a>  <a href="http://saveimg.ru/show-image.php%3Fid%3D7b8c30efdb2e14bfb64d794b7cd6ce7f">Spread completely</a> <br>  It became after the search: <a href="http://saveimg.ru/show-image.php%3Fid%3D1bbb432aeea91f313e4ae2291a4f468e"><img src="http://saveimg.ru/thumbnails/30-04-16/4fcd7c7461510c748fc002a616883b14.png" alt="upload photos for free"></a>  <a href="http://saveimg.ru/show-image.php%3Fid%3D1bbb432aeea91f313e4ae2291a4f468e">Spread completely</a> <br><br>  As you can see, the page is completely broken.  In short, the script was non-working, and I decided to write my own from scratch, which is what this article is about. <br><br><h1>  So we write the script from scratch </h1><br>  How it all looks. <br><br><img src="https://habrastorage.org/files/e63/fe9/3f0/e63fe93f07ad4fe59872d26a0fc93e2d.png"><br><br>  Now we are interested in the form with the search.  Circled it in red. <br><br>  Let's see a little.  I implemented it as follows (for now pure HTML).  Form with three tags. <br><br>  <strong>The first</strong> is for entering text; <br>  <strong>The second</strong> is to cancel the search (deselect); <br>  <strong>The third one</strong> is for search (select the found results). <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"–ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  So, we have a field for input and 2 buttons.  JavaScript will be writing in the js.js file  Suppose that you have already created and connected it. <br><br>  The first thing we will do is: assign the function calls when clicking on the search button and the cancel button.  It will look like this: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"place_for_search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-to-find"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button_for_turn_back"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"javascript: FindOnPage('text-to-find',false); return false;"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button_for_search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"javascript: FindOnPage('text-to-find',true); return false;"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"–ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Let's explain a little what's there and why. <br><br>  The text field is given <strong>id = ‚Äútext-to-find‚Äù</strong> ( <i>by this id we will refer to the element from js</i> ). <br><br>  The cancel button gives the following attributes: <strong>type = "button" onclick = "javascript: FindOnPage ('text-to-find', false);</strong>  <strong>return false; "</strong> <br><br>  - <i>Type: button</i> <br>  - <i>When pressed, the function FindOnPage ('text-to-find', false) is called;</i>  <i>and passes the id field with the text, <strong>false</strong></i> <br><br>  The search button gives the following attributes: <strong>type = "button" onclick = "javascript: FindOnPage ('text-to-find', true);</strong>  <strong>return false; "</strong> <br><br>  - <i>Type: submit (not a button, because here you can use Enter after entering the field, and you can also use button)</i> <br>  - <i>When pressed, the function FindOnPage ('text-to-find', true) is called;</i>  <i>and passes the id field with the text, <strong>true</strong></i> <br><br>  You probably noticed another attribute: <strong><i>true / false</i></strong> .  We will use it to determine which button was pressed (cancel the search or start the search).  If we click on cancellation, then we pass <strong>false</strong> .  If we click on the search, then we pass <strong>true</strong> . <br><br><h4>  Okay, move on.  Go to javascript </h4><h4>  We assume that you have already created and connected the js file to the DOM. <br><br>  Before we start writing code, let's digress and first discuss how things should work.  Those.  essentially write a plan of action.  So, we need so that when entering text in the field, we search through the page, but we cannot touch tags and attributes.  Those.  only text objects.  How to achieve this - sure there are many ways.  But now we will use regular expressions. <br><br>  So, the following regular expression will only search for text next.  of the form: "&gt; ... text ... &lt;".  Those.  will search only text objects, while tags and attributes will remain intact. <br><br><pre> <code class="javascript hljs">/&gt;(.*?)&lt;<span class="hljs-regexp"><span class="hljs-regexp">/g</span></span></code> </pre><br>  So we will find the necessary parts of the code that we will parse and look for matches with the text that the user entered.  Then we will add styles to the found objects and then replace the html code with a new one. <br><br>  Let's get started  First, the variables that we need. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input,search,pr,result,result_arr, locale_HTML, result_store; <span class="hljs-comment"><span class="hljs-comment">//input - –ø—Ä–∏–Ω–∏–º–∞–µ–º —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–≤–µ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å //search - –¥–µ–ª–∞–µ–º –∏–∑ —Å—Ç—Ä–æ–∫–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ //pr - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –Ω–µ–µ —Ç–µ–∫—É—â–∏–π &lt;body&gt;&lt;/body&gt; //result - –≤—ã–±–æ—Ä–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∏–∑ pr (—Ç.–µ. –æ—Ç—Å–µ–∫–∞–µ–º —Ç–µ–≥–∏ –∏ –∞—Ç—Ä–∏–±—É—Ç—ã) //result_arr - –∞–Ω–∞–ª–æ–≥ pr, –Ω–æ —Å–æ —Å—Ç–∏–ª—è–º–∏ –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ //locale_HTML - –æ—Ä–∏–≥–∏–Ω–∞–ª &lt;body&gt;&lt;/body&gt; –∫–æ—Ç–æ—Ä—ã–π –º–µ–Ω—è—Ç—å –Ω–µ –±—É–¥–µ–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è –æ–±–Ω—É–ª–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π</span></span></code> </pre><br>  And immediately determine the <strong>locale_HTML</strong> value regardless of whether we are looking for something or not.  This is necessary to immediately keep the original page and have the opportunity to reset the styles. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input,search,pr,result,result_arr, locale_HTML, result_store; locale_HTML = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML; <span class="hljs-comment"><span class="hljs-comment">// —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Å—å body (–ò—Å—Ö–æ–¥–Ω—ã–π)</span></span></code> </pre><br>  Ok, now it's worth creating a function that is called from the <strong>DOM</strong> .  Immediately let's estimate that inside we should have 2 functions, each of which works depending on the button pressed.  After all, we either conduct a search or reset it.  And this is controlled by the attribute <strong>true / false</strong> , as you remember.  You also need to understand that when you re-search the old styles should be reset.  So we get the following: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input,search,pr,result,result_arr, locale_HTML, result_store; locale_HTML = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML; <span class="hljs-comment"><span class="hljs-comment">// —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Å—å body (–ò—Å—Ö–æ–¥–Ω—ã–π) function FindOnPage(name, status) { if(status) { FindOnPageBack(); FindOnPageGo(); } //—á–∏—Å—Ç–∏–º –ø—Ä–æ—à–ª–æ–µ –∏ –í—ã–¥–µ–ª—è–µ–º –Ω–∞–π–¥–µ–Ω–Ω–æ–µ if(!status) { FindOnPageBack(); } //–°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ }</span></span></code> </pre><br>  Ok, some of the logic is implemented, move on.  It is necessary to check the received word for the number of characters.  After all, why do we need to look for 1 letter / symbol.  In general, I decided to limit this possibility to 3+ characters. <br><br>  So, first we accept the value that the user has entered, and, depending on its length, we perform either the main search function, or the function of displaying warnings and zeroing.  It will look like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input,search,pr,result,result_arr, locale_HTML, result_store; locale_HTML = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML; <span class="hljs-comment"><span class="hljs-comment">// —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Å—å body (–ò—Å—Ö–æ–¥–Ω—ã–π) function FindOnPage(name, status) { input = document.getElementById(name).value; //–ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–æ–ª—è –≤ html if(input.length&lt;3&amp;&amp;status==true) { alert('–î–ª—è –ø–æ–∏—Å–∫–∞ –≤—ã –¥–æ–ª–∂–Ω—ã –≤–≤–µ—Å—Ç–∏ —Ç—Ä–∏ –∏–ª–∏ –±–æ–ª–µ–µ —Å–∏–º–≤–æ–ª–æ–≤'); function FindOnPageBack() { document.body.innerHTML = locale_HTML; } //–æ–±–Ω—É–ª—è–µ–º —Å—Ç–∏–ª–∏ } if(input.length&gt;=3) { //–≤—ã–ø–æ–ª–Ω—è–µ–º –ø–æ–∏—Å–∫ } function FindOnPageBack() { document.body.innerHTML = locale_HTML; } //–æ–±–Ω—É–ª—è–µ–º —Å—Ç–∏–ª–∏ if(status) { FindOnPageBack(); FindOnPageGo(); } //—á–∏—Å—Ç–∏–º –ø—Ä–æ—à–ª–æ–µ –∏ –í—ã–¥–µ–ª—è–µ–º –Ω–∞–π–¥–µ–Ω–Ω–æ–µ if(!status) { FindOnPageBack(); } //–°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ }</span></span></code> </pre><br>  Now I will explain this section of the code.  The only thing that could become unclear is this line: <br><br>  <i>function FindOnPageBack () {document.body.innerHTML = locale_HTML;</i>  <i>}</i> <br><br>  Everything is simple: the <strong>innerHTML</strong> method returns the <strong>html</strong> object code.  In this case, we simply replace the current <strong>body</strong> with the original <strong>body</strong> , which we saved when loading the entire page. <br><br>  Moving on.  Give the values ‚Äã‚Äãof the main variables. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input,search,pr,result,result_arr, locale_HTML, result_store; locale_HTML = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML; <span class="hljs-comment"><span class="hljs-comment">// —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Å—å body (–ò—Å—Ö–æ–¥–Ω—ã–π) function FindOnPage(name, status) { input = document.getElementById(name).value; //–ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–æ–ª—è –≤ html if(input.length&lt;3&amp;&amp;status==true) { alert('–î–ª—è –ø–æ–∏—Å–∫–∞ –≤—ã –¥–æ–ª–∂–Ω—ã –≤–≤–µ—Å—Ç–∏ —Ç—Ä–∏ –∏–ª–∏ –±–æ–ª–µ–µ —Å–∏–º–≤–æ–ª–æ–≤'); function FindOnPageBack() { document.body.innerHTML = locale_HTML; } //–æ–±–Ω—É–ª—è–µ–º —Å—Ç–∏–ª–∏ } if(input.length&gt;=3) { function FindOnPageGo() { search = '/'+input+'/g'; //–¥–µ–ª–∞–µ–º –∏–∑ —Å—Ç—Ä–æ–∫–∏ —Ä–µ–≥—É—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ pr = document.body.innerHTML; // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Å—å body result = pr.match(/&gt;(.*?)&lt;/g); //–æ—Ç—Å–µ–∫–∞–µ–º –≤—Å–µ —Ç–µ–≥–∏ –∏ –ø–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç result_arr = []; //–≤ —ç—Ç–æ–º –º–∞—Å—Å–∏–≤–µ –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã (–ø–æ–¥—Å–≤–µ—Ç–∫—É) } } function FindOnPageBack() { document.body.innerHTML = locale_HTML; } //–æ–±–Ω—É–ª—è–µ–º —Å—Ç–∏–ª–∏ if(status) { FindOnPageBack(); FindOnPageGo(); } //—á–∏—Å—Ç–∏–º –ø—Ä–æ—à–ª–æ–µ –∏ –í—ã–¥–µ–ª—è–µ–º –Ω–∞–π–¥–µ–Ω–Ω–æ–µ if(!status) { FindOnPageBack(); } //–°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ }</span></span></code> </pre><br>  So, at this stage, we already have the main variables and values.  Now you need to give the necessary parts of the code styles with the selected background.  Those.  checking the selected text for a regular expression (in fact, we selected the text with a regular expression again by parsing the regular expression).  To do this, you need to make a regular expression from the entered text (done), and then execute the method passed in the form of a text.  Here the <strong>eval ()</strong> method will help us. <br><br>  In general, after we replace the text and get the result with the styles, we need to replace the current <strong>html</strong> with the received one.  We do. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input,search,pr,result,result_arr, locale_HTML, result_store; locale_HTML = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML; <span class="hljs-comment"><span class="hljs-comment">// —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Å—å body (–ò—Å—Ö–æ–¥–Ω—ã–π) function FindOnPage(name, status) { input = document.getElementById(name).value; //–ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–æ–ª—è –≤ html if(input.length&lt;3&amp;&amp;status==true) { alert('–î–ª—è –ø–æ–∏—Å–∫–∞ –≤—ã –¥–æ–ª–∂–Ω—ã –≤–≤–µ—Å—Ç–∏ —Ç—Ä–∏ –∏–ª–∏ –±–æ–ª–µ–µ —Å–∏–º–≤–æ–ª–æ–≤'); function FindOnPageBack() { document.body.innerHTML = locale_HTML; } //–æ–±–Ω—É–ª—è–µ–º —Å—Ç–∏–ª–∏ } if(input.length&gt;=3) { function FindOnPageGo() { search = '/'+input+'/g'; //–¥–µ–ª–∞–µ–º –∏–∑ —Å—Ç—Ä–æ–∫–∏ —Ä–µ–≥—É—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ pr = document.body.innerHTML; // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Å—å body result = pr.match(/&gt;(.*?)&lt;/g); //–æ—Ç—Å–µ–∫–∞–µ–º –≤—Å–µ —Ç–µ–≥–∏ –∏ –ø–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç result_arr = []; //–≤ —ç—Ç–æ–º –º–∞—Å—Å–∏–≤–µ –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã (–ø–æ–¥—Å–≤–µ—Ç–∫—É) for(var i=0; i&lt;result.length;i++) { result_arr[i] = result[i].replace(eval(search), '&lt;span style="background-color:yellow;"&gt;'+input+'&lt;/span&gt;'); //–Ω–∞—Ö–æ–¥–∏–º –Ω—É–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –∑–∞–¥–∞–µ–º —Å—Ç–∏–ª—å –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ } for(var i=0; i&lt;result.length;i++) { pr=pr.replace(result[i],result_arr[i]) //–∑–∞–º–µ–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å html —Ç–µ–∫—Å—Ç –Ω–∞ –Ω–æ–≤—ã–π –∏–∑ –Ω–æ–≤–æ–≥–æ–º –∞—Å—Å–∏–≤–∞ } document.body.innerHTML = pr; //–∑–∞–º–µ–Ω—è–µ–º html –∫–æ–¥ } } function FindOnPageBack() { document.body.innerHTML = locale_HTML; } //–æ–±–Ω—É–ª—è–µ–º —Å—Ç–∏–ª–∏ if(status) { FindOnPageBack(); FindOnPageGo(); } //—á–∏—Å—Ç–∏–º –ø—Ä–æ—à–ª–æ–µ –∏ –í—ã–¥–µ–ª—è–µ–º –Ω–∞–π–¥–µ–Ω–Ω–æ–µ if(!status) { FindOnPageBack(); } //–°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ }</span></span></code> </pre><br>  In fact, everything is ready, and the script is already running.  But add a couple of details for beauty. <br><br>  1) Cut the spaces of the text that the user enters.  Paste this code: <br><br><pre> <code class="javascript hljs"> input = numer.replace(<span class="hljs-regexp"><span class="hljs-regexp">/^\s+/g</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>); input = numer.replace(<span class="hljs-regexp"><span class="hljs-regexp">/[ ]{1,}/g</span></span>,<span class="hljs-string"><span class="hljs-string">' '</span></span>);</code> </pre><br>  After this line: <br><br><pre> <code class="javascript hljs"> input = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(name).value; <span class="hljs-comment"><span class="hljs-comment">//–ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–æ–ª—è –≤ html</span></span></code> </pre><br>  2) Let's make a check for matches (if no matches were found, let us know).  We insert this code inside the function FindOnPageGo () after the variables. <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> warning = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;result.length;i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(result[i].match(<span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(search))!=<span class="hljs-literal"><span class="hljs-literal">null</span></span>) { warning = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(warning == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { alert(<span class="hljs-string"><span class="hljs-string">'–ù–µ –Ω–∞–π–¥–µ–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è'</span></span>); }</code> </pre><br>  View the source <a href="http://codepen.io/evgeny2234/pen/YqRPEJ">here</a> . <br>  Download the source <a href="https://yadi.sk/d/YKegX9PNrQoQC">here</a> . <br><br>  That's it.  Of course, you can add a scroll to the first result found, live ajax search, and in general you can improve endlessly.  Now this is a fairly primitive search site.  The purpose of the article was to help beginners, if there is the same question as mine.  After all, I did not find a simple ready-made solution. <br><br>  PS: for correct work it is necessary to remove text hyphenation in the html document in those places where there is plain text between the tags. <br><br>  For example, instead of <br><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> –±–ª–∞ –±–ª–∞ –±–ª–∞ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Need to <br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> –±–ª–∞ –±–ª–∞ –±–ª–∞ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  It doesn‚Äôt matter, you can get rid of these transfers automatically on the service, but you can tell me at the same time how to fix this if you understand me before. <br><br>  Also, if someone wrote similar, but with a live search, share the source, it will be interesting to make out. <br><br>  I will be glad to hear constructive criticism, opinions, maybe recommendations. <br><br>  The other day I added a little code, made a live search on the page.  So, that question is removed.  <strong>HTML</strong> code has not changed.  <strong>JS</strong> can look <a href="https://yadi.sk/d/hK3WG_M6rSfrG">here</a> . <br><br>  Search is conducted on tags with the class "place_for_live_search".  So in order to parsil algorithm the desired content, add a class and ready. </h4></div><p>Source: <a href="https://habr.com/ru/post/438382/">https://habr.com/ru/post/438382/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>