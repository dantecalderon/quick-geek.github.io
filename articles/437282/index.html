<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>An introduction to Kubernetes for VMware users. Part 2. Practice</title>
  <meta name="description" content="This is the second part of the introduction to Kubernetes for VMware users. Before proceeding to the practical part, read the previous article on the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>An introduction to Kubernetes for VMware users. Part 2. Practice</h1><div class="post__text post__text-html js-mediator-article">  This is the second part of the introduction to Kubernetes for VMware users.  Before proceeding to the practical part, read the previous article on the <a href="https://habr.com/ru/company/dataline/blog/436028/">link</a> . <br><br><img src="https://habrastorage.org/webt/7v/_w/ha/7v_whajag68kqcj5gmcxbptf9jc.png"><a name="habracut"></a><br><br>  The easiest and fastest way to get to know Kubernetes without any special requirements is the GCP (Google Cloud Platform).  Just issue <a href="https://cloud.google.com/">test access</a> , and learn Kubernetes.  To confirm registration you need to provide information on a bank card.  GCP will not charge anything unless you activate the payment.  Create an account, and we will continue to explore the fascinating world of Kubernetes. <br><br>  The first step is to connect to GKE (Google Kubernetes Engine).  In the left menu, select <b>Container Engine</b> . <br><br><img src="https://habrastorage.org/webt/qq/c4/n3/qqc4n3bkwfadninz20_spbcrdvi.png"><br><br>  Click on <b>Create cluster.</b> <br><br><img src="https://habrastorage.org/webt/zp/ob/1x/zpob1xzyvrwvyp16vj9jdafevmq.png"><br><br>  Fill in the fields: <br><br>  - cluster name; <br>  - access area <br>  - version Kubernetes; <br>  - details of the image, etc. <br><br><img src="https://habrastorage.org/webt/uf/j0/44/ufj044qpcmg7uh1fi9me_pxeq-o.png"><br><br>  A cluster will be created in a few minutes.  When ready, click Connect.  The command to connect appears.  We will use it.  Copy it. <br><br><img src="https://habrastorage.org/webt/he/yv/xh/heyvxhg4haaupxaombqgcabvijm.png"><br><br><img src="https://habrastorage.org/webt/mo/3d/br/mo3dbrpynfnomijba-srd2mux9m.png"><br><br>  The easiest way to connect to a cluster is through the <b>Google Cloud shell</b> . <br><br>  In the upper right corner click on the shell icon. <br><br><img src="https://habrastorage.org/webt/0h/i1/-r/0hi1-rjtbggm3lp9bq7yuk1roro.png"><br><br>  After a few seconds, the shell will start on the same page.  Paste the command that you copied in the previous step. <br><br><img src="https://habrastorage.org/webt/jx/op/7i/jxop7iwvkaabaeuw8zukvxaqn4q.png"><br><br>  Now let's look at the information on our cluster using the <b>kubectl cluster-info</b> command. <br><br><img src="https://habrastorage.org/webt/ps/rw/d-/psrwd-i0pfits8zbdyailbg__gk.png"><br><br>  To get information about nodes, enter the command <b>kubectl get no -o wide.</b>  You will see a list of nodes with information on them. <br><br><img src="https://habrastorage.org/webt/wl/vt/od/wlvtodfspru21t--0dgkwsdizt4.png"><br><br>  Now we get a list of all working pods in our K8s cluster.  Enter the command <b>kubectl get po -o wide ‚Äìall-namespaces</b> . <br><br><img src="https://habrastorage.org/webt/py/7i/12/py7i1255kmwzfhjtbpaccrwyuwq.png"><br><br>  Now let's connect to the cluster nodes to find out their network settings.  To do this, click the main menu again on the left and select <b>Compute Engine</b> from the drop-down list.  As you can see from the screenshot below, the k8s cluster is ultimately the number of virtual machines. <br><br><img src="https://habrastorage.org/webt/ol/dg/0j/oldg0jslpt10muuotnyrsocwfvq.png"><br><br>  Click <b>SSH</b> to start the session with the selected node.  A new dialog box will appear.  Make sure that no pop-ups are blocked in your browser. <br><br><img src="https://habrastorage.org/webt/le/qu/rd/lequrdsiywsiofywxsd0jyakfey.png"><br><br>  Check which Linux distribution is used.  To do this, type in the <b>uname -a</b> command, and then <b>cat / etc / lsb-release</b> . <br><br><img src="https://habrastorage.org/webt/vl/sr/td/vlsrtdpmmgcps866vbtooh_ggnq.png"><br><br>  Now let's check the network settings with the <b>ifconfig -a |</b>  <b>more</b> .  See the bridge interface <b>cbr0</b> ?  This is what we showed in the network diagram above. <br><br><img src="https://habrastorage.org/webt/ye/u9/u2/yeu9u2t1ala8okfwna0j-o9pvum.png"><br><br>  Here we also see the / 24 network allocated to this node - 10.40.1.0/24.  From our pods, get their IP-addresses.  Now you can correlate the network scheme above with the real configuration on the nodes of the k8s cluster.  Cool, right? <br><br>  Now let's go back to the Google Cloud Shell window and try to close the test application.  Beat in <b>git clone</b> <b><a href="">https://github.com/hanymichael/NSX-CNA-Lab.git</a></b> . <br><br><img src="https://habrastorage.org/webt/3w/uf/yt/3wufytgx2x-ljnbs2meaah55esc.png"><br><br>  With this command, you will clone one of my test applications on GitHub.  Now go to the folder with the application and type <b>kubectl create -f.</b>  so that all YAML files are created in this folder. <br><br><img src="https://habrastorage.org/webt/kw/2u/ue/kw2uueti7otuoszqgnbqenjmiqy.png"><br><br>  Now we will display a list of pods and see their status.  It is seen that all have the status <b>ContainerCreating</b> .  After a few seconds, the status will change to <b>Running</b> . <br><img src="https://habrastorage.org/webt/yv/jr/z7/yvjrz75pidy0x9p3e9_btmyzx3i.png"><br><br>  There are two deployments of my web application in K8s, each with 4 replicas.  Now let's check the Services associated with this deployment with the command <b>kubectl get svc</b> . <br><br><img src="https://habrastorage.org/webt/jd/ev/jk/jdevjka5scxaeq4auc0mnkmdkjc.png"><br><br>  The last thing to check is the ingress associated with this application.  The screenshot above shows that we are connecting to the application via external IP.  If we check the partition with the balancer, we will see the load balancer associated with the ingress. <br><br><img src="https://habrastorage.org/webt/mm/oj/zv/mmojzvxnhuwnjac6uameclmsh_e.png"><br><br>  If you want to access the application itself, you can create a DNS record for * .esxcloud.net in the local host file. <br><br><img src="https://habrastorage.org/webt/el/8v/i6/el8vi6njwhov1_p7ygd3bgwtuk0.png"><br><br>  Now open a new tab in your browser and follow the links <a href="http://sphinx-v1.esxcloud.net/">sphinx-v1.esxcloud.net</a> and <a href="http://sphinx-v2.esxcloud.net/">sphinx-v2.esxcloud.net</a> .  We will see two things: <br><br><ul><li>  version of the application is shown for each link; </li><li>  after updating the web page, the container‚Äôs IP address changes, so the balancer is working. </li></ul><br><img src="https://habrastorage.org/webt/lo/9h/ad/lo9had07482jd4zub96i8vuvebm.png"><br><br>  Now you can correlate the configuration of the application with the diagram below and see how it all looks in Kubernetes. <br><br><img src="https://habrastorage.org/webt/ql/6z/in/ql6zinymohesirnxourqiumuvno.png"><br><br><h3>  Conclusion </h3><br>  We saw that Kubernetes, like any distributed system, has many similarities (and some differences) with vSphere, which is familiar to us as VMware users.  I tried to explain the basic concepts by comparing K8s &amp; vSphere.  I hope this helped you a little to quickly get acquainted with this incredibly powerful cloud platform that is already conquering the world. <br><br>  In the next posts I‚Äôll start to dive deeper into the development of our enterprise-solution for launching Kubernetes inside the data center.  Follow the news! <br><br>  PS: You can try Kubernetes in our <a href="https://www.dtln.ru/uslugi/platform/kuberline">KuberLine</a> service by <a href="https://www.dtln.ru/uslugi/platform/kuberline">completing a</a> test drive. </div><p>Source: <a href="https://habr.com/ru/post/437282/">https://habr.com/ru/post/437282/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>