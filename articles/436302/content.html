<div class="post__text post__text-html js-mediator-article">  Now a lot of talk on TV about the success of Russian companies in the field of import substitution.  Road maps are drawn, registries of domestic developers are created, forums are organized, and government funds are invested.  money (as usual, it is not clear where). <br><br>  The TV has already told everyone that the bright future will come soon and that all of us are waiting for Russian operating systems, databases and other necessary things. <br><br><img src="https://habrastorage.org/webt/zt/nl/kt/ztnlktu7sanbgkvro8vbqqcee7y.jpeg"><br><br>  In reality, everything, as usual, is somewhat different ... <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/fp/vq/9m/fpvq9mtipnef-mj2u3pscvgrgpg.jpeg"><br><br>  A few years ago, Softline began actively monitoring the market of Russian IT solutions in order to meet the demand from state (and not only) companies for import-substituting products in IT.  Well, there must be something, right? <br><br>  Since today we are writing about storage systems, it means that we’ll tell you about our experience as we searched, tested and implemented storage systems for a Russian manufacturer, AERODISK. <br><br>  But before we got acquainted with this vendor, we went through <s>seven circles of hell a</s> long way of getting acquainted with OEMs, who in all seriousness pretend to be domestic producers. <br><br>  And now just a minute of attention: <br><br>  Firstly, we are not at all against the OEM business; this is normal and practiced all over the world.  For example, the same HP has long and successfully OEM-IT DotHill, selling it around the world as its own and everyone likes everything. <br><br>  Secondly, we are against only frank deception (I think everyone will agree with us here). <br><br>  We will not give here the names of organizations that behave badly, deceiving themselves as domestic producers.  We do not want to create anti-advertising to anyone, but, unfortunately, there are such companies, and they are widely known. <br><br><h3>  <font color="#2e74b5">Attempt number one</font> </h3><br>  Having started the search, we initially stumbled upon a whole bunch of so-called “Russian storage systems”, which in all our papers and pictures are “sold” for import substitution, and in fact both equipment and intelligence are either Chinese or American. <br><br>  Well, damn it with the equipment, of course, that even American manufacturers make their hardware in Asia, now this is the norm, but who's stopping to write? <br><br><img src="https://habrastorage.org/webt/io/xu/vh/ioxuvhb6prkj2yuglwkew6ipltm.jpeg"><br><br><h3>  <font color="#2e74b5">Attempt number two</font> </h3><br>  Of course, we were upset, but continued to search.  Soon we found several Russian solutions that we actually developed, but tests showed that they suffer from one of two (or two) diseases. <br><br><ol><li>  Raw solutions </li><li>  Solutions not for serious (or for niche) tasks </li></ol><br>  Obviously, we could not work seriously with such decisions.  Again, uncomfortable. <br><br><img src="https://habrastorage.org/webt/vs/q0/r8/vsq0r87vcpcqykghc6y3rorvz-c.jpeg"><br><br><h3>  <font color="#2e74b5">Attempt number three</font> </h3><br>  Frustrated even more, we continued to eat cactus.  At this moment (it was the end of 2017) we had a large federal project, where it was necessary to make maximum use of Russian technologies.  There was still a design stage: the main technical solutions were laid.  This was part of the federal project "Safe City" in one of the cities hosted by the World Cup 2018. <br><br>  The concept of "Safe City" implies the unification of all the responsible security services in a single direction with the close integration of IT systems.  This helps to respond to incidents much faster, and in some cases even prevent them. <br>  Technically, the essence of the project is that everything in the city is hung with cameras (several thousand cameras), and these cameras, using a smart video surveillance system, automatically record dangerous or potentially dangerous events and in good resolution continuously write data to the data center.  In-line analytics of events from cameras is displayed on emergency services consoles, and, moreover, records from cameras are stored in the data center for at least one month. <br><br>  At any time, a law enforcement officer can contact the service operator and as quickly as possible get the video from anywhere in the last month for further analysis.  The requirements for availability and performance (several thousand cameras of good resolution is not a pound of raisins, as you understood) in such a project are maximum.  If the desired video is lost or not recorded, the operator of the service may, in all seriousness, go on holiday to the resorts of sunny Magadan. <br><br>  The end customer (service operator) requested, where possible (without detriment to quality), to use Russian solutions where possible, since they were then going to ask him: “what did you do for import substitution?”.  He didn’t want to blush in front of the big bosses. <br><br><img src="https://habrastorage.org/webt/lp/mm/_s/lpmm_sezbodpg29lwikpnvbqwm0.jpeg"><br><br>  There were no problems with video surveillance systems, because  There are many Russian decisions, the choice is large, and in this case a proven solution was used.  But with the storage system (since our searches were not successful), we were determined to use a long-known foreign solution.  And then one of our project partners suggested using Russian storage AERODISK for the storage level. <br><br>  We (Softline) at that time, of course, knew that there was such a manufacturer, and that it was not an OEM.  We heard different reviews about him: both good and not so much, so we did not have a clear impression.  We did not reach its testing, because testing the solutions of other Russian developers (see attempt number two) failed, and we temporarily stopped activity due to constant failures. <br><br>  But the proposal was made, the customer took the idea with a bang.  And we went to find out what AERODISK was doing for the storage system, and decided to visit them. <br><br>  We were quite pleased with the visit to AERODISK.  They showed us the system in operation, the demo center, and also gave us a chat with the developers, who “make this future with these hands”. <br><br>  We asked AERODISK to organize a test lab specifically for this project and, together with the selected video surveillance system, to emulate the productive load.  The specificity of the task consisted in the fact that, in addition to the usual streaming video recording, the tasks of reading and rewriting data based on the analysis performed are added to the constant recording stream.  Knowing this load profile, we drove the AERODISK data storage system both in the tail and in the mane for several weeks.  In general, we were satisfied with the results, the system in some cases even surpassed foreign manufacturers, but there were also shortcomings.  But they all boiled down mainly to minor bugs in the interface, which were promptly corrected by those.  manufacturer support. <br><br>  The result of the test was: <br><br><ol><li>  Nothing broke, although we broke </li><li>  In the course of the test, the support worked at a good level. </li><li>  Performance for our task was sufficient </li><li>  We realized that we, as a system integrator, can fully support the system ourselves (this is an important criterion for us) </li></ol><br>  We decided to go to this project with AERODISK storage systems and standard x-86 servers connected to the storage system via Fiber Channel and 10Gbit Ethernet.  It was necessary to assemble two fault-tolerant clusters that would be simultaneously serviced by urban video cameras. <br><br><h3>  <font color="#2e74b5">Implementation</font> </h3><br>  The design solution was developed from scratch, and really neither we, nor our partner, nor the operator had such experience.  It is clear that various best praktis and other theory were used, but, as they say in the military, “any plan is good before the first shot”.  The project on paper looked perfect and was approved.  It was embarrassing that AERODISK did not participate in the design, due to the fact that it appeared at the last moment in the project and it was already impossible to reaffirm something without postponing the deadlines (we cannot transfer the 2018 World Cup deadline))))). <br><br>  A set of solutions was delivered, set up according to project documents and put into trial operation, which was supposed to take several months.  It all started very well and both storage systems for the first month were filled with data from video cameras.  The flight was normal, everything is like on paper.  We were very pleased, but did not yet know that the real problems were still waiting for us ahead. <br><br>  We were already relaxed, but at the end of the second month of trial operation, service operators began to receive complaints about the performance and instability of the system as a whole. <br><br><img src="https://habrastorage.org/webt/6w/w-/ks/6ww-kswfzzilplsxexx9deik3zc.jpeg"><br><br>  We urgently engaged a video surveillance solution provider and AERODISK to solve the problem.  At that time, we waited for the ping pong to start, like this: <br><br><img src="https://habrastorage.org/webt/di/3v/yw/di3vywgjnr4ax_wx8-nryv3zqam.jpeg"><br><br>  To our surprise, this did not happen, and both vendors went head over to diagnosing the problem.  The next day a diagnosis was issued.  The cause of performance problems was in the incorrect configuration of the storage system.  It worked that confused us from the very beginning: physically it was not possible to attract the storage system manufacturer to the design, and this particular area was designed incorrectly, without taking into account the features of the AERODISK storage system.  We were even happy at that moment, because “well, if it is crookedly adjusted, so let's recustomize, what's the problem then :)?” <br><br>  But it was not there.  The problem was that the video from the cameras was written mainly on SMB file balls, which were presented from the storage systems to the video surveillance servers, and this was the root of evil, and for the correct video surveillance, you need to present the block devices and format them already at the server level local file systems.  It would seem, what the problem is, we create LUNs and give them to servers, but no.  Since for the first month of operation the entire usable storage capacity of both storage systems was already taken, the LUNs simply have nowhere to create.  There is no place, and you can’t delete old videos to free up space, because they’ll do it.  Well, backups will not help here, which is obvious, and replication was not incorporated into the project. <br><br><img src="https://habrastorage.org/webt/mg/xs/76/mgxs76x2rctgrxpf-umiporlppe.jpeg"><br><br>  It was no longer necessary to buy the same amount (half a petabyte) of the budget, and it was impossible to clear the current disk space.  The option to use temporary space in our cloud did not fit, as there will be too much delay with such recording volumes.  What started out so well was coming to a terrible end. <br><br><img src="https://habrastorage.org/webt/3z/zy/t5/3zzyt5hhkxlsin0kky-o6oslydo.jpeg"><br><br><h3>  <font color="#2e74b5">Decoupling</font> </h3><br>  But help still came.  AERODISK suggested putting another array of similar capacity and performance next to the storage reconfiguration next to it, redirecting the entire record to it, and waiting for one month when the data from incorrectly configured storage systems are automatically deleted.  After that, while the video data is written to the temporary storage system, and the permanent storage systems are free, you should perform the correct setup of block access on free storage systems.  Well, and then do everything in reverse order.  As you understand, all these operations should be performed “without a single break)))”, that is, without stopping recording from video cameras. <br><br>  Independently crank such a special.  we were a little afraid of the operation.  Therefore, AERODISK (for which many thanks to him), apart from the iron, several times sent two engineers to carry out these works. <br><br>  Switching to temporary storage, reconfiguration and reverse switching was performed without any stops.  The performance of storage and complex as a whole has returned to normal.  The operator of the service was beaming with happiness, since he was almost resigned to the failure of the project. <br>  To date, the Safe City complex has been commissioned, we have gained invaluable experience, and the software and hardware complex used in this project has been taken as the standard for subsequent applications in other cities of our country. <br><br><h3>  <font color="#2e74b5">findings</font> </h3><br>  So, we studied the market of Russian data storage systems, walked through OEM fakes, raw solutions, could still find a serious player in this market - the company AERODISK, whose product SHD ENGINE N-series, in our experience, can easily compete with more eminent foreign solutions.  Yes, the implementation of a large and complex project did not all go smoothly (and it can be different?), But the result was, in our opinion, excellent.  It is safe to say that Homeland can not worry about import substitution in the direction of storage systems. <br><br><img src="https://habrastorage.org/webt/zf/ee/em/zfeeemqidoq2ewlu8uh9qmqa1vs.jpeg"></div>