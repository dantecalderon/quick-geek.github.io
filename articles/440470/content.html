<div class="post__text post__text-html js-mediator-article">  A couple of days ago I saw Brian Goetz's tweet, but only today my hands reached around to play with examples. <br><br> <a href="https://twitter.com/BrianGoetz/status/1096050570576703490"><img src="https://habrastorage.org/webt/5c/66/b9/5c66b94c2bab6456801434.png" alt="image"></a> <br><br>  About this and I want to briefly tell. <br><br>  About <a href="https://openjdk.java.net/projects/panama/">the Panama project</a> on Habré <a href="https://habr.com/ru/company/jugru/blog/310014/">already wrote</a> , therefore I will just show couple of simple examples of how it is possible to apply <i>native binder</i> . <br><a name="habracut"></a><br>  First of all, you will need a C compiler. If you are using Linux or MacOS, then you already have it.  If Windows, you have to first install <a href="https://visualstudio.microsoft.com/ru/downloads/">Build Tools for Visual Studio 2017</a> .  And, of course, you need OpenJDK with Panama support.  You can get it either by assembling the “foreign” branch of the <a href="http://hg.openjdk.java.net/panama/dev/">corresponding repository</a> , or by downloading an <a href="http://jdk.java.net/panama/">Early-Access build</a> . <br><br>  Let's start with a minimal example - a simple function that adds two numbers: <br><br>  <b>adder.h</b> <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> _ADDER_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _ADDER_H __declspec(dllexport) int add(int, int); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span></code> </pre> <br>  <b>adder.c</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"adder.h"</span></span></span><span class="hljs-meta"> __declspec(dllexport) int add(int a, int b) { return a + b; }</span></span></code> </pre><br>  <b>Example.java</b> <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// импорт jextract'нутых "заголовочных" классов import static com.example.adder_h.*; public class Example { public static void main(String[] args) { System.out.println(add(3, 5)); } }</span></span></code> </pre><br>  We compile in DLL <br><br><pre> <code class="dos hljs">cl /LD adder.c</code> </pre><br>  We use the <code>jextract</code> utility to generate a java interface based on the header file: <br><br><pre> <code class="dos hljs">jextract -L . -l adder -o adder.jar -t "com.example" adder.h</code> </pre><br>  And we use the resulting jar file to build and run java code: <br><br><pre> <code class="dos hljs">javac -cp adder.jar Example.java java -cp .;adder.jar Example</code> </pre><br>  While not particularly impressive, but allows you to understand the principle.  Now try using python37.dll. <br><br>  <b>PythonMain.java</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.foreign.Libraries; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.foreign.Scope; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.foreign.memory.Pointer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> org.python.Python_h.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> org.python.pylifecycle_h.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> org.python.pythonrun_h.*; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PythonMain</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ Py_Initialize(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (Scope s = Scope.newNativeScope()) { PyRun_SimpleStringFlags(s.allocateCString( <span class="hljs-string"><span class="hljs-string">"print(sum([33, 55, 66]))\n"</span></span>), Pointer.nullPointer()); } Py_Finalize(); } }</code> </pre><br>  We generate interfaces: <br><br><pre> <code class="dos hljs">jextract -L "C:\Python37" -l python37 -o python.jar -t "org.python" --record-library-<span class="hljs-built_in"><span class="hljs-built_in">path</span></span> C:\Python37\include\Python.h</code> </pre><br>  Compile and run: <br><br><pre> <code class="dos hljs">javac -cp python.jar PythonMain.java java -cp .;python.jar PythonMain</code> </pre><br>  Congratulations, your java-application has just loaded the Python interpreter into itself and executed the script in it! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5c/66/cf/5c66cf32206cd242223020.jpeg" alt="image"></div><br>  More examples can be found in the <a href="https://hg.openjdk.java.net/panama/dev/raw-file/c359a9e944de/doc/panama_foreign.html">instructions for pioneers</a> . </div>