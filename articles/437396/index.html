<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why does CarPrice run artificial intelligence?</title>
  <meta name="description" content="A lot has been written and said about neural networks for the last three years. Thinking, we also decided to tell you how we use ‚Äúartificial intellige...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Why does CarPrice run artificial intelligence?</h1><div class="post__text post__text-html js-mediator-article">  A lot has been written and said about neural networks for the last three years.  Thinking, we also decided to tell you how we use ‚Äúartificial intelligence‚Äù in our daily work.  Moreover, with many routine operations, he copes much better than people. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d85/c65/267/d85c65267156ffceeaf7416b297551c5.png"><br><br>  In car sales, all major operations are traditionally tied to people - emotional and to varying degrees reliable.  Each year, CarPrice holds up to 150,000 auctions, which means that terabytes of statistics for each model of car, from its real state and up to price dynamics depending on the place of sale and the time of day, accumulate in the depths of the company.  Is it possible, by analyzing arrays of information, to increase the conversion to the sale?  Can and should be! <br><a name="habracut"></a><br>  At first we wanted to create a tool that will help the manager with the work.  But in the process of testing, we were convinced that the neural network is completely tolerable without a person.  But first things first. <br><br>  So, below we will talk about several tools created on the basis of neural networks, which allow us to increase the efficiency of work.  All of them work constantly, online. <br><br><h2>  Smart Margin </h2><br>  Smart margin is one of the key tools to increase profitability.  The system knows for how much we can sell each car, taking into account its age, mileage, equipment, damage, time of day, color, day of the week, and even the floor of the seller.  There are a lot of such parameters, about 600. <br><br>  Understanding how much dealers will give for a car and what amount is most likely to suit the seller, the neural network independently calculates the optimal size of the auction margin.  Smart margin is set up so as to create conditions under which the probability of selling a car would be maximum.  Sometimes, for a guaranteed sale, the neural network assigns the lowest possible margin, because the machine is highly liquid, in good condition and the seller will quickly sell it elsewhere.  On another car, the margin will be higher, because it is unreliable and expensive to repair, which means there are more risks for CarPrice. <br><br>  You can say something in the spirit of "just make the margin minimal, then sales will grow" and ... make a mistake.  There are cars whose owners will not sell their car, even if we pay extra.  There are cars whose owners are not at all sensitive to price - service and security of the transaction are more important to them.  Therefore, simply reducing the margin in most cases means that we will receive less revenue.  Again, the main task of this tool is to create conditions for the car to be sold.  If, for example, if the margin is reduced by a certain percentage, the probability of selling a car increases by a factor of 2-3, then we will do it.  As a result, due to a sharp increase in sales conversion, the company's revenues increase. <br><br>  Here are some statistics.  Before implementation, we performed A / B testing.  Below is a rough margin chart.  <i>The black line is a test group with a smart margin.</i>  <i>Green - control group, without smart margin.</i>  It can be seen that according to the recommendations of the neural network, the marginality is lower. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9be/a93/146/9bea931461ed7f83abb6032291b50910.png"><br><br>  And this is a graph of the status of the purchased cars, which is reflected in our ‚Äústars‚Äù.  It turns out that if all the factors are properly taken into account by the neural network, we buy back more good machines than without a neural network.  Better car - less complaints. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ed6/d95/dae/ed6d95daeb9c77d5a86a1ed696599144.png"><br><br>  Conversion chart.  The test group with a smart margin is higher: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/11f/9d1/0d7/11f9d10d76079d90f04915adfd8377e0.png"><br><br>  Above and the average price of the purchased machine.  That is higher and the volume of auction proceeds: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/875/8eb/939/8758eb939e0580cfc97e9ceab538acec.png"><br><br>  Finally, we compare the average returns for groups as a whole.  With the application of smart margin, it is several tens of percent higher simply because the conversion is increasing.  Due to the ‚Äúsmart‚Äù reduction of the margin on certain cars, we get a higher conversion to the sale, which, of course, dramatically increases the company's revenues. <br><br>  Is the neural network wrong in determining the optimal margin?  Today there is almost no, but at the testing stage errors got out constantly. <br><br><div class="spoiler">  <b class="spoiler_title">What is ‚Äúunder the hood‚Äù of a smart margin</b> <div class="spoiler_text"><br>  When developing a smart margin model, MultiLayer Feedforward Perceptron machine learning algorithm is used.  The neural network obtained as a result of applying this algorithm, in our case, looks as follows: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/db5/7e2/9db/db57e29db05f801092cc8b4f4b674264.png"><br><br>  X <sub>1</sub> , X <sub>2</sub> , ..., X <sub>n</sub> is the input data set that we know: <br><br>  1) about the client: <br><br><ul><li>  floor; <br></li><li>  age; <br></li><li>  the marketing channel from which the client came to the CarPrice website (Offline, Calls, CPA, Context, etc.); <br></li><li>  from which area of ‚Äã‚Äãthe city the client came. <br></li></ul><br>  2) his car: <br><br><ul><li>  mark; <br></li><li>  model; <br></li><li>  year of issue; <br></li><li>  modification; <br></li><li>  mileage; <br></li><li>  condition of the car (body, interior, appliances). <br></li></ul><br>  3) about the CarPrice sales point where the customer arrived: <br><br><ul><li>  professional experience of the CarPrice employee who works with the client; <br></li><li>  general indicators of the CarPrice sales point where the customer arrived. <br></li></ul><br>  4) about the price that dealers give at the auction for this car. <br><br>  The neural network's input data set includes the day of the week and the auction launch time, as well as the percentage of margin earned by CarPrice. <br><br>  At the outputs (outputs), the neural network gives the probability of the client's consent to sell us your car.  As a result, the task is reduced to maximizing the criterion of the expected absolute margin: <br><br><pre><code class="plaintext hljs">&lt;dealer price&gt;*&lt;margin&gt;*&lt;purchase probability&gt;</code> </pre> <br><br><ul><li>  dealer price - the maximum price that dealers give for cars at auction <br></li><li>  margin - the percentage of margin earned by CarPrice <br></li><li>  purchase probability - the probability of the client agreeing to sell your car <br></li></ul><br>  Smart Margin operates as a separate WebAPI service, which receives the input data listed above.  As a result, a margin percentage is returned, at which the expected absolute margin reaches a maximum. <br></div></div><br><br><h2>  Smart compatibility </h2><br>  Suppose we hired an inspector to inspect cars.  He worked for several months and spent several hundred auctions.  The neural network analyzes the results of its work and finds out which type of car or customers it works with better.  For example, one beautifully buys cars from girls with iPhones.  And the other copes with the model range of Volkswagen.  Someone special on "Japanese", and someone perfectly buys everything, but only on Monday or Friday. <br><br>  For such patterns follows the neural network.  Budget cars or expensive, ‚ÄúGermans‚Äù or ‚ÄúKoreans‚Äù - whoever comes to us, the system knows which employee will provide the best conversion.  Having registered on the website and having left data on the car, the neural network appoints the employee who will cope better than any other.  As in the first case, a lot of parameters are taken into account, including the client‚Äôs phone model (if the entry was via the mobile version of the site). <br><br>  After the introduction of smart compatibility, conversion at auctions, where the inspector was recommended, was 2-5 percentage points higher than at auctions without a recommendation.  And the average margin of the auction is higher by 10-15%.  This is a lot, especially when you consider that such an increase in efficiency does not require any costs. <br><br><div class="spoiler">  <b class="spoiler_title">What is "under the hood" in smart compatibility</b> <div class="spoiler_text">  In the process of analyzing the data, we were able to identify differences in the skills of managers when buying machines.  This insight formed the basis of a neural network that uses the following set of input parameters: <br><ul><li>  manager conversion by car price ranges <br></li><li>  conversion of a manager by price - year of production <br></li><li>  conversion of a manager by brand - car models <br></li><li>  manager conversion by client / gender <br></li><li>  manager conversion for the last 7 days <br></li><li>  conversion of the manager in the context of marketing channels where the client came from <br></li></ul><br>  At the output of the neural network is considered the probability of redemption of the machine.  The criterion optimized here is: <br><br><pre> <code class="plaintext hljs">&lt;Probability to purchase&gt;</code> </pre> <br>  For each client who arrives at the point of sale, the neural network chooses the manager who buys the car with the highest probability. <br></div></div><br><h2>  Smart slotting </h2><br>  This is a smarter neural network.  By signing up for a car sale, the client determines the address and time.  As I said, we understand in advance what the probability is that the owner will sell the car through us.  At the slot allocation stage, we give a higher priority time to such a customer / car pair, whose potential marginality or conversion will be higher. <br><br>  How does it look in practice?  If, according to the analysis, the probability of a client conversion is very high, then all slots are free for him when recording - I don‚Äôt want to choose.  And if the owner of a car arrives with a set of characteristics that historically is poorly converted in our country, then only unclaimed slots will be available for selection.  For example, late evening.  Because if you give time to a customer with a low probability of conversion, the customer with a higher probability of conversion will not be able to sign up and sell the car.  If, on a slot occupied by a not too liquid car, a liquid competitor appears, then we transfer the first car to a less popular watch with the resources of the call-center. <br><br>  Here it is also important to take into account that not every client will eventually come to our office.  For example, we are surprised that women come twice as obligatory as men.  And people with iPhones reach CarPrice 30% better than people with Android phones.  We take this and more into account when giving a customer the opportunity to choose the best time. <br><br>  Below is traditional statistics.  We divided the cars into three groups according to the probability of their arrival, estimated by the neural network - green, yellow and red.  As soon as this tool earned, the number of visits of "green" cars began to grow.  As you can see, the system was not mistaken. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/216/f56/bf2/216f56bf2935a46b6a63c667c932b227.png"><br><br>  And this is the conversion of the arrival in redemption.  It can be seen that the volume of "green" cars is also growing. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad7/4d6/8c5/ad74d68c516f2ec11cc71968e26138f5.png"><br><br>  Our earnings in points with smart slots are now 27% higher than in points without them.  And again, at no cost.  Except for the costs of algorithms and programming, of course. <br><br><div class="spoiler">  <b class="spoiler_title">What is "under the hood" in smart slotirovaniya</b> <div class="spoiler_text">  The basic neural network algorithm here is the same MLP, the input parameters for which are: <br><br><ul><li>  make / model / year auto <br></li><li>  marketing channel from which the client came to the site CarPrice <br></li><li>  the device model used by the client to evaluate the car on the site <br></li><li>  day of the week / hours of the day when the client came to the site <br></li></ul><br>  According to a set of these parameters, the neural network considers the probability of a car buy-out event from a client or, in other words, a predictable end-to-end conversion from an application to a buy-out. <br><br>  Depending on the calculated value of the probability of redemption and the expected margin that the company earns, customers are divided into 3 groups by value.  The criterion for division into groups is as follows: <br><br><pre> <code class="plaintext hljs">&lt;ProbabilityAppointment To Purchase&gt;*&lt;Expected Margin&gt;</code> </pre> <br>  Clients with the highest value of this criterion belong to the first group, with the lowest - to the third.  It is important for us that there are more customer records of the first group of value, since we earn much more from them.  Therefore, as slots are formed, we give more options for choosing a convenient slot for the first group, a little less for the second and much less for the third group. <br><br>  To plan the filling of slots and to avoid queues at points of sale, a predictive model has been developed based on a decision tree, which calculates the probability of a customer arriving at a point.  Here is what one of the rules for calculating the likelihood of a client‚Äôs arrival looks like: <br><br><pre> <code class="plaintext hljs">cr_apcon2m_source_chan &lt;= 0.5672744316784764 AND cr_apcon2m_weekday_conf &gt; 0.5210736783538652 AND cr_apcon2m_hour_conf &gt; 0.5068323664539807 AND cr_apcon2m_source_chan &gt; 0.4755808440018966 AND cr_apcon2m_brand_model &gt; 0.037602487984167376 AND cr_apcon2m_brand_model &lt;= 0.1464285714285714 AND cr_apcon2m_hour_conf &gt; 0.14705882352941177</code> </pre> <br><br>  Here the cr_ variables are conversions by client parameters.  For example, cr_apcon2m_source_chan is the average conversion of customers coming from the same marketing channel.  If the conditions are fulfilled above, the estimated probability of arrival of the client is 0.14. <br></div></div><br><h2>  Smart tape </h2><br>  Every dealer who buys cars from us has certain preferences.  Someone loves expensive models, someone buys only ‚ÄúLogans‚Äù and ‚ÄúSolaris‚Äù ... Dealers view a lot of cars, and if you take into account their consumer preferences when forming the auction tape, you can dramatically increase the conversion.  It seems to be obvious?  However, everything is a little more complicated. <br><br>  Dealer preferences are variable.  Business and customer preferences are changing, so they can move from one segment to another.  The neural network on clicks, transactions and transactions determines this and reconfigures the tape of cars.  For example, the entire December, a dealer Ivanov from Vologda bought ‚Äútricks‚Äù for 300-500 thousand rubles.  But suddenly, in January, he began to buy expensive SUVs with prices ranging from one and a half to two million.  The tape is immediately rebuilt, offering him the most relevant cars.  In addition, the system itself sends notifications to it, responsive to the reaction. <br><br>  Below are a few typical dealer profiles.  Those who buy cheap cars, as a rule, never buy expensive cars.  Why then show them to them? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e23/c61/9a8/e23c619a8882cce762e79dda45a52c4a.png"><br><br>  This is the easiest filter.  The neural network, when forming a personalized auction feed, simultaneously analyzes hundreds of similar attributes. <br><br>  By forming the auction tape individually, we get higher auction rates.  A dealer who, for example, needs a three-year-old "logan" is more likely to fight for him and will most likely bet higher than others.  Just by showing the buyers the cars that are most interesting to them, we get an increase in conversion into buyback and an increase in the average margin for the auction. <br><br><h2>  What is the result? </h2><br>  Of course, we are developing other neurotools, some of which today are in a state close to implementation.  Why is this so important?  First, the neural network allows us to earn more from the existing stream of customers.  That is, in order to increase revenue, you do not need to increase marketing costs.  Secondly, the neural network provides more satisfied customers - the more people sold cars through CarPrice, the higher the NPS.  And in the long run, this is probably much more important than revenue. <br><br>  For those who prefer the video format, we offer a <a href="https://www.youtube.com/watch%3Fv%3DjUddo5vyQ4w">speech by</a> Denis Dolmatov, the general director of CarPrice, dedicated to our neural networks. <br><br>  <i>And finally, about vacancies.</i>  <i>Now we are looking for a <a href="http://job.carprice.ru/linux_msk">DevOps / Linux administrator</a> in Moscow for a car auction team, as well as a <a href="http://job.carprice.ru/senior_php_msk">senior PHP developer</a> for an internal services team.</i>  <i>We welcome your resume.</i> <i><br></i> </div><p>Source: <a href="https://habr.com/ru/post/437396/">https://habr.com/ru/post/437396/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>