<div class="post__text post__text-html js-mediator-article">  Since the release of information about the vulnerabilities Meltdown, passions have already calmed down.  Microsoft managed to release the patch, trouble it, recall it and release it again. <br><br>  It so happened that I had at hand two closest in characteristics of the system: <br>  i5 7600K + Z270 and i7 3770K + Z77.  On both systems, Windows 10 Pro is installed with the latest set of updates.  The operating system is installed on SSD, for tests a separate NVME SSD was used, the same in both cases.  Graphic tests were carried out according to the principle “walk so walk”, on the GTX 1080Ti, but at the same time, in realistic scenarios for such a video card.  That is, no degradation of the graphics settings to detect a clean, uncluttered processor dependency has been made.  On this hardware, it was decided to check the veracity of Microsoft's statements about the effect of patches on the performance of modern and old, but not yet outdated, iron. <br><a name="habracut"></a><br>  Microsoft Executive Vice President of Windows, Terry Merson (Terry Myerson) in an official blog <a href="https://cloudblogs.microsoft.com/microsoftsecure/2018/01/09/understanding-the-performance-impact-of-spectre-and-meltdown-mitigations-on-windows-systems/">wrote</a> : <br><br><blockquote>  Summarizing the current research results, we can say the following: <br><br>  On computers running Windows 10 on modern processors (belonging to generations of 2016 or newer, that is, Skylake, Kabylake and newer), tests will demonstrate a slowdown by a few percent that the overwhelming majority of users will not be able to notice, since in absolute values ​​will be measured in milliseconds. <br><br>  Computers with Windows 10 on relatively old processors (belonging to generations up to 2015 inclusive, Haswell and older) in some tests may show a more significant performance drop, perhaps some users will be able to notice. <br><br>  The performance of systems running Windows Server on any processors will noticeably suffer, especially on I / O-intensive applications, when activating isolation of untrusted code. </blockquote><br>  To test various aspects of system performance, we used: <br><br><ul><li>  3DMark Time Spy 1.1 </li><li>  CineBench R15.038 </li><li>  AS SSD Benchmark 1.7.4739.38088 </li><li>  Crystal DiskMark 5.5.0 </li></ul><br>  Activation and deactivation of process isolation was performed by the InSpectre utility.  On the motherboard on the Z270 installed BIOS update with patches of microcode. <br><br>  Expected result: in accordance with official statements of Microsoft, the performance degradation on the old CPU should be several times greater.  Based on the analysis of publications and statements by Microsoft representatives, input and output should suffer the most. <br><br><h2>  Go! </h2><br>  (a <i>small remark in front of screenshots with the results</i> ) <br><br>  Fully equivalent configurations could not be tested the first time due to the lack of an M.2 slot on the old mother memory and the lack of a PCI-E-&gt; M.2 raiser.  It was ordered on one well-known Chinese trading platform, and in the meantime I drove tests on NVME SSD (A-Data XPG SX8000 512GB) on Kaby Lake and on SATA (Silicon Power S55 240GB (Phison) on Ivy Bridge. The results were directly incomparable but curious. <br><br>  Screenshots of tests: <br><br>  i5 7600K @ 4315 (102.76 * 42) <br><br>  Patch deactivated: <br><br><img src="https://habrastorage.org/webt/4a/m8/bu/4am8bu5ebimxnwkltbvefr-7_50.png"><br><br>  Patch activated: <br><br><img src="https://habrastorage.org/webt/2y/rw/op/2yrwoppx7ku-w8mfekvrkjawekk.png"><br><br>  i7 3770K @ 4355 (103.7 * 42) <br><br>  Patch deactivated: <br><br><img src="https://habrastorage.org/webt/ct/gk/fw/ctgkfwknc5byvllt3n6gmwbmjai.png"><br><br>  Patch activated: <br><br><img src="https://habrastorage.org/webt/fs/xy/2j/fsxy2jkyxylq1bjcyrddlfjpo28.png"><br><br>  Hmm ... the results were even more than interesting.  The performance of the CPU itself in complex calculations varied within the margin of error.  It suffered the most, just as Microsoft feared, namely I / O.  And then begin the discrepancies with what was expected. <br><br>  The drop in I / O performance on the new processor (Kaby Lake, i5 7600K) after the patch was activated, in the worst case, in the CrystalMark Write 4K scenario, was over 70%.  Seventy two percent!  If so introduces IO on the new processor, then what will happen to the frankly old one ?!  And on the old i7 3770K of 2011, the drop in performance was at worst about 6%.  And the absolute numbers for such different drives with the activated patch differ not to say so many times.  Is Microsoft and Intel really a soul mate?  Or have we not noticed something? <br><br>  So where is the bottleneck?  It still had to find out, it remained to wait for the PCI-E -&gt; M.2 raiser and repeat the tests.  Looking ahead, I will say that tests under equal conditions did not work.  NVME SSD rested in PCI-E.2 x2 bandwidth. <br><br>  Here are the test run results: <br><br>  Patch deactivated: <br><br><img src="https://habrastorage.org/webt/va/jw/r8/vajwr8azt3ovlyojvfm3n39mwlo.png"><br><br>  Patch activated: <br><br><img src="https://habrastorage.org/webt/eq/dn/mj/eqdnmjkq5yb07oktkr1yab6ejc4.png"><br><br>  Summary table of results: <br><br><img src="https://habrastorage.org/webt/gw/dv/jo/gwdvjo9icjszvwea9ad0dlkh7ce.png"><br><br><h2>  Total </h2><br><h3>  The bad news </h3><br>  Fast drives even on modern CPUs after installing the patch lose up to 70% performance in a number of scenarios. <br><br><h3>  Good news </h3><br><ol><li>  Even very fast drives lose in performance on old CPUs in the worst case no more than on new ones, despite the loud statements of Intel.  Reliably check it was not possible in absolutely equal conditions.  But!  Given the bandwidth limitations on older processors, they lose %% less.  Old people are clearly too early for peace, no matter how much Intel wants to sell more new stones. </li><li>  Ordinary household SSDs lose very little in performance.  About HDD, I generally keep quiet.  Those.  in everyday life, without using a computer as a database server, you need to really try to notice the difference on ordinary hardware. </li><li>  In a pure processor load, there is no difference before and after. </li><li>  Gamers can not worry - the speed of drawing varies from the activation of the patch within the error. </li></ol></div>