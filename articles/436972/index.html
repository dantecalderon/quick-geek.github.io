<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Behaviors - a state machine without a headache</title>
  <meta name="description" content="The standard approach to describing the sequence of user inputs and reactions to them (for example, when controlling a character in a game) is a state...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Behaviors - a state machine without a headache</h1><div class="post__text post__text-html js-mediator-article">  <i>The standard approach to describing the sequence of user inputs and reactions to them (for example, when controlling a character in a game) is a state machine.</i>  <i>He, however, often leads to cumbersome programs, understanding of which requires considerable effort or even sketching on paper.</i>  <i>In this article, I suggest a small shift in the description, which allows you to save screen space and brain resource.</i> <i><br></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4fd/94b/589/4fd94b589b432e25e15d3ca0a8f0a959.jpg" alt="image"><br><br>  The shift in the description is in the use of coroutines.  To use this technique, you need to imagine what <b>behavior</b> we expect from the computer in the end.  Therefore, I called the small library that I created for this task - Behaviors. <br><a name="habracut"></a><br>  When a user interacts with a program, the computer waits for a certain action and responds to input in a certain way.  Primitive Behaviors and their combinations can replace cumbersome state machines (state machines), which are often formally or informally found in programs.  For example, when a program is in a state of waiting for a key to be pressed, we can say that it executes the Behavior waitForKey (...).  Convenience is that Behaviors are combined in an easily readable form, unlike finite automata.  A simple example of Drag &amp; Drop: <br><br><pre><code class="tex hljs">* DragAndDrop = * draggedObject = –∂–¥–µ–º MouseDown –Ω–∞ –∫–∞–∫–æ–º-—Ç–æ –æ–±—ä–µ–∫—Ç–µ * First * –∂–¥–µ–º MouseUp * Forever * –∂–¥–µ–º MouseMove * –î–≤–∏–≥–∞–µ–º draggedObject</code> </pre> <br>  Behavior has a beginning, an end, and can return a value.  Behaviors are executed in order or can be executed in parallel using combinators.  For example, the First combinator performs several Behaviors in parallel and ends when one of the Behaviors is finished, returning its result.  Forever - repeats the performance of a certain Behavior to infinity.  Unlike the execution of a function, Behavior does not block the main thread of execution, so endless Behaviors can be very useful. <br><br>  I implemented Behaviors using functions that receive primitive events (like MouseDown, MouseUp, MouseMove, ...) as a parameter and return an object of the form: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">done</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>|<span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>: result value }</code> </pre><br>  You can see the implementation here: <a href="">behavior.js on GitHub</a> and the Drag &amp; Drop example here: <a href="https://jsfiddle.net/t1dv4qpn/9/">jsFiddle</a> . <br><br>  Where can I apply Behaviors? <br><br><ul><li>  <i>Computer games</i> - it is very convenient to write logic and AI, sometimes even doing everything with Behaviors, including animation and movement of objects, but you need to monitor performance </li><li>  <i>Tutorial in the frontend</i> (tour of new functions) - we show information, we wait for user interaction, we continue depending on the input, all the code is in one place and is read almost like pseudo-code </li><li>  <i>The parser of a subject-oriented language</i> is an idiomatic code, there is no need to ‚Äúlook ahead‚Äù on input, since you can run several Behaviors in parallel </li></ul><br>  Photo: <i>Behavior by Nick Youngson CC BY-SA 3.0 Alpha Stock Images</i> </div><p>Source: <a href="https://habr.com/ru/post/436972/">https://habr.com/ru/post/436972/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>