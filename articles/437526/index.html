<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Volume rendering in WebGL</title>
  <meta name="description" content="Figure 1. An example of volume renders performed by the WebGL renderer. Left: simulation of the spatial probability distribution of electrons in a hig...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Volume rendering in WebGL</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2d/93c/0ee/f2d93c0eee5e4bc9710629f4ffdafcbf.png"></div><br>  <i>Figure 1. An example of volume renders performed by the WebGL renderer.</i>  <i>Left: simulation of the spatial probability distribution of electrons in a high-potential protein molecule.</i>  <i>Right: Bonsai tree tomogram.</i>  <i>Both datasets are from the <a href="https://klacansky.com/open-scivis-datasets/">Open SciVis Datasets repository</a> .</i> <br><br>  In scientific visualization, volumetric rendering is widely used for visualizing three-dimensional scalar fields.  These scalar fields are often homogeneous grids of values, representing, for example, charge density around a molecule, an MRI scan or a CT scan, a stream of air enveloping an airplane, etc.  Volumetric rendering is a conceptually simple method of turning such data into images: sampling the data along the rays from the eye, and assigning color and transparency to each sample, we can create useful and beautiful images of such scalar fields (see Figure 1).  In the GPU renderer, such three-dimensional scalar fields are stored as 3D textures;  However, 3D textures are not supported in WebGL1, so additional hacks are required to emulate them in volumetric rendering.  Recently, WebGL2 has added support for 3D textures, allowing the browser to implement an elegant and fast volumetric renderer.  In this post, we will discuss the mathematical foundations of volumetric rendering and discuss how to implement it on WebGL2, to create an interactive volumetric renderer, fully working in the browser!  Before you begin, you can test the bulk renderer described in this post <a href="https://www.willusher.io/webgl-volume-raycaster/">online</a> . <br><a name="habracut"></a><br><h1>  1. Introduction </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ba9/4f1/6c2/ba94f16c22c7c3d2db4942aeef836150.svg"></div><br>  <i>Figure 2: physical volume rendering, taking into account the absorption and emission of light by volume, as well as the effects of scattering.</i> <br><br>  To create a physically realistic image from volumetric data, we need to model how light rays are absorbed, emitted and scattered by the medium (Figure 2).  Although modeling the propagation of light through the environment at this level creates beautiful and physically correct results, it is too expensive for interactive rendering, which is the purpose of the visualization software.  In scientific visualizations, the ultimate goal is to allow scientists to interactively explore their data, as well as ask questions about their research task, and answer them.  Since a completely physical scattering model will be too expensive for interactive rendering, visualization applications use a simplified emission-absorption model, either ignoring the costly effects of scattering, or in some way approximating them.  In this article we will consider only the emission-absorption model. <br><br>  In the emission-absorption model, we calculate the illumination effects that appear in Figure 2 only along the black beam, and ignore those that arise from the dotted gray rays.  The rays passing through the volume and reaching the eyes accumulate the color emitted by the volume and gradually fade out until they are completely absorbed by the volume.  If we trace the rays from the eye through the volume, we can calculate the light entering the eye by integrating the ray over the volume in order to accumulate the emission and absorption along the ray.  Take a ray that hits the volume at a point <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">s</span><span class="MJXp-mo" id="MJXp-Span-3" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-4">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.351ex" height="1.937ex" viewBox="0 -728.2 2304.1 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-30" x="1803" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> s = 0 </script>  and exiting the volume at the point <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">s</span><span class="MJXp-mo" id="MJXp-Span-7" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.772ex" height="2.057ex" viewBox="0 -780.1 2485.1 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-4C" x="1803" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> s = L </script>  .  We can calculate the light entering the eye using the following integral: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-9"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">C</span><span class="MJXp-mo" id="MJXp-Span-11" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12">r</span><span class="MJXp-mo" id="MJXp-Span-13" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-14" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-15">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17">n</span><span class="MJXp-msubsup" id="MJXp-Span-18"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">L</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-20">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22">C</span><span class="MJXp-mo" id="MJXp-Span-23" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">s</span><span class="MJXp-mo" id="MJXp-Span-25" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-26">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28">u</span><span class="MJXp-mo" id="MJXp-Span-29" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30">s</span><span class="MJXp-mo" id="MJXp-Span-31" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-32"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-34" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-35">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-36">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">n</span><span class="MJXp-msubsup" id="MJXp-Span-39"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">s</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-41">0</span></span></span></span></span></span><span class="MJXp-mtext" id="MJXp-Span-43">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">u</span><span class="MJXp-mo" id="MJXp-Span-46">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">t</span><span class="MJXp-mo" id="MJXp-Span-48">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">t</span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52">s</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="38.872ex" height="3.383ex" viewBox="0 -1039.5 16736.7 1456.5" role="img" focusable="false" style="vertical-align: -0.969ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-72" x="1150" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="1601" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="2268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="3575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6E" x="3920" y="0"></use><g transform="translate(4521,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-4C" x="511" y="490"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-30" x="511" y="-435"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="5464" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="6224" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="6614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="7083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6D" x="7723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-75" x="8601" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="9174" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="9563" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="10033" y="0"></use><g transform="translate(10422,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="0" y="0"></use><g transform="translate(466,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="1132" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6E" x="1477" y="0"></use><g transform="translate(1469,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="511" y="500"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-30" x="511" y="-432"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6D" x="3247" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-75" x="4125" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="4698" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="5087" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="5449" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-64" x="5838" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="6362" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-64" x="15743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="16267" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> C (r) = \ int_0 ^ L C (s) \ mu (s) e ^ {- \ int_0 ^ s \ mu (t) dt} ds </script></p><br>  During the passage of the beam through the volume, we integrate the emitted color <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-53"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54">C</span><span class="MJXp-mo" id="MJXp-Span-55" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">s</span><span class="MJXp-mo" id="MJXp-Span-57" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.666ex" height="2.66ex" viewBox="0 -832 2009 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="1150" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="1619" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> C (s) </script>  and absorption <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-58"><span class="MJXp-mtext" id="MJXp-Span-59">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">u</span><span class="MJXp-mo" id="MJXp-Span-62" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">s</span><span class="MJXp-mo" id="MJXp-Span-64" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.85ex" height="2.66ex" viewBox="0 -832 2949.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6D" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-75" x="1128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="1701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="2090" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="2560" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> \ mu (s) </script>  at every point <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-65"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.09ex" height="1.455ex" viewBox="0 -520.7 469.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> s </script>  along the beam.  The emitted light at each point fades and returns to the eye the absorption volume up to this point, which is calculated by the member <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-67"><span class="MJXp-msubsup" id="MJXp-Span-68"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-70" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-71">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-72">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74">n</span><span class="MJXp-msubsup" id="MJXp-Span-75"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-76" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">s</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-77">0</span></span></span></span></span></span><span class="MJXp-mtext" id="MJXp-Span-79">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">u</span><span class="MJXp-mo" id="MJXp-Span-82">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-83">t</span><span class="MJXp-mo" id="MJXp-Span-84">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86">t</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.358ex" height="2.539ex" viewBox="0 -987.6 5320.7 1093.4" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="0" y="0"></use><g transform="translate(466,362)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="1132" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6E" x="1477" y="0"></use><g transform="translate(1469,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="511" y="500"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-30" x="511" y="-432"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6D" x="3247" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-75" x="4125" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="4698" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="5087" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="5449" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-64" x="5838" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="6362" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-7"> e ^ {- \ int_0 ^ s \ mu (t) dt} </script>  . <br><br>  In general, this integral cannot be calculated analytically, so you need to use numerical approximation.  We perform the approximation of the integral, taking a lot of samples <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-87"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> N </script>  along the beam on the interval <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-89"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">s</span><span class="MJXp-mo" id="MJXp-Span-91" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-92" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-93">0</span><span class="MJXp-mo" id="MJXp-Span-94" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">L</span><span class="MJXp-mo" id="MJXp-Span-96" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.262ex" height="2.66ex" viewBox="0 -832 3987.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-5B" x="1803" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-30" x="2082" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2C" x="2582" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-4C" x="3027" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-5D" x="3709" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> s = [0, L] </script>  each of which is located at a distance <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-97"><span class="MJXp-mtext" id="MJXp-Span-98">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-99">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-100">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.442ex" height="2.057ex" viewBox="0 -780.1 3204 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="2734" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> \ Delta s </script>  from each other (Figure 3), and summing up all these samples.  The attenuation term at each sampling point becomes the product of the rows accumulating absorption in the previous samples. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-105"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">C</span><span class="MJXp-mo" id="MJXp-Span-107" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">r</span><span class="MJXp-mo" id="MJXp-Span-109" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-110" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-111">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">u</span><span class="MJXp-msubsup" id="MJXp-Span-114"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">N</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-116"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">i</span><span class="MJXp-mo" id="MJXp-Span-118">=</span><span class="MJXp-mn" id="MJXp-Span-119">0</span></span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">C</span><span class="MJXp-mo" id="MJXp-Span-122" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">i</span><span class="MJXp-mtext" id="MJXp-Span-124">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-126">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">s</span><span class="MJXp-mo" id="MJXp-Span-131" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-132">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">u</span><span class="MJXp-mo" id="MJXp-Span-135" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136">i</span><span class="MJXp-mtext" id="MJXp-Span-137">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">s</span><span class="MJXp-mo" id="MJXp-Span-144" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-145">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">s</span><span class="MJXp-mtext" id="MJXp-Span-152">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155">o</span><span class="MJXp-msubsup" id="MJXp-Span-156"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157" style="margin-right: 0.05em;">d</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-162"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">i</span><span class="MJXp-mo" id="MJXp-Span-164">‚àí</span><span class="MJXp-mn" id="MJXp-Span-165">1</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-158"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">j</span><span class="MJXp-mo" id="MJXp-Span-160">=</span><span class="MJXp-mn" id="MJXp-Span-161">0</span></span></span></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-166"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-168" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-169">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-170">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-171">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">u</span><span class="MJXp-mo" id="MJXp-Span-173">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">j</span><span class="MJXp-mtext" id="MJXp-Span-175">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">s</span><span class="MJXp-mo" id="MJXp-Span-182">)</span><span class="MJXp-mtext" id="MJXp-Span-183">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">s</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="75.454ex" height="3.624ex" viewBox="0 -1039.5 32486.9 1560.2" role="img" focusable="false" style="vertical-align: -1.209ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-72" x="1150" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="1601" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="2268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="3575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-75" x="4044" y="0"></use><g transform="translate(4617,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-4E" x="1242" y="488"></use><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-30" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="6744" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="7504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="7894" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="8489" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="9318" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="9784" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="10083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="10444" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="10974" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="11443" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6D" x="12083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-75" x="12961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="13534" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="13923" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="14519" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="15347" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="15814" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="16112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="16474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="17003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="17473" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="18112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="18941" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="19407" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="19706" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="20067" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="20597" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="21316" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-72" x="21820" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6F" x="22271" y="0"></use><g transform="translate(22757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-64" x="0" y="0"></use><g transform="translate(524,403)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-31" x="1124" y="0"></use></g><g transform="translate(520,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="412" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-30" x="1191" y="0"></use></g></g><g transform="translate(24573,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="0" y="0"></use><g transform="translate(466,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6D" x="1132" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-75" x="2010" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="2583" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6A" x="2972" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="3738" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="4567" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="5033" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="5332" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="5693" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="6223" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="6692" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="7435" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="8264" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="8730" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="9029" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="9390" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="9920" y="0"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> C (r) = \ sum_ {i = 0} ^ NC (i \ Delta s) \ mu (i \ Delta s) \ Delta s \ prod_ {j = 0} ^ {i-1} e ^ {- \ mu (j \ Delta s) \ Delta s} </script></p><br>  To further simplify this amount, we approximate the attenuation term ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-190"><span class="MJXp-msubsup" id="MJXp-Span-191"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-192" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-193" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-194">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-195">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197">u</span><span class="MJXp-mo" id="MJXp-Span-198">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">j</span><span class="MJXp-mtext" id="MJXp-Span-200">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">s</span><span class="MJXp-mo" id="MJXp-Span-207">)</span><span class="MJXp-mtext" id="MJXp-Span-208">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">s</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.377ex" height="2.539ex" viewBox="0 -987.6 7481.8 1093.4" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="0" y="0"></use><g transform="translate(466,362)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6D" x="1132" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-75" x="2010" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="2583" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6A" x="2972" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-64" x="3738" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="4262" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="4728" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="5027" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="5388" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="5918" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="6387" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-64" x="7130" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="7654" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="8120" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="8419" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="8780" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="9310" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-12"> e ^ {- \ mu (j \ delta s) \ delta s} </script>  ) its next to taylor.  Also for convenience, we introduce alpha <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-215"><span class="MJXp-mtext" id="MJXp-Span-216">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">a</span><span class="MJXp-mo" id="MJXp-Span-222" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">i</span><span class="MJXp-mtext" id="MJXp-Span-224">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-229">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">s</span><span class="MJXp-mo" id="MJXp-Span-231" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-232" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-233">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235">u</span><span class="MJXp-mo" id="MJXp-Span-236" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-237">i</span><span class="MJXp-mtext" id="MJXp-Span-238">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-239">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">s</span><span class="MJXp-mo" id="MJXp-Span-245" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-246">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-247">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="40.839ex" height="2.66ex" viewBox="0 -832 17583.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="2158" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="2687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="3077" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="3672" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="4501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="4967" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="5266" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="5627" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="6157" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="6626" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="7293" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6D" x="8600" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-75" x="9478" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="10051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="10440" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="11036" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="11864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="12331" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="12629" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="12991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="13520" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="13990" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="14629" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="15458" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="15924" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="16223" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="16584" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="17114" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> \ alpha (i \ Delta s) = \ mu (i \ Delta s) \ Delta s </script>  .  This gives us the front-to-back alpha compositing equation: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-253"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254">C</span><span class="MJXp-mo" id="MJXp-Span-255" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">r</span><span class="MJXp-mo" id="MJXp-Span-257" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-258" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-259">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-261">u</span><span class="MJXp-msubsup" id="MJXp-Span-262"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-263" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268">N</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-264"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265">i</span><span class="MJXp-mo" id="MJXp-Span-266">=</span><span class="MJXp-mn" id="MJXp-Span-267">0</span></span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">C</span><span class="MJXp-mo" id="MJXp-Span-270" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">i</span><span class="MJXp-mtext" id="MJXp-Span-272">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-278">s</span><span class="MJXp-mo" id="MJXp-Span-279" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-280">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285">a</span><span class="MJXp-mo" id="MJXp-Span-286" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-287">i</span><span class="MJXp-mtext" id="MJXp-Span-288">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-289">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-291">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294">s</span><span class="MJXp-mo" id="MJXp-Span-295" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-296">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-298">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299">o</span><span class="MJXp-msubsup" id="MJXp-Span-300"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301" style="margin-right: 0.05em;">d</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-306"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307">i</span><span class="MJXp-mo" id="MJXp-Span-308">‚àí</span><span class="MJXp-mn" id="MJXp-Span-309">1</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-302"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303">j</span><span class="MJXp-mo" id="MJXp-Span-304">=</span><span class="MJXp-mn" id="MJXp-Span-305">0</span></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-310" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-311">1</span><span class="MJXp-mo" id="MJXp-Span-312" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-313">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">a</span><span class="MJXp-mo" id="MJXp-Span-319" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">j</span><span class="MJXp-mtext" id="MJXp-Span-321">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-322">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">s</span><span class="MJXp-mo" id="MJXp-Span-328" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-329" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="74.188ex" height="3.383ex" viewBox="0 -935.7 31941.8 1456.5" role="img" focusable="false" style="vertical-align: -1.209ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-72" x="1150" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="1601" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="2268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="3575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-75" x="4044" y="0"></use><g transform="translate(4617,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-4E" x="1242" y="488"></use><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-30" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="6744" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="7504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="7894" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="8489" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="9318" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="9784" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="10083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="10444" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="10974" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="11443" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="12083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="12612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="12911" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="13414" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="13991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="14520" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="14910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="15505" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="16334" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="16800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="17099" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="17460" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="17990" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="18459" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="19099" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-72" x="19602" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6F" x="20054" y="0"></use><g transform="translate(20539,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-64" x="0" y="0"></use><g transform="translate(524,403)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-31" x="1124" y="0"></use></g><g transform="translate(520,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="412" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-30" x="1191" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="22356" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-31" x="22745" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="23468" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="24719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="25248" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="25547" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="26050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="26627" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="27156" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6A" x="27546" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="28208" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="29037" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="29503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="29802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="30163" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="30693" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="31162" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="31552" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-14"> C (r) = \ sum_ {i = 0} ^ NC (i \ Delta s) \ alpha (i \ Delta s) \ prod_ {j = 0} ^ {i-1} (1 - \ alpha (j \ Delta s)) </script></p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/15c/cfa/00f/15ccfa00fa64a8cd0e4823be4095ccbe.svg"></div><br>  <i>Figure 3: Calculation of the emission-absorption rendering integral in volume.</i> <br><br>  The above equation reduces to a for loop, in which we step through the ray through volume and iteratively accumulate color and opacity.  This cycle continues until either the beam leaves the volume or the accumulated color becomes opaque ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-330"><span class="MJXp-mtext" id="MJXp-Span-331">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-333">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">a</span><span class="MJXp-mo" id="MJXp-Span-337" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-338">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.503ex" height="2.419ex" viewBox="0 -780.1 4522.1 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="2158" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="2965" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-31" x="4021" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-15"> \ alpha = 1 </script>  ).  An iterative calculation of the above sum is performed using the familiar compositing equations from front to back: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-339"><span class="MJXp-mtext" id="MJXp-Span-340">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343">t</span><span class="MJXp-msubsup" id="MJXp-Span-344"><span class="MJXp-mrow" id="MJXp-Span-345" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346">C</span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-347" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-348" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-349">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-350">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-352">t</span><span class="MJXp-msubsup" id="MJXp-Span-353"><span class="MJXp-mrow" id="MJXp-Span-354" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">C</span></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-356" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">i</span><span class="MJXp-mo" id="MJXp-Span-358">‚àí</span><span class="MJXp-mn" id="MJXp-Span-359">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-360" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-361" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-362">1</span><span class="MJXp-mo" id="MJXp-Span-363" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-364">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-365">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-366">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-367">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-368">h</span><span class="MJXp-msubsup" id="MJXp-Span-369"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-371" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-372">i</span><span class="MJXp-mo" id="MJXp-Span-373">‚àí</span><span class="MJXp-mn" id="MJXp-Span-374">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-375" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-376">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-377">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-378">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">t</span><span class="MJXp-mrow" id="MJXp-Span-380"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">C</span></span><span class="MJXp-mo" id="MJXp-Span-382" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383">i</span><span class="MJXp-mtext" id="MJXp-Span-384">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-388">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390">s</span><span class="MJXp-mo" id="MJXp-Span-391" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="51.703ex" height="2.66ex" viewBox="0 -832 22261.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="1356" y="0"></use><g transform="translate(1717,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="1011" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="3055" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="4361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="4937" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="5467" y="0"></use><g transform="translate(5828,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="0" y="0"></use><g transform="translate(715,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2B" x="8015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="9016" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-31" x="9405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="10128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="11378" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="11908" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="12206" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="12710" y="0"></use><g transform="translate(13286,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="15065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="15704" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="16281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="16810" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="17172" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="17932" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="18322" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="18917" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="19746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="20212" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="20511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="20872" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="21402" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="21871" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-16"> \ hat {C} _i = \ hat {C} _ {i-1} + (1 - \ alpha_ {i-1}) \ hat {C} (i \ Delta s) </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-392"><span class="MJXp-mtext" id="MJXp-Span-393">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-395">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-397">h</span><span class="MJXp-msubsup" id="MJXp-Span-398"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-400" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-401" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-402">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-405">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-406">h</span><span class="MJXp-msubsup" id="MJXp-Span-407"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-408" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-409" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410">i</span><span class="MJXp-mo" id="MJXp-Span-411">‚àí</span><span class="MJXp-mn" id="MJXp-Span-412">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-413" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-414" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-415">1</span><span class="MJXp-mo" id="MJXp-Span-416" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-417">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-418">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-420">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-421">h</span><span class="MJXp-msubsup" id="MJXp-Span-422"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-424" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425">i</span><span class="MJXp-mo" id="MJXp-Span-426">‚àí</span><span class="MJXp-mn" id="MJXp-Span-427">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-428" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-429">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-430">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-432">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-433">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-434">a</span><span class="MJXp-mo" id="MJXp-Span-435" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">i</span><span class="MJXp-mtext" id="MJXp-Span-437">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-440">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-441">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-442">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-443">s</span><span class="MJXp-mo" id="MJXp-Span-444" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="53.372ex" height="2.66ex" viewBox="0 -832 22979.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="1581" y="0"></use><g transform="translate(2158,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="3309" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="4615" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="5145" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="5443" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="5947" y="0"></use><g transform="translate(6523,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2B" x="8524" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="9525" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-31" x="9914" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="10637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="11887" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="12417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="12715" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="13219" y="0"></use><g transform="translate(13795,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2212" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="15574" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="16213" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="16743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="17041" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="17545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="18121" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="18651" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="19040" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="19636" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="20464" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="20931" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="21229" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="21591" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="22120" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="22590" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-17"> \ alpha_i = \ alpha_ {i - 1} + (1 - \ alpha_ {i-1}) \ alpha (i \ Delta s) </script></p><br>  These final equations contain the pre-multiplied opacity for proper mixing, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-445"><span class="MJXp-mtext" id="MJXp-Span-446">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-449">t</span><span class="MJXp-mrow" id="MJXp-Span-450"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-451">C</span></span><span class="MJXp-mo" id="MJXp-Span-452" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-453">i</span><span class="MJXp-mtext" id="MJXp-Span-454">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-455">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-456">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-459">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460">s</span><span class="MJXp-mo" id="MJXp-Span-461" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-462" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-463">C</span><span class="MJXp-mo" id="MJXp-Span-464" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465">i</span><span class="MJXp-mtext" id="MJXp-Span-466">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-469">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-470">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-471">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">s</span><span class="MJXp-mo" id="MJXp-Span-473" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-474">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-475">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-476">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-477">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-478">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479">a</span><span class="MJXp-mo" id="MJXp-Span-480" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-481">i</span><span class="MJXp-mtext" id="MJXp-Span-482">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-483">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-484">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-485">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-486">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-487">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-488">s</span><span class="MJXp-mo" id="MJXp-Span-489" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="47.022ex" height="2.66ex" viewBox="0 -832 20245.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="1356" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="1717" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="2478" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="2867" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="3463" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="4291" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="4758" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="5056" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="5418" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="5947" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="6417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="7084" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="8140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="8901" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="9290" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="9886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="10714" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="11181" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="11479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="11841" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="12370" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="12840" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="13479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="14009" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="14307" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="14811" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="15387" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="15917" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-69" x="16306" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="16902" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="17730" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="18197" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="18495" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="18857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="19386" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="19856" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-18"> \ hat {C} (i \ Delta s) = C (i \ Delta s) \ alpha (i \ Delta s) </script> . <br><br>  To render a volume image, simply trace the ray from the eye to each pixel, and then perform the above iteration for each ray that intersects the volume.  Each processed beam (or pixel) is dependent, so if we want to render an image quickly, we need a way to parallelly process a large number of pixels.  This is where the GPU comes in handy.  By implementing the raymarching process in the fragment shader, we will be able to use the power of parallel computing of the GPU to implement a very fast 3D renderer! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ceb/41d/ec2/ceb41dec2f33af9432c2c4727c258ce8.svg"></div><br>  <i>Figure 4: Raymarching on a volume grid.</i> <br><br><h1>  2. GPU implementation on WebGL2 </h1><br>  In order for raymarching to run in a fragment shader, you need to force the GPU to execute a fragment shader for the pixels along which we want to trace the ray.  However, the OpenGL pipeline works with geometric primitives (Figure 5), and does not have direct methods for executing a fragment shader in a specific area of ‚Äã‚Äãthe screen.  To get around this problem, we can render some intermediate geometry to execute the fragment shader on the pixels that we need to render.  Our approach to rendering the volume will be similar to the approach of the <a href="https://www.shadertoy.com/">Shader Toy</a> and the <a href="https://iquilezles.org/www/material/nvscene2008/nvscene2008.htm">demoscene renderers</a> , which render two full-screen triangles to perform a fragmentary shader, and then it performs the actual rendering work. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea9/d55/f3b/ea9d55f3b4e3f3cdfe4dc2e8deb58063.svg"></div><br>  <i>Figure 5: The OpenGL pipeline in WebGL consists of two stages of programmable shaders: a vertex shader, which is responsible for transforming input vertices into the space of truncated coordinates (clip space), and a fragmentary shader, which is responsible for shading triangle-covered pixels.</i> <br><br>  Although rendering two full-screen triangles in the manner of ShaderToy works fine, it will perform unnecessary fragment processing in the case where the volume does not cover the entire screen.  This case is quite common: users move the camera away from the volume in order to look at a lot of data in general or to study the large characteristic parts.  To limit the fragment processing only to the pixels affected by the volume, we can rasterize the bounding parallelogram of the volume grid, and then execute the raymarching stage in the fragment shader.  In addition, we do not need to render the front and reverse faces of the parallelogram, because with a certain order of rendering triangles, the fragmentary shader can then be performed twice.  Moreover, if we render only the front faces, we can run into problems when the user approaches the volume, because the front faces will be projected behind the camera, which means they will be cut off, that is, these pixels will not be rendered.  To allow users to bring the camera closer to the volume, we will only render the reverse faces of the parallelogram.  The resulting rendering pipeline is shown in Figure 6. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ca4/786/08e/ca478608e5e377b0f74659c16cc1cac6.svg"></div><br>  <i>Figure 6: WebGL conveyor for raymarching volume.</i>  <i>We rasterize the reverse faces of the bounding parallelogram of the volume so that the fragment shader is executed for the pixels related to this volume.</i>  <i>Inside the fragment shader, for rendering, we step through the rays through the volume.</i> <br><br>  In this pipeline, the main part of the actual rendering is performed in a fragment shader;  however, we can still use the vertex shader and equipment for fixed interpolation of functions to perform useful calculations.  The vertex shader will convert the volume based on the user's camera position, calculate the direction of the beam and the position of the eye in the volume space, and then transfer them to the fragment shader.  The direction of the ray, calculated at each vertex, is then interpolated by a triangle by the equipment of fixed interpolation of functions in the GPU, allowing us to calculate the direction of the rays for each fragment a little less expensive. However, when passing to the fragment shader, these directions may not be normalized, so we still have to normalize them. <br><br>  We will render the limiting parallelogram as a unit cube [0, 1] and scale it to the size of the volume axes in order to support the volumes of the unequal volume.  The position of the eye is converted into a single cube, and in this space the direction of the beam is calculated.  Raymarching in a single cube space will allow us to simplify texture sampling operations during raymarching in a fragment shader.  because they will already be in the space of texture coordinates [0, 1] of the three-dimensional volume. <br><br>  The vertex shader used by us is shown above; rasterized reverse faces colored in the direction of the ray of sight are shown in Figure 7. <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#version 300 es layout(location=0) in vec3 pos; uniform mat4 proj_view; uniform vec3 eye_pos; uniform vec3 volume_scale; out vec3 vray_dir; flat out vec3 transformed_eye; void main(void) { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// Translate the cube to center it at the origin. vec3 volume_translation = vec3(0.5) - volume_scale * 0.5; gl_Position = proj_view * vec4(pos * volume_scale + volume_translation, 1); // Compute eye position and ray directions in the unit cube space transformed_eye = (eye_pos - volume_translation) / volume_scale; vray_dir = pos - transformed_eye; };</span></span></span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d36/c10/424/d36c10424f13c96207b64fb04b2747b4.png"></div><br>  <i>Figure 7: The reverse faces of the bounding parallelogram of the volume, colored in the direction of the beam.</i> <br><br>  Now that the fragment shader processes the pixels for which we need to render the volume, we can perform raymarching volume and calculate the color for each pixel.  In addition to the direction of the beam and the position of the eye, computed in the vertex shader, to render the volume we need to transfer to the fragment shader and other input data.  Of course, we first need a 3D texture sampler to sample the volume.  However, volume is just a block of scalar values, and if we used them directly as color values ‚Äã‚Äã( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-490"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-491">C</span><span class="MJXp-mo" id="MJXp-Span-492" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-493">s</span><span class="MJXp-mo" id="MJXp-Span-494" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.666ex" height="2.66ex" viewBox="0 -832 2009 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="1150" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="1619" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-19"> C (s) </script>  ) and opacity ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-495"><span class="MJXp-mtext" id="MJXp-Span-496">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-497">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-498">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-499">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-500">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-501">a</span><span class="MJXp-mo" id="MJXp-Span-502" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-503">s</span><span class="MJXp-mo" id="MJXp-Span-504" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.142ex" height="2.66ex" viewBox="0 -832 3936 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="2158" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="2687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="3077" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="3546" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-20"> \ alpha (s) </script>  ), then a rendered image in grayscale would not be very useful for the user.  For example, it would be impossible to highlight interesting areas with different colors, add noise and make background areas transparent to hide them. <br><br>  To give the user control over the color and opacity assigned to each value of the sample, the renderers of scientific visualizations use an additional color map, called the <em>transfer function</em> .  The transfer function sets the color and opacity, which must be assigned to a specific value sampled from the volume.  Although there are more complex transfer functions, usually simple color lookup tables are used as functions that can be represented as a one-dimensional texture of color and opacity (in RGBA format).  To use the transfer function when performing raymarching volume, we can sample the transfer function texture based on a scalar value sampled from the volume texture.  The returned color and opacity values ‚Äã‚Äãare then used as <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-505"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-506">C</span><span class="MJXp-mo" id="MJXp-Span-507" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-508">s</span><span class="MJXp-mo" id="MJXp-Span-509" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.666ex" height="2.66ex" viewBox="0 -832 2009 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="1150" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="1619" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-21"> C (s) </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-510"><span class="MJXp-mtext" id="MJXp-Span-511">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-512">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-513">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-514">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-515">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-516">a</span><span class="MJXp-mo" id="MJXp-Span-517" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-518">s</span><span class="MJXp-mo" id="MJXp-Span-519" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.142ex" height="2.66ex" viewBox="0 -832 3936 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="2158" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="2687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="3077" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="3546" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-22"> \ alpha (s) </script>  sample <br><br>  The latest input data for the fragment shader is the size of the volume, which we use to calculate the value of the beam pitch ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-520"><span class="MJXp-mtext" id="MJXp-Span-521">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-522">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-523">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-524">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-525">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-526">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-527">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.442ex" height="2.057ex" viewBox="0 -780.1 3204 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="2734" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-23"> \ Delta s </script>  ) to sample at least once each voxel along the beam.  Since the <a href="http://www.pbr-book.org/3ed-2018/Geometry_and_Transformations/Rays.html">traditional beam equation</a> has the form <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-528"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529">r</span><span class="MJXp-mo" id="MJXp-Span-530" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-531">t</span><span class="MJXp-mo" id="MJXp-Span-532" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-533" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-534">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-535">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-536">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-537">c</span><span class="MJXp-mrow" id="MJXp-Span-538"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-539">o</span></span><span class="MJXp-mo" id="MJXp-Span-540" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-541">t</span><span class="MJXp-mtext" id="MJXp-Span-542">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-543">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-544">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-545">c</span><span class="MJXp-mrow" id="MJXp-Span-546"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-547">d</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.417ex" height="2.66ex" viewBox="0 -832 8790.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-28" x="451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="841" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-29" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-3D" x="1869" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-76" x="3176" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="3661" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-63" x="4128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6F" x="4561" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMAIN-2B" x="5269" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="6270" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-76" x="6881" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="7367" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-63" x="7833" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-64" x="8267" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-24"> r (t) = \ vec {o} + t \ vec {d} </script>  , to match, we will change the terminology in the code, and we denote <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-548"><span class="MJXp-mtext" id="MJXp-Span-549">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-550">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-551">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-552">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-553">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-554">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-555">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.442ex" height="2.057ex" viewBox="0 -780.1 3204 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-73" x="2734" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-25"> \ Delta s </script>  as <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-556"><span class="MJXp-mtext" id="MJXp-Span-557">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-559">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-560">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-561">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-562">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-563">t</span><span class="MJXp-mrow" id="MJXp-Span-564"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-565">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-566">t</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.408ex" height="2.057ex" viewBox="0 -780.1 3620 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-65" x="611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-78" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="1650" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="2012" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="2373" y="0"></use><g transform="translate(2735,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/437526/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh5Lnhii8YkOz3BLZ9fqtAqFPBHwA#MJMATHI-74" x="523" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-26"> \ texttt {dt} </script>  .  Similarly, the interval <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-567"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-568">s</span><span class="MJXp-mo" id="MJXp-Span-569" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-570" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-571">0</span><span class="MJXp-mo" id="MJXp-Span-572" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-573">L</span><span class="MJXp-mo" id="MJXp-Span-574" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> s = [0, L] </script>  along the beam, covered by volume, we denote as <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-575"><span class="MJXp-mo" id="MJXp-Span-576" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mtext" id="MJXp-Span-577">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-578">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-579">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-580">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-581">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-582">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-583">t</span><span class="MJXp-mrow" id="MJXp-Span-584"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-585">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-586">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-587">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-588">n</span></span><span class="MJXp-mo" id="MJXp-Span-589" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-590">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-591">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-592">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-593">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-594">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-595">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-596">t</span><span class="MJXp-mrow" id="MJXp-Span-597"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-598">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-599">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-601">x</span></span><span class="MJXp-mo" id="MJXp-Span-602" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> [\ texttt {tmin}, \ texttt {tmax}] </script>  . <br><br>  To perform raymarching volume in a fragment shader, we will do the following: <br><br><ol><li>  Normalize the direction of the ray of visibility, obtained as input from the vertex shader; </li><li>  Intersect the line of sight with the volume boundaries to determine the interval <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-603"><span class="MJXp-mo" id="MJXp-Span-604" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mtext" id="MJXp-Span-605">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-606">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-607">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-608">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-609">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-610">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-611">t</span><span class="MJXp-mrow" id="MJXp-Span-612"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-613">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-614">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-615">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-616">n</span></span><span class="MJXp-mo" id="MJXp-Span-617" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-618">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-619">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-620">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-621">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-622">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-623">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-624">t</span><span class="MJXp-mrow" id="MJXp-Span-625"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-626">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-627">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-628">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-629">x</span></span><span class="MJXp-mo" id="MJXp-Span-630" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> [\ texttt {tmin}, \ texttt {tmax}] </script>  to perform raymarching for the purpose of volume rendering; </li><li>  Calculate this step length <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-631"><span class="MJXp-mtext" id="MJXp-Span-632">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-633">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-634">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-635">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-636">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-637">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-638">t</span><span class="MJXp-mrow" id="MJXp-Span-639"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-640">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-641">t</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> \ texttt {dt} </script>  so that each voxel is sampled at least once; </li><li>  Starting from the entry point to <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-642"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-643">r</span><span class="MJXp-mo" id="MJXp-Span-644" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-645">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-646">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-647">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-648">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-649">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-650">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-651">t</span><span class="MJXp-mrow" id="MJXp-Span-652"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-653">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-654">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-655">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-656">n</span></span><span class="MJXp-mo" id="MJXp-Span-657" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> r (\ texttt {tmin}) </script>  let's go through the volume through the ray until we reach the end point in <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-658"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-659">r</span><span class="MJXp-mo" id="MJXp-Span-660" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-661">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-662">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-663">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-664">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-665">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-666">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-667">t</span><span class="MJXp-mrow" id="MJXp-Span-668"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-669">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-670">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-671">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-672">x</span></span><span class="MJXp-mo" id="MJXp-Span-673" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> r (\ texttt {tmax}) </script><br><ol><li>  At each point we sample the volume and use the transfer function to assign color and opacity; </li><li>  We will accumulate color and opacity along the beam using the compositing equation from front to back. </li></ol></li></ol><br>  As an additional optimization, you can add a condition to prematurely exit the raymarching cycle to complete it when the accumulated color becomes almost opaque.  When the color becomes almost opaque, any samples after it will have almost no effect on the pixel, because their color will be completely absorbed by the medium and will not reach the eye. <br><br>  The full fragment shader for our volumetric renderer is shown below.  Added comments that mark every step of the process. <br><br><div style="text-align:center;"><img width="80%" src="https://habrastorage.org/getpro/habr/post_images/346/168/6df/3461686df049a89ed19e81661bb52ada.png"></div><br>  <i>Figure 8: Ready rendered bonsai visualization result from the same viewpoint as in Figure 7.</i> <br><br>  That's all! <br><br>  The renderer described in this article will be able to create images similar to the one shown in Figure 8 and Figure 1. You can also test it <a href="https://www.willusher.io/webgl-volume-raycaster/">online</a> .  For the sake of brevity, I omitted the Javascript code needed to prepare the WebGL context, load the textures of the volume and the transfer functions, configure the shaders and render the cube for rendering the volume;  The full code for the renderer is available on <a href="https://github.com/Twinklebear/webgl-volume-raycaster">Github</a> for reference. </div><p>Source: <a href="https://habr.com/ru/post/437526/">https://habr.com/ru/post/437526/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>