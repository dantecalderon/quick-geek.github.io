<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Debian still refuses to use HTTPS</title>
  <meta name="description" content="APT (advanced packaging tool) is a program for installing, updating, and uninstalling software packages on Debian operating systems and those based on...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Debian still refuses to use HTTPS</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/ve/vm/v8/vevmv8izvjl0k73llwkgbjn1wtu.jpeg" align="left" width="360">  <a href="https://packages.qa.debian.org/a/apt.html">APT</a> (advanced packaging tool) is a program for installing, updating, and uninstalling software packages on Debian operating systems and those based on them (Ubuntu, Linux Mint, etc.).  Sometimes also used in Mandrake-based distributions.  Packages are downloaded over the Internet from repositories over an <i>unprotected connection</i> , without using the TLS protocol and encryption.  The question arises: why?  Doesn't HTTPS provide better security?  Debian believes that HTTPS is an unnecessary entity, since the <a href="https://wiki.debian.org/SecureApt">SecureAPT</a> system checks the checksum for the downloaded files and the cryptographic gpg-signature of the entire package. <br><br>  One of the Debian developers launched the website <a href="https.com/">whydoesaptnotusehttps.com</a> (‚ÄúWhy APT does not use HTTPS‚Äù), where it explains the official position. <br><a name="habracut"></a><br><h1>  How SecureAPT Works </h1><br>  First, apt compares the hashes of files from the package.  They are published on the Debian website in the Release ... <br><br><pre><code class="plaintext hljs">MD5Sum: 6b05b392f792ba5a436d590c129de21f 3453 Packages 1356479a23edda7a69f24eb8d6f4a14b 1131 Packages.gz 2a5167881adc9ad1a8864f281b1eb959 1715 Sources 88de3533bf6e054d1799f8e49b6aed8b 658 Sources.gz</code> </pre> <br>  ... and transmitted along with the package. <br><br><pre> <code class="plaintext hljs">Package: uqm Priority: optional ... Filename: unstable/uqm_0.4.0-1_i386.deb Size: 580558 MD5sum: 864ec6157c1eea88acfef44d0f34d219</code> </pre> <br>  To protect the Release file from forgery, the SecureAPT system adds the gpg digital signature, which is in the Release.gpg file: <br><br><pre> <code class="plaintext hljs">-----BEGIN PGP SIGNATURE----- Version: GnuPG v1.4.1 (GNU/Linux) iD8DBQBCqKO1nukh8wJbxY8RAsfHAJ9hu8oGNRAl2MSmP5+z2RZb6FJ8kACfWvEx UBGPVc7jbHHsg78EhMBlV/U= =x6og -----END PGP SIGNATURE-----</code> </pre> <br>  The apt program downloads the Release.gpg file and verifies the signature using trusted public keys, which are stored in the /etc/apt/trusted.gpg file.  By default, the public key of the Debian archive is recorded there. <br><br><pre> <code class="plaintext hljs">joey@dragon:~&gt;sudo apt-key list /etc/apt/trusted.gpg -------------------- pub 4096R/55BE302B 2009-01-27 [verf√§llt: 2012-12-31] uid Debian Archive Automatic Signing Key (5.0/lenny) &lt;ftpmaster@debian.org&gt;</code> </pre> <br>  This is the last line of defense, so Debian periodically changes the keys.  New keys are distributed with the debian-archive-keyring package and are also published on the <a href="https://ftp-master.debian.org/keys.html">web page</a> . <br><br>  After the publication of the new public key, another procedure occurs.  The secret key that was used to generate the public key is divided into five parts using the <a href="https://packages.debian.org/stable/libgfshare-bin">gfshare</a> program and distributed among five reputable developers according to Shamir's secret sharing scheme.  To restore the secret, at least three of the five developers must provide their own part of the secret.  The mathematical proof of Shamir's scheme was <a href="https://habr.com/ru/post/431392/">published on Habr√©</a> : it is based on the fact that an unlimited number of polynomials of degree 2 can be drawn through two points on the plane. To choose the only one of them, we need a third point.  Simply put, the scheme is based on polynomial interpolation. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/n9/qz/dz/n9qzdzrlhdwqk19us5yxmmwva5m.png"></div><br>  So, in the SecureAPT system, the secret key is divided into five parts and securely protected, the cryptographic signature of the Release file is checked with a publicly available public key, and the checksums of the files from the package are stored in this file.  Why use HTTS if everything is so secure? <br><br><h1>  Why use HTTP? </h1><br>  The main objective of HTTPS is to hide traffic from prying eyes (provider, government services and other intruders) so that a third party cannot: <br><br><ol><li>  Intervene in traffic (modify it). </li><li>  Listen to traffic (information gathering, intelligence). </li></ol><br>  The SecureAPT system partially protects against the first threat, but not against the second one.  Since the packets are transmitted through open channels, an outsider sees which particular packets are being downloaded and from where.  An attacker can also replace the packages and the digital signature, but then it will not pass the check. <br><br>  Debian developer writes: <br><blockquote>  HTTPS does not provide meaningful privacy for receiving packets, since an attacker usually sees which hosts you are contacting.  If you connect to the distribution mirror, it will be completely obvious that you are downloading updates. </blockquote>  This paragraph is probably written at a time when browsers and Internet services did not begin to support DNS over TLS and <a href="https://datatracker.ietf.org/wg/doh/about/">DNS over HTTPS</a> (DoH) technology for encrypting DNS traffic.  For example, in April 2018, it was <a href="https://habr.com/ru/post/352654/">implemented by</a> one of the largest CDN providers Cloudfalre, and in October 2018, Google Public DNS also <a href="https://habr.com/ru/post/427639/">included support for DNS over TLS</a> . <br><br>  Thus, after appropriate configuration of the system, you can effectively hide DNS requests from an unauthorized person who listens to traffic.  Also, there is an active work on the introduction of other technologies that hide the addressee of the packages.  That is, in the future, HTTPS will still be able to ensure proper confidentiality. <br><br>  Debian gives another argument: even on an encrypted connection, ‚Äúit‚Äôs easy to find out which files the user is downloading by traffic size‚Äù.  This ‚Äúvulnerability‚Äù can be used <a href="https://retout.co.uk/blog/2014/07/21/apt-transport-tor">even when analyzing traffic through Tor</a> . <br><br>  Finally, Debian sees no reason to completely trust certification authorities: there are more than 400 CAs that offer certificates for any domain.  Many have a bad reputation, and some are directly controlled by the state.  It's hard to determine <a href="https://security.stackexchange.com/questions/53117/what-trusted-root-certification-authorities-should-i-trust">which CA you can trust</a> . <br><br>  Thus, according to Debian, the most important thing is to ensure the authenticity of the files in the package, and not to protect the connection itself. <br><br>  Why not implement HTTPS over the existing SecureAPT mechanism?  The developer considers this a complex engineering task that requires the secure exchange and storage of secret keys.  In addition, the introduction of HTTPS implies ‚Äúmisleading users regarding the level of security and privacy‚Äù for the reasons described above. <br><br>  In 2019, the deliberate rejection of HTTPS looks quite extravagant, so the position of Debian provoked a <a href="https://news.ycombinator.com/item%3Fid%3D18958679">lively discussion</a> on <i>Hacker News</i> , where commentators put forward several counter-arguments. <br><br>  What do you think, is it necessary to encrypt apt traffic?  (Poll below). <br><br><hr><br> <a href="https://clck.ru/EWJHw"><img src="https://habrastorage.org/webt/ee/nb/3h/eenb3h7tlf1y8rk6f7cjtpp-x9u.jpeg"></a> </div><p>Source: <a href="https://habr.com/ru/post/437208/">https://habr.com/ru/post/437208/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>