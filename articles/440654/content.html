<div class="post__text post__text-html js-mediator-article">  If you are engaged in processing and analyzing data using Python, then sooner or later you will have to go beyond the Jupyter Notebook, converting your code into scripts that can be run using command line tools.  This is where the argparse module comes in handy.  For newbies who are used to Jupyter Notebook, such a move means having to leave the comfort zone and move to a new environment.  The material, the translation of which we publish today, was written in order to facilitate such a transition. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/17b/7ac/55a/17b7ac55a4b8da7b7fdd54d354da19d9.jpg"></div><br>  <i><font color="#999999">Argparse module</font></i> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Argparse module</font> </h2><br>  The argparse module can be compared to the forces of nature, which erected mountain peaks towering above the clouds.  Thanks to this module in scripts it becomes possible to work with what would be hidden from the code of these scripts without using it. <br><br>  It should be noted that <a href="https://docs.python.org/3/howto/argparse.html">argparse</a> is a recommended module of the standard Python library for use with command line arguments.  I did not manage to find a good argparse guide for beginners, so I decided to write such a guide myself. <br><br><h2>  <font color="#3AC1EF">Life outside Jupyter Notebook</font> </h2><br>  When I first encountered argparse in a Python script that I needed for a project I was doing in my spare time, I thought, “What is this mysterious construction?”.  After that, I quickly transferred the code to Jupyter Notebook, but such a move turned out to be irrational. <br><br>  I needed to be able to just run the script, and not work with it using Jupyter Notebook tools.  A standalone script that used the argparse module would be much easier to use, working on it would be easier than relying on the capabilities of Jupyter Notebook.  However, then I was in a hurry, and when I looked at the documentation on argparse, I could not immediately grasp its essence, so I did not use the original version of the script. <br><br>  Since then, I figured out with argparse and I really liked this module.  Now I consider it really vital.  At the same time to master it is not so difficult. <br><br><h2>  <font color="#3AC1EF">Why do we need the argparse module?</font> </h2><br>  The argparse module allows you to parse the arguments passed to the script when it is started from the command line, and allows you to use these arguments in the script.  That is, it’s about the fact that this module allows you to provide the script with some data at the time of its launch, and the script can use this data during the execution of its code.  The argparse module is a means by which you can establish communication between the author of the program and the person who uses it, for example, between you when you write a script today and you, when you launch it tomorrow, passing something to it. <br><br>  Using argparse means that, if necessary, change the behavior of the script or if it is necessary to transfer some data to it, if this is provided by the script's author, the user does not need to edit the program code.  As a result, scripts gain a certain level of flexibility. <br><br><h2>  <font color="#3AC1EF">Example</font> </h2><br>  Suppose you want to write a script to convert video files into regular images using the <a href="https://opencv.org/">OpenCV library</a> .  In order for the script to solve this problem, it needs to know the place where the video files are stored, and the place where you need to place the finished images.  That is, it needs information about two folders, the paths to which, which is not very convenient, can be hard-coded in the script code, or, which is much better, you can let the user specify the script by entering them as command-line arguments when the script is run.  In order to equip the script with such an opportunity, we will need the argparse module.  Here’s what the script section might look like (let's call this script <code>videos.py</code> ), where the command-line arguments are parsed: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># videos.py import argparse parser = argparse.ArgumentParser(description='Videos to images') parser.add_argument('indir', type=str, help='Input dir for videos') parser.add_argument('outdir', type=str, help='Output dir for image') args = parser.parse_args() print(args.indir)</span></span></code> </pre> <br>  Here, at the beginning of the file, the argparse module is imported.  Then, using the <code>argparse.ArgumentParser()</code> construct, a <code>parser</code> object is created with its description.  Next, using the <code>parser.add_argument()</code> method, the <code>parser.add_argument()</code> variable is <code>indir</code> , in which it is planned to record the path to the folder with video files.  This indicates that it has a string type, and also sets reference information about it.  After this, in the same way, the <code>outdir</code> variable is <code>outdir</code> , into which the path to the folder will be placed, in which the script will have to place the images created on the basis of video files.  At the next step, the result of parsing command line arguments is placed in the <code>args</code> variable.  What is passed to the script at startup will now be available as the <code>indir</code> and <code>outdir</code> properties of the <code>args</code> object.  Now you can work with these values.  In this case, we simply output to the console what is passed to the script in the argument <code>indir</code> . <br><br>  Here's how to run this script from the command line: <br><br><pre> <code class="python hljs">python videos.py /videos /images</code> </pre> <br>  Note that the lines <code>/videos</code> and <code>/images</code> do not need to be enclosed in quotes.  The script launched in this way will output the line <code>/videos</code> to the terminal, which will confirm the possibility of using the arguments passed to it in your code.  This is the magic of argparse in action. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a8/e05/614/9a8e056143381f2aba21f091e8ac522d.jpg"></div><br>  <i><font color="#999999">Command line argument parsing magic</font></i> <br><br><h2>  <font color="#3AC1EF">Details about argparse</font> </h2><br>  We have just reviewed a simple example of working with argparse.  Now let's discuss some of the details regarding argparse. <br><br><h3>  <font color="#3AC1EF">▍ Positional arguments</font> </h3><br>  The type construction <code>parser.add_argument('indir', type=str, help='Input dir for videos')</code> from the <code>videos.py</code> script <code>videos.py</code> used to create a positional argument (positional argument).  When calling a script, the order of specifying such arguments is important.  So, the first argument passed to the script becomes the first positional argument, the second argument the second positional argument. <br><br>  What happens if the script is run without any arguments at all by running the <code>python videos.py</code> command in the terminal? <br><br>  In this case, the following error message will be displayed: <br><br><pre> <code class="python hljs">videos.py: error: the following arguments are required: indir, outdir</code> </pre> <br>  As a result, it turns out that in order to run a script that provides for the use of positional arguments, such arguments must always be specified when it is run. <br><br><h3>  <font color="#3AC1EF">▍ Optional arguments</font> </h3><br>  What happens when our script starts with the <code>python videos.py --help</code> command <code>python videos.py --help</code> ? <br><br>  In response, information about him will be displayed.  This is exactly the information about the positional arguments that we specified when describing the corresponding variables: <br><br><pre> <code class="python hljs">usage: videos.py [-h] indir outdir Videos to images positional arguments: indir       Input dir <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> videos outdir      Output dir <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> image optional arguments: -h, --help  show this help message <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> exit</code> </pre> <br>  The script told us a lot of interesting things about what it expects from the user, and <code>help</code> is an example of an optional argument.  Please note that <code>--help</code> (or <code>-h</code> ) is the only standard optional argument that we can use when working with argparse, but if you need other optional arguments, you can create them yourself. <br><br>  Optional arguments are created in the same way as positional ones.  The main difference between the teams of their creation is that when specifying the names of such arguments, these names begin with a sequence of characters <code>--</code> , or, for short forms of arguments, with the symbol <code>-</code> .  For example, an optional argument can be created like this: <br><br><pre> <code class="python hljs">parser.add_argument(<span class="hljs-string"><span class="hljs-string">'-m'</span></span>, <span class="hljs-string"><span class="hljs-string">'--my_optional'</span></span>)</code> </pre> <br>  Here is an example of how to create and use optional arguments.  Pay attention to the fact that we, describing an optional argument here, indicated its type as <code>int</code> .  That is, it is an integer.  In this situation, you can use other types of Python. <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># my_example.py import argparse parser = argparse.ArgumentParser(description='My example explanation') parser.add_argument(   '--my_optional',   type=int,   default=2,   help='provide an integer (default: 2)' ) my_namespace = parser.parse_args() print(my_namespace.my_optional)</span></span></code> </pre> <br>  The argument, described as - <code>--my_optional</code> , is available in the program as a property of the <code>my_namespace</code> object with the name <code>my_optional</code> . <br><br>  Optional arguments can be assigned values ​​that they will have by default.  In our case, if the script <code>my_example</code> not given any value, the number 2 will be written to it, which will be output to the console.  In order to set the value of this argument during the script launch, you can use the following construction: <br><br><pre> <code class="python hljs">python my_example.py  --my_optional=<span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">What else can you use argparse for?</font> </h2><br>  The argparse module can be used when developing Python applications that are planned to be packaged in Docker containers.  So, for example, if, when launching an application packed in a container, it needs to pass command line arguments, then this can be described at the container assembly stage in the Dockerfile using the <code>RUN</code> instruction.  To run scripts during container execution, you can use the <code>CMD</code> or <code>ENTRYPOINT</code> .  Details about the Dockerfile files can be found <a href="https://habr.com/ru/company/ruvds/blog/439980/">here</a> . <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  We looked at the basic ways of working with the argparse module, using which you can equip your scripts with the ability to accept and process command line arguments.  It should be noted that the possibilities of argparse do not end there.  For example, the use of the parameter <a href="https://docs.python.org/3/library/argparse.html">nargs</a> when describing arguments allows <a href="https://docs.python.org/3/library/argparse.html">you</a> to work with argument lists, while the <a href="https://docs.python.org/3/library/argparse.html">choices</a> parameter allows <a href="https://docs.python.org/3/library/argparse.html">you</a> to specify sets of values ​​that can take arguments.  In fact, now, having mastered the basic capabilities of argparse, you can easily study this module more deeply using the <a href="https://docs.python.org/3/library/argparse.html">documentation</a> for it. <br><br>  If you are used to working with Jupyter Notebook and want to move away from this practice, then <a href="https://medium.com/chingu/an-introduction-to-environment-variables-and-how-to-use-them-f602f66d15fa">here</a> and <a href="https://www.datacamp.com/community/blog/environment-variable-data-science">here</a> - materials on working with variable environments.  <a href="https://towardsdatascience.com/docker-without-the-hassle-b98447caedd8">Here is the</a> material on the tool, <a href="https://repo2docker.readthedocs.io/en/latest/">repo2docker</a> , which allows you to convert Jupyter Notebook repositories into Docker images. <br><br>  <b>Dear readers!</b>  How do you work with command line arguments in Python scripts? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div>