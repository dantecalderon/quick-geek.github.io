<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Breeding</title>
  <meta name="description" content="Since the beginning of the 2000s, news about the introduction of chat bots into work has been appearing with enviable periodicity. In this article I w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Breeding</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/4r/bm/ao/4rbmaocgu1zssnwtw9jr7trcoiu.png"><br><br>  Since the beginning of the 2000s, news about the introduction of chat bots into work has been appearing with enviable periodicity.  In this article I will tell you where to start and give an overview of existing solutions, as well as share the experience of creating a bot for the company Selectel. <br><br><h2>  Scope of application </h2><br>  Business development is often accompanied not only by scaling up the core business, but also by debugging supporting processes.  Chat bots are only a part of the business activity within the framework of routine automation.  Communication and the implementation of simple tasks of the same type underlie the work of the chat bot.  With it, you can perform not only repetitive tasks, but also those that a person is not able to perform, for example, monitoring activity on social networks. <br><a name="habracut"></a><br>  I want to give a variety of applications for bots using the example of my own work at Selectel.  Mini-spoiler: I began my work as a technical writer, now I am an engineer in the cloud solutions department.  The way of introducing virtual assistants began with a bot for the marketing department, which keeps track of comments and references to the company in social networks.  Such development is very simple, but it effectively complements existing solutions on the market, for example, the <a href="https://ifttt.com/">IFTTT service</a> . <br><br>  The following developments in my practice were an internal chat bot for the HR department and a bot for communicating with clients, presented as a demo stand during the SelectelTechDay conferences in <a href="https://blog.selectel.ru/selecteltechday-infrastruktura-nachinaetsya-zdes/">St. Petersburg</a> and <a href="https://blog.selectel.ru/selecteltechday-live-translyaciya/">Moscow</a> .  Both bots are created using different services and technologies.  And before diving into technical details, consider the high-level scheme of the bots device. <br><br><h2>  Basic principles of botany </h2><br><img src="https://habrastorage.org/webt/bj/pa/lh/bjpalhf582st-rvscox-0rdb3ww.png" title="The principles of the chat bot"><br><br>  Chatbots activity is built around 3 main actions: <br><br><ol><li>  Receipt or output of information occurs through certain communication channels, for example, in Slack or Vk.com dialogs </li><li>  Intent recognition is a comprehensive analysis of the information received to form a response. </li><li>  Processing an action is any work done on the server side that is necessary to prepare the correct answer.  For example, if a weather forecast was requested, a request will be made to a certain API about the weather in the city N, and the results of this command will be sent to the user </li></ol><br>  The main actions of chatbots are combined as part of the task of preserving context to create a human-like form of communication and to support dialogue.  The chat bot must ‚Äúremember‚Äù the subject of the conversation and adapt its answers accordingly. <br><br>  The issue of connecting a chat bot to social platforms is highlighted.  Connectors to instant messengers and social networks can be implemented independently or maintained within the framework of existing products for creating chat bots. <br><br>  At the moment there are many solutions that offer a ready-made service to automate technical support or sales processes.  I will pay more attention to the tools that allow you to create a service that meets the company's internal security requirements, without complicating the development process. <br><br><h2>  Botany </h2><br>  The above 3 principles of chat bots (channel, analysis, action) can be implemented in different ways.  The easiest option is to make comparisons of the incoming text and send the corresponding answers to the user. <br><br><img src="https://habrastorage.org/webt/qk/uq/hp/qkuqhp34ajh9mngceyotokw5zsc.jpeg" title="The simplest form of chatbot is to make comparisons with the base of answers."><br><br>  Our goal is a little higher - to get a system to which you can quickly add new scripts and that will understand the user in most cases. <br><br>  To do this, we need to understand what the user is talking about, control the course of the dialogue and, in some cases, perform certain actions (for example, book meeting rooms).  This can be achieved using the following tools: <br><br><ul><li>  DialogFlow (Google) </li><li>  Wit.ai (Facebook) </li><li>  Azure Bot Service (Microsoft) </li><li>  Rasa Core (Open Source) </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sl/ny/ae/slnyae0-oecyvkprys5ofemjssg.png" title="Comparison of the most popular products"></div><br>  When choosing a product, the following factors are taken into account: <br><br><ol><li>  <i>How critical is the location of the executable bot code within existing systems</i> <br>  For example, in the case of Wit.ai and Dialogflow, we do not control the entire process completely - we give the text to these applications and get a ready answer.  Using the Rasa Core or Azure BotBuilder SDK, we can store all correspondence within the boundaries of internal systems. </li><li>  <i>How many communication channels need to be connected</i> <br>  Dialogflow provides the ability to use a limited number of connectors that connect instant messengers and social networks by specifying access keys.  For Wit.ai and Rasa Core, you can use any number of channels, but the logic of connecting to them needs to be implemented independently (this is often a very trivial task).  Azure Bot Service has the ability to use connectors to specific channels, but is not limited to them, and it can also be connected to other sources independently </li><li>  <i>How easy is it to make changes to the bot's knowledge base</i> <br>  When creating a bot in the form of a program code without using a visual interface to interact with it, we limit the circle of people who can make changes to the dialogues and answers of the bot.  The functionality of adding and editing phrases should be available for everyone. </li></ol><br>  The Google Dialogflow platform was chosen for our internal virtual assistant of the Tireks chat bot, which provides visual editing of intentions, and actions are performed inside a <a href="https://kb.selectel.ru/22059053.html">private cloud in Selectel</a> .  The defining factors were the speed at which you started working with the bot, the security of sending messages and the presence of the Slack channel in the list of supported ones. <br><br><img src="https://habrastorage.org/webt/6o/or/re/6oorre8yi3d19b3pvyc_omf6ve4.jpeg" title="Tyrex is planning a transition to virtual reality"><br><br>  The idea of ‚Äã‚Äãcreating a chat bot has long been in the air of the company, especially considering what problems could be solved with it: <br><br><ul><li>  Growth in the number of company employees, and with it an increasing flow of similar questions like ‚ÄúHow to use the corporate library?‚Äù And ‚ÄúWhere to eat lunch?‚Äù </li><li>  Regular booking negotiation and registration of passes </li><li>  Search for information and documents in the corporate knowledge base </li></ul><br><img src="https://habrastorage.org/webt/ff/jq/rl/ffjqrlqkxk_d3hrmanp1x9x_k-i.png" title="Avatar Tireksa in the network, created by our illustrator Paul"><br><br>  Creating and connecting a bot in Dialogflow takes a few minutes.  In the beginning we will look at the principles of the chat bot in the system, and then add the execution of complex actions. <br><br><h2>  Creating a bot in Dialogflow </h2><br><h3>  Creation of architecture </h3><br>  Further in the text we will operate with such concepts as: <br><br><ul><li>  <b>Intention</b> is a formalized task that a user wants to perform. </li><li>  <b>Parameters</b> - a set of data required to perform the task </li><li>  <b>Answer</b> - a function or program that is executed in response to a recognized intention. </li><li>  <b>Training phrase</b> is an example of a message from the user where the chat bot is trained </li></ul><br>  Dialogflow processes natural language and extracts all the necessary data for executing complex commands.  For this purpose, <b>agents</b> are created that contain several <b>intentions</b> .  Each of the <b>intentions</b> allows you to prepare a chat bot to understand the nuances and subtleties in the formulation of requests. <br><br>  <b>Intention</b> includes <b>training phrases</b> , <b>options</b> and <b>answers</b> .  Inside the training phrase, we select the parameters (for example, time or place) that are necessary to form a correct answer. <br><br>  <b>The answer is</b> indicated either in the <b>intention</b> , or Dialogflow sends a request to our server, which performs the necessary work and returns the <b>answer</b> back using the example of our chat bot: <br><br><ul><li>  To simple questions (for example, ‚ÄúDo we have an insurance program abroad?‚Äù The <b>answer</b> lies in the <b>intention</b> </li><li>  For more complex tasks like ‚ÄúIs there free negotiation now?‚Äù The <b>answer</b> is formed with the help of an additional request to the server, which determines free time for all participants and rooms </li></ul><br><img src="https://habrastorage.org/webt/zd/pj/gl/zdpjgldguiq15ebnhn3llbxnt4i.png" title="Chat bot answer selection scheme"><br><br><h3>  Work with intentions </h3><br>  Consider working with Dialoglow on the example of booking negotiation.  We create a booking management agent and define the following intentions: <br><br><ul><li>  View existing reservations </li><li>  Book a meeting </li></ul><br>  Each of the intentions is caused by training phrases.  The more added, the more likely the desired action will be performed.  In our example, the intention to ‚ÄúBook a meeting room‚Äù will be called with the following phrases: <br><br><ul><li>  Book for <b>today</b> at <b>11.15pm</b> for <b>30 minutes</b> </li><li>  Hey.  Please book on <b>08/11/2018</b> negotiation from <b>15:00</b> to <b>16:00</b> </li><li>  Book now </li><li>  I need a negotiation </li></ul><br><img src="https://habrastorage.org/webt/kq/7q/g0/kq7qg04pq_awv3kwvong8wmmwdg.png"><br><br>  The principle of data collection in the intentions is as follows: <br><br><ol><li>  Based on the received input, Dialogflow understands what intention it is.  In our example - booking negotiation </li><li>  If the required parameters were not specified in the first message (for example, meeting time), the chat bot will ask clarifying questions </li><li>  After receiving all the data Dialogflow will send a request to our server in VPC for booking the desired room </li></ol><br>  Let's look at this process in action: <br><br><img src="https://habrastorage.org/webt/a2/da/ba/a2dabaptazt_bzdbibfhirvdsxw.gif" title="Communicating with Tyrex"><br><br>  Processing an action is done by sending a request with all the data to the previously added address of the action server (Webhook URL): <br><br><img src="https://habrastorage.org/webt/ex/xa/tv/exxatvzn3ysqxnzuxoqmwftmgoi.png" title="Adding an action server"><br><br>  At <i><a href="https://website.ru/webhook">website.ru/webhook</a></i> is a server that performs processing of complex commands (in our example, returns the string "Hello from the server!").  <a href="https://gist.github.com/Gaikanomer9/392cbdd14f213a052d765a248a844854">Github Gist</a> for a quick start: <br><br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- from flask import Flask, request, make_response, jsonify app = Flask(__name__) @app.route('/webhook', methods=['POST']) def webhook(): req = request.get_json(force=True) intent = req.get('queryResult').get('intent').get('displayName') print(intent) if intent == 'Sample intent': res = make_response(jsonify( { "fulfillmentText": "–ü—Ä–∏–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞!", } )) return res return make_response(jsonify( { "fulfillmentText": "–°–æ–≤–ø–∞–¥–µ–Ω–∏–π –Ω–∞–º–µ—Ä–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!", } )) if __name__ == '__main__': app.run(host='0.0.0.0', debug=True, port=5000)</span></span></code> </pre> <br><h2>  Creating a bot with RASA </h2><br>  To use chat bots without third-party text recognition services, you can use tools like <a href="https://rasa.com/">Rasa</a> , which allow you to fully control the entire bot work process.  Rasa is a set of open source software components that contain speech recognition and dialog management.  You can already look at <a href="https://github.com/Gaikanomer9/rasa-docker-bot">Boilerplate</a> , which I prepared to get acquainted with the platform, and we will publish more detailed instructions if there are requests from the Habr community. <br><br><h2>  Chat bots and business </h2><br>  Whether to use automation services for customer service is a difficult question.  Modern tools provide a variety of solutions when choosing between flexibility, start-up speed and safety.  The systems of recognition of intentions in natural language are now available not only in proprietary form, but also freely distributed, which opens up great opportunities for own experiments.  We considered one of the options that allows you to quickly implement chat bots to automate the tasks of the same type in your business without capital expenditures and with minimal labor costs.  If you already use chat bots in your work, share feedback in the comments about your impressions and, of course, the impressions of your customers. </div><p>Source: <a href="https://habr.com/ru/post/436622/">https://habr.com/ru/post/436622/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>