<div class="post__text post__text-html js-mediator-article">  Each admin, perhaps, was the case when something suddenly breaks, and you're somewhere on the road: you go by car, sit on the train or, trivially, sit somewhere on a park bench and get lost and rush somewhere there is no desire.  And it is necessary to repair.  Or, at a minimum, estimate the scale of the white fur animal that arrived. <br><br>  It is clear that you can do with a smartphone or tablet, especially if you only need to go by ssh.  But to use the touchscreen in such cases, as for me, is pain and suffering. <br><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hd/-j/nd/hd-jndx6jjchvd9ggnpyj-ynvhw.jpeg"></div><br>  You can purchase an external keyboard, holder, or tablet stand, but I find it easier then to carry around a full-fledged laptop.  Places will take about the same. <br><a name="habracut"></a><br><h2>  A little bit of memories and reasoning </h2><br>  If you are too lazy to read, you can go straight to the <a href="https://habr.com/ru/post/409945/">practical part.</a> <br><br>  At one time, when Androids and iPhones did not exist yet, for such things I used the Nokia N810 “internet tablet”.  The device dimensions with a modern smartphone, while having a qwerty-keyboard, so even with full-fledged Linux on board.  Ssh, vnc, rdesktop - no question!  Plus, I actively used CAS Maxima when it was necessary to quickly calculate something and show the result. <br><br><br> <a href=""><img src="https://habrastorage.org/webt/bd/e7/kx/bde7kxemqv5fuchk9o5aujaokte.jpeg"></a> <br> <a href=""><img src="https://habrastorage.org/webt/so/ya/xr/soyaxrvavdiymhza5xjuv0mhy7q.png"></a> <br><br>  But as time went on, android smartphones began to appear.  Here it is, I thought: practically full-fledged Linux, while there is no need to carry another device with you to distribute the Internet.  I began to look after the device with qwerty, which would replace me with the good old n810, which was already pretty tired by that time (screen train, two times replaced battery, keyboard, broken case).  The choice fell on Motorola Milestone. <br><br>  Here it is, next to my good old Palm V and N810: <br><br> <a href=""><img src="https://habrastorage.org/webt/hh/vf/bm/hhvfbmnvsxhy_2srw11rhwt8r5g.jpeg"></a> <br><br>  I must say that the product of trust is not justified.  The keyboard was a complete disappointment.  Not even because of the layout, but because of the extremely poor quality of workmanship: after six months of use, she began to flake off and hang out. <br><br>  The encrypted bootloader added its own nails to the coffin: the inability to use the custom kernel with all the consequences, the debian chroot, because of the peculiarities of the power supply, consumed the battery as if not in itself, but still, somehow, the product solved the tasks assigned to it. <br><br>  At the very least, it continued to be used after the expiration of the planned obsolescence period, determined by the manufacturer, when several more recent models were released (differing, perhaps, by a slightly modified layout and a large amount of RAM), and at the same time it was wildly buggy and slowed down. <br><br> <a href=""><img src="https://habrastorage.org/webt/yn/5r/zi/yn5rzinf3s7lfalk-xgyaoqmgk8.jpeg"></a> <br>  She finished her motorbike days very brutally: having gone to another dead frieze during a call, she was smashed against a wall. <br><br>  Okay, as the ssh terminal comes down and the smartphone (it will, of course, devour a certain number of your nerve cells).  But there are cases that you need to cling to some piece of hardware with a console cable, or remove a non-IP device by tcpdump in order to do something with it. <br><br>  It’s simply enchanting when, due to the COM port on the docking station, a person drags a hefty 17 ”HP stupid fool with a dock and a 1.5-pound power supply, and then hangs with all this stuff on a stepladder in front of the desk. <br><br>  Recently, I used a 12 "ThinkPad x220 with a usb2com adapter. But more and more often I started to leave the laptop at home, until once (once again) it happened" $ username, everything broke! ", And with me only a smartphone on the android. <br><br><h2>  Here it is, the fish of my dreams (actually, no) </h2><br>  And once I came across a product called GPD Pocket.  A full-fledged laptop in the form factor of a resmartphone or under-plate.  7 ", qwerty-keyboard, a decent reserve of autonomy - oh, we must take. Ordered, received, unpacked. <br><br>  For comparison with x220 and n810: <br><br> <a href=""><img src="https://habrastorage.org/webt/jg/kj/hq/jgkjhqw3ulrb3i956decqaladlk.jpeg"></a> <br><br>  I will not describe the characteristics, to whom it is necessary - I will find it on the Internet, especially since there has recently been a cloying review from girbel.  Just bring the exhaust lshw and lspci: <br><br>  lshw: <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre><code class="hljs ruby">описание: Настольный компьютер продукт: Default string (Default string) производитель: Default string версия: Default string серийный №: Default string разрядность: <span class="hljs-number"><span class="hljs-number">64</span></span> bits возможности: smbios-<span class="hljs-number"><span class="hljs-number">3.0</span></span> dmi-<span class="hljs-number"><span class="hljs-number">3.0</span></span> vsyscall32 конфигурация: boot=normal chassis=desktop family=Default string sku=Default string uuid=<span class="hljs-number"><span class="hljs-number">00020003</span></span>-<span class="hljs-number"><span class="hljs-number">0004</span></span>-<span class="hljs-number"><span class="hljs-number">0005</span></span>-<span class="hljs-number"><span class="hljs-number">0006</span></span>-<span class="hljs-number"><span class="hljs-number">0007000</span></span>80009 *-core описание: Материнская плата продукт: Default string производитель: AMI Corporation физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> версия: Default string серийный №: Default string слот: Default string *-firmware описание: BIOS производитель: American Megatrends Inc. физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> версия: <span class="hljs-number"><span class="hljs-number">5.11</span></span> <span class="hljs-symbol"><span class="hljs-symbol">date:</span></span> 08/<span class="hljs-number"><span class="hljs-number">07</span></span>/<span class="hljs-number"><span class="hljs-number">2017</span></span> размер: <span class="hljs-number"><span class="hljs-number">64</span></span>KiB <span class="hljs-symbol"><span class="hljs-symbol">capacity:</span></span> <span class="hljs-number"><span class="hljs-number">4032</span></span>KiB возможности: pci upgrade shadowing cdboot bootselect socketedrom edd int13floppy120<span class="hljs-number"><span class="hljs-number">0</span></span> int13floppy72<span class="hljs-number"><span class="hljs-number">0</span></span> int13floppy288<span class="hljs-number"><span class="hljs-number">0</span></span> int5printscreen int14serial int17printer acpi usb biosbootspecification uefi *-memory описание: Системная память физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> слот: Системная плата или материнская плата размер: <span class="hljs-number"><span class="hljs-number">8</span></span>GiB *-<span class="hljs-symbol"><span class="hljs-symbol">bank:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span> описание: DIMM DDR3 <span class="hljs-number"><span class="hljs-number">1066</span></span> MHz (<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">9</span></span> ns) продукт: <span class="hljs-number"><span class="hljs-number">00000000</span></span> производитель: Hynix Semiconductor физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> серийный №: <span class="hljs-number"><span class="hljs-number">00000000</span></span> слот: A1_DIMM<span class="hljs-number"><span class="hljs-number">0</span></span> размер: <span class="hljs-number"><span class="hljs-number">4</span></span>GiB разрядность: <span class="hljs-number"><span class="hljs-number">8</span></span> bits частота: <span class="hljs-number"><span class="hljs-number">1066</span></span>MHz (<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">9</span></span>ns) *-<span class="hljs-symbol"><span class="hljs-symbol">bank:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span> описание: DIMM DDR3 <span class="hljs-number"><span class="hljs-number">1066</span></span> MHz (<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">9</span></span> ns) продукт: <span class="hljs-number"><span class="hljs-number">00000000</span></span> производитель: Hynix Semiconductor физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> серийный №: <span class="hljs-number"><span class="hljs-number">00000000</span></span> слот: A1_DIMM1 размер: <span class="hljs-number"><span class="hljs-number">4</span></span>GiB разрядность: <span class="hljs-number"><span class="hljs-number">8</span></span> bits частота: <span class="hljs-number"><span class="hljs-number">1066</span></span>MHz (<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">9</span></span>ns) *-<span class="hljs-symbol"><span class="hljs-symbol">cache:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span> описание: L1 кэш физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> слот: CPU Internal L1 размер: <span class="hljs-number"><span class="hljs-number">224</span></span>KiB <span class="hljs-symbol"><span class="hljs-symbol">capacity:</span></span> <span class="hljs-number"><span class="hljs-number">224</span></span>KiB возможности: internal write-back конфигурация: level=<span class="hljs-number"><span class="hljs-number">1</span></span> *-<span class="hljs-symbol"><span class="hljs-symbol">cache:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span> описание: L2 кэш физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">33</span></span> слот: CPU Internal L2 размер: <span class="hljs-number"><span class="hljs-number">2</span></span>MiB <span class="hljs-symbol"><span class="hljs-symbol">capacity:</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>MiB возможности: internal write-back unified конфигурация: level=<span class="hljs-number"><span class="hljs-number">2</span></span> *-cpu описание: ЦПУ продукт: Intel(R) Atom(TM) x7-Z875<span class="hljs-number"><span class="hljs-number">0</span></span> CPU @ <span class="hljs-number"><span class="hljs-number">1.60</span></span>GHz производитель: Intel Corp. физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">34</span></span> сведения о шине: cpu@0 версия: Intel(R) Atom(TM) x7-Z875<span class="hljs-number"><span class="hljs-number">0</span></span> CPU @ <span class="hljs-number"><span class="hljs-number">1.60</span></span>GHz слот: SOCKET <span class="hljs-number"><span class="hljs-number">0</span></span> размер: <span class="hljs-number"><span class="hljs-number">889</span></span>MHz <span class="hljs-symbol"><span class="hljs-symbol">capacity:</span></span> <span class="hljs-number"><span class="hljs-number">2560</span></span>MHz разрядность: <span class="hljs-number"><span class="hljs-number">64</span></span> bits частота: <span class="hljs-number"><span class="hljs-number">80</span></span>MHz возможности: x86-<span class="hljs-number"><span class="hljs-number">64</span></span> fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp constant_tsc arch_perfmon pebs bts rep_good nopl xtopology tsc_reliable nonstop_tsc cpuid aperfmperf tsc_known_freq pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 movbe popcnt tsc_deadline_timer aes rdrand lahf_lm <span class="hljs-number"><span class="hljs-number">3</span></span>dnowprefetch epb pti tpr_shadow vnmi flexpriority ept vpid tsc_adjust smep erms dtherm ida arat cpufreq конфигурация: cores=<span class="hljs-number"><span class="hljs-number">4</span></span> enabledcores=<span class="hljs-number"><span class="hljs-number">4</span></span> threads=<span class="hljs-number"><span class="hljs-number">4</span></span> *-pci описание: Host bridge продукт: Intel Corporation производитель: Intel Corporation физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> сведения о шине: pci@0000<span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">00</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">00</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> версия: <span class="hljs-number"><span class="hljs-number">34</span></span> разрядность: <span class="hljs-number"><span class="hljs-number">32</span></span> bits частота: <span class="hljs-number"><span class="hljs-number">33</span></span>MHz конфигурация: driver=iosf_mbi_pci ресурсы: <span class="hljs-symbol"><span class="hljs-symbol">IRQ:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span> *-display описание: VGA compatible controller продукт: Intel Corporation производитель: Intel Corporation физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> сведения о шине: pci@0000<span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">00</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">02</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> версия: <span class="hljs-number"><span class="hljs-number">34</span></span> разрядность: <span class="hljs-number"><span class="hljs-number">64</span></span> bits частота: <span class="hljs-number"><span class="hljs-number">33</span></span>MHz возможности: pm msi vga_controller bus_master cap_list rom конфигурация: driver=i915 latency=<span class="hljs-number"><span class="hljs-number">0</span></span> ресурсы: <span class="hljs-symbol"><span class="hljs-symbol">IRQ:</span></span><span class="hljs-number"><span class="hljs-number">123</span></span> память<span class="hljs-symbol"><span class="hljs-symbol">:a0000000-a0ffffff</span></span> память<span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">80000000</span></span>-<span class="hljs-number"><span class="hljs-number">9</span></span>fffffff <span class="hljs-symbol"><span class="hljs-symbol">ioport:</span></span>f00<span class="hljs-number"><span class="hljs-number">0</span></span>(размер=<span class="hljs-number"><span class="hljs-number">64</span></span>) память<span class="hljs-symbol"><span class="hljs-symbol">:c0000-dffff</span></span> *-<span class="hljs-symbol"><span class="hljs-symbol">generic:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span> описание: Signal processing controller продукт: Intel Corporation производитель: Intel Corporation физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> b сведения о шине: pci@0000<span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">00</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span>0b.<span class="hljs-number"><span class="hljs-number">0</span></span> версия: <span class="hljs-number"><span class="hljs-number">34</span></span> разрядность: <span class="hljs-number"><span class="hljs-number">64</span></span> bits частота: <span class="hljs-number"><span class="hljs-number">33</span></span>MHz возможности: msi pm cap_list конфигурация: driver=proc_thermal latency=<span class="hljs-number"><span class="hljs-number">0</span></span> ресурсы: <span class="hljs-symbol"><span class="hljs-symbol">IRQ:</span></span><span class="hljs-number"><span class="hljs-number">129</span></span> память<span class="hljs-symbol"><span class="hljs-symbol">:a1a3b000-a1a3bfff</span></span> *-usb описание: USB controller продукт: Intel Corporation производитель: Intel Corporation физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> сведения о шине: pci@0000<span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">00</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">14.0</span></span> версия: <span class="hljs-number"><span class="hljs-number">34</span></span> разрядность: <span class="hljs-number"><span class="hljs-number">64</span></span> bits частота: <span class="hljs-number"><span class="hljs-number">33</span></span>MHz возможности: pm msi xhci bus_master cap_list конфигурация: driver=xhci_hcd latency=<span class="hljs-number"><span class="hljs-number">0</span></span> ресурсы: <span class="hljs-symbol"><span class="hljs-symbol">IRQ:</span></span><span class="hljs-number"><span class="hljs-number">121</span></span> память<span class="hljs-symbol"><span class="hljs-symbol">:a1a00000-a1a0ffff</span></span> *-<span class="hljs-symbol"><span class="hljs-symbol">usbhost:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span> продукт: xHCI Host Controller производитель: Linux <span class="hljs-number"><span class="hljs-number">4.15</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-rc7-stockmind-gpdpocket xhci-hcd физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> сведения о шине: usb@1 логическое имя: usb1 версия: <span class="hljs-number"><span class="hljs-number">4.15</span></span> возможности: usb-<span class="hljs-number"><span class="hljs-number">2.00</span></span> конфигурация: driver=hub slots=<span class="hljs-number"><span class="hljs-number">7</span></span> speed=<span class="hljs-number"><span class="hljs-number">480</span></span>Mbit/s *-<span class="hljs-symbol"><span class="hljs-symbol">usb:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span> описание: Клавиатура продукт: Gaming Keyboard производитель: SINO WEALTH физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> сведения о шине: usb@1<span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">2</span></span> версия: <span class="hljs-number"><span class="hljs-number">1.00</span></span> возможности: usb-<span class="hljs-number"><span class="hljs-number">1.10</span></span> конфигурация: driver=usbhid maxpower=<span class="hljs-number"><span class="hljs-number">100</span></span>mA speed=<span class="hljs-number"><span class="hljs-number">1</span></span>Mbit/s *-<span class="hljs-symbol"><span class="hljs-symbol">usb:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span> описание: Типовой USB-накопитель продукт: BCM2045A<span class="hljs-number"><span class="hljs-number">0</span></span> производитель: Broadcom Corp физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> сведения о шине: usb@1<span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">3</span></span> версия: <span class="hljs-number"><span class="hljs-number">1.12</span></span> серийный №: B0F1ECED56A9 возможности: usb-<span class="hljs-number"><span class="hljs-number">2.00</span></span> конфигурация: driver=btusb maxpower=<span class="hljs-number"><span class="hljs-number">100</span></span>mA speed=<span class="hljs-number"><span class="hljs-number">12</span></span>Mbit/s *-<span class="hljs-symbol"><span class="hljs-symbol">usbhost:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span> продукт: xHCI Host Controller производитель: Linux <span class="hljs-number"><span class="hljs-number">4.15</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-rc7-stockmind-gpdpocket xhci-hcd физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> сведения о шине: usb@2 логическое имя: usb2 версия: <span class="hljs-number"><span class="hljs-number">4.15</span></span> возможности: usb-<span class="hljs-number"><span class="hljs-number">3.00</span></span> конфигурация: driver=hub slots=<span class="hljs-number"><span class="hljs-number">6</span></span> speed=<span class="hljs-number"><span class="hljs-number">5000</span></span>Mbit/s *-<span class="hljs-symbol"><span class="hljs-symbol">generic:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span> описание: Encryption controller продукт: Intel Corporation производитель: Intel Corporation физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>a сведения о шине: pci@0000<span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">00</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>a.<span class="hljs-number"><span class="hljs-number">0</span></span> версия: <span class="hljs-number"><span class="hljs-number">34</span></span> разрядность: <span class="hljs-number"><span class="hljs-number">32</span></span> bits частота: <span class="hljs-number"><span class="hljs-number">33</span></span>MHz возможности: pm msi bus_master cap_list конфигурация: driver=mei_txe latency=<span class="hljs-number"><span class="hljs-number">0</span></span> ресурсы: <span class="hljs-symbol"><span class="hljs-symbol">IRQ:</span></span><span class="hljs-number"><span class="hljs-number">130</span></span> память<span class="hljs-symbol"><span class="hljs-symbol">:a1900000-a19fffff</span></span> память<span class="hljs-symbol"><span class="hljs-symbol">:a1800000-a18fffff</span></span> *-pci описание: PCI bridge продукт: Intel Corporation производитель: Intel Corporation физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>c сведения о шине: pci@0000<span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">00</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>c.<span class="hljs-number"><span class="hljs-number">0</span></span> версия: <span class="hljs-number"><span class="hljs-number">34</span></span> разрядность: <span class="hljs-number"><span class="hljs-number">32</span></span> bits частота: <span class="hljs-number"><span class="hljs-number">33</span></span>MHz возможности: pci pciexpress msi pm normal_decode bus_master cap_list конфигурация: driver=pcieport ресурсы: <span class="hljs-symbol"><span class="hljs-symbol">IRQ:</span></span><span class="hljs-number"><span class="hljs-number">117</span></span> память<span class="hljs-symbol"><span class="hljs-symbol">:a1000000-a14fffff</span></span> *-network описание: Беспроводной интерфейс продукт: BCM4356 <span class="hljs-number"><span class="hljs-number">802.11</span></span>ac Wireless Network Adapter производитель: Broadcom Corporation физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> сведения о шине: pci@0000<span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">01</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">00</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> логическое имя: wlp1s<span class="hljs-number"><span class="hljs-number">0</span></span> версия: <span class="hljs-number"><span class="hljs-number">02</span></span> серийный №: <span class="hljs-symbol"><span class="hljs-symbol">b0:</span></span><span class="hljs-symbol"><span class="hljs-symbol">f1:</span></span><span class="hljs-symbol"><span class="hljs-symbol">ec:</span></span><span class="hljs-symbol"><span class="hljs-symbol">ed:</span></span><span class="hljs-number"><span class="hljs-number">56</span></span><span class="hljs-symbol"><span class="hljs-symbol">:a8</span></span> разрядность: <span class="hljs-number"><span class="hljs-number">64</span></span> bits частота: <span class="hljs-number"><span class="hljs-number">33</span></span>MHz возможности: pm msi pciexpress bus_master cap_list ethernet physical wireless конфигурация: broadcast=yes driver=brcmfmac driverversion=<span class="hljs-number"><span class="hljs-number">7.35</span></span>.<span class="hljs-number"><span class="hljs-number">180.119</span></span> firmware=<span class="hljs-number"><span class="hljs-number">01</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>a5c4016 ip=<span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">1.142</span></span> latency=<span class="hljs-number"><span class="hljs-number">0</span></span> multicast=yes wireless=IEEE <span class="hljs-number"><span class="hljs-number">802.11</span></span> ресурсы: <span class="hljs-symbol"><span class="hljs-symbol">IRQ:</span></span><span class="hljs-number"><span class="hljs-number">125</span></span> память<span class="hljs-symbol"><span class="hljs-symbol">:a1400000-a1407fff</span></span> память<span class="hljs-symbol"><span class="hljs-symbol">:a1000000-a13fffff</span></span> *-isa описание: ISA bridge продукт: Intel Corporation производитель: Intel Corporation физический <span class="hljs-symbol"><span class="hljs-symbol">ID:</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>f сведения о шине: pci@0000<span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">00</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>f.<span class="hljs-number"><span class="hljs-number">0</span></span> версия: <span class="hljs-number"><span class="hljs-number">34</span></span> разрядность: <span class="hljs-number"><span class="hljs-number">32</span></span> bits частота: <span class="hljs-number"><span class="hljs-number">33</span></span>MHz возможности: isa bus_master cap_list конфигурация: driver=lpc_ich latency=<span class="hljs-number"><span class="hljs-number">0</span></span> ресурсы: <span class="hljs-symbol"><span class="hljs-symbol">IRQ:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> </div></div><br>  lspci: <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="hljs css">00<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:00.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Host</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">bridge</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Intel</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Corporation</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Device</span></span> 2280 (<span class="hljs-selector-tag"><span class="hljs-selector-tag">rev</span></span> 34) 00<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:02.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">VGA</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">compatible</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">controller</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Intel</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Corporation</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Device</span></span> 22<span class="hljs-selector-tag"><span class="hljs-selector-tag">b0</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">rev</span></span> 34) 00<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0b.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Signal</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">processing</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">controller</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Intel</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Corporation</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Device</span></span> 22<span class="hljs-selector-tag"><span class="hljs-selector-tag">dc</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">rev</span></span> 34) 00<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:14.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">USB</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">controller</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Intel</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Corporation</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Device</span></span> 22<span class="hljs-selector-tag"><span class="hljs-selector-tag">b5</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">rev</span></span> 34) 00<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:1a.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Encryption</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">controller</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Intel</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Corporation</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Device</span></span> 2298 (<span class="hljs-selector-tag"><span class="hljs-selector-tag">rev</span></span> 34) 00<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:1c.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">PCI</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">bridge</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Intel</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Corporation</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Device</span></span> 22<span class="hljs-selector-tag"><span class="hljs-selector-tag">c8</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">rev</span></span> 34) 00<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:1f.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ISA</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">bridge</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Intel</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Corporation</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Device</span></span> 229<span class="hljs-selector-tag"><span class="hljs-selector-tag">c</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">rev</span></span> 34) 01<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:00.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Network</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">controller</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Broadcom</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Corporation</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">BCM4356</span></span> 802<span class="hljs-selector-class"><span class="hljs-selector-class">.11ac</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Wireless</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Network</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Adapter</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">rev</span></span> 02)</code> </pre></div></div><br>  Build quality is good, no backlash, no creaks, no flex.  Aluminum housing and in general, the device gives the impression of such a monolithic block.  This is a plus. <br><br>  But there are plenty of cons too.  Glossy screen.  No, it is not just glossy - it is literally a mirror.  That is, you will see your reflection in the conditions of any non-zero light.  In the kit was a protective film, but she did not solve the problem. <br><br>  The second is the keyboard.  What it is is wonderful. <br><br> <a href=""><img src="https://habrastorage.org/webt/zx/ac/cf/zxaccfpxwmrrsoxazzhah3yffk0.jpeg"></a> <br><br>  But how it is implemented is shame and horror.  Attempt to roll under MacBook, with these hefty gaps between the buttons - well, why?  After all, the target audience, it seems, is not a glamorous kitty - they will just take another iped or macbook.  Do not be these unfortunate intervals, the size of the keys could be made larger. <br><br>  The Fn button has a very meager layer: these are 2 buttons for brightness adjustment, F1-F12 and Insert.  Why do you need the top row?  It could be implemented as a separate layer. <br><br>  Particular pain and suffering among Vim users is caused by a colon, placed in the bottom row, next to ctrl. <br><br>  All right, everything is bad, we will treat, the benefit is there are some ways (about it below). <br><br>  Oh yeah, there is a trackpoint.  That to me, as an experienced ThinkPad user, heats the soul.  Only here is one thing: the trackpoint is located completely in the wrong place and in order to use it, you will have to bend your thumb.  This, unfortunately, is incurable.  But for a couple of extra red caps in the kit, of course, thanks. <br><br>  Trackpoint healthy person: <br><img src="https://habrastorage.org/webt/hl/qp/9_/hlqp9_0jr_ergvl5hklnu3js1l4.jpeg"><br><br>  Trackpoint smoker: <br><img src="https://habrastorage.org/webt/vm/be/dm/vmbedms-h1ze_4cnu9_vpecgtri.jpeg"><br><br><h2>  Installing and configuring Linux on GPD Pocket </h2><br>  It is clear that “windows”, and “windows 10” especially, to me on this device is not something that is not necessary, but simply contraindicated. <br><br>  Because of the features of the device, such as the screen orientation (it is turned to the side), it’s just impossible to install and install your favorite Debian without dancing with a tambourine. <br><br> <a href=""><img src="https://habrastorage.org/webt/j_/xy/ai/j_xyai5nsa-njzt67cjgkq4joq4.jpeg"></a> <br><br>  In principle, the official site has the official image of Ubuntu LTS 16.04 (which seems to me a good alternative to stable Debian), but after reading the discussions on the Internet, it was decided to use the project <a href="https://github.com/stockmind/gpd-pocket-ubuntu-respin">GPD Pocket Ubuntu Respin</a> <br><br>  I emphasize, in general, the obvious thing is that only an image built on Ubuntu and fed to a script, for example, Debian, is suitable for use: <br><br><pre> <code class="hljs mel">$./build.sh debian<span class="hljs-number"><span class="hljs-number">-9.3</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>-amd64-netinst.iso Display setting: Xorg-Standard Looking <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> kernel <span class="hljs-keyword"><span class="hljs-keyword">image</span></span>... Extracting kernel files... Archive: gpdpocket<span class="hljs-number"><span class="hljs-number">-20180115</span></span>-kernel-files.zip inflating: linux-headers<span class="hljs-number"><span class="hljs-number">-4.15</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>-rc7-stockmind-gpdpocket_4<span class="hljs-number"><span class="hljs-number">.15</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>-rc7-stockmind-gpdpocket<span class="hljs-number"><span class="hljs-number">-1</span></span>_amd64.deb inflating: linux-<span class="hljs-keyword"><span class="hljs-keyword">image</span></span><span class="hljs-number"><span class="hljs-number">-4.15</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>-rc7-stockmind-gpdpocket_4<span class="hljs-number"><span class="hljs-number">.15</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>-rc7-stockmind-gpdpocket<span class="hljs-number"><span class="hljs-number">-1</span></span>_amd64.deb inflating: linux-libc-dev_4<span class="hljs-number"><span class="hljs-number">.15</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>-rc7-stockmind-gpdpocket<span class="hljs-number"><span class="hljs-number">-1</span></span>_amd64.deb ./isorespin.sh: <span class="hljs-string"><span class="hljs-string">'debian-9.3.0-amd64-netinst.iso'</span></span> must be an Ubuntu (or Ubuntu flavour), Linux Mint, neon, elementary, BackBox or Peppermint desktop ISO.</code> </pre><br>  At the output we get the file linuxium-xubuntu-16.04-desktop-amd64.iso, which we write on the USB flash drive: <br><br><pre> <code class="hljs cs"><span class="hljs-meta"><span class="hljs-meta">#dd </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">=linuxium-xubuntu-16.04-desktop-amd64.iso of=/dev/sdX</span></span></code> </pre> <br>  We are loading from it, setting the boot device, going to the UEFI settings with the Delete button when loading. <br><br>  The installation procedure is trivial, I can’t see the meaning of details.  I will only note that it is better to produce it from the Live mode, so the screen will not be turned to the side. <br><br>  I use full disk encryption in case the device is suddenly lost or stolen.  So, at least, all your ssh-keys (yes, I know about password protection and ssh-agent) and logins on Internet resources will remain intact.  Therefore, I put LVM on top of LUKS, which I wish for you. <br><br><h2>  Fix the curvature </h2><br><h3>  Sleep and Hibernation </h3><br>  It would be nice to be able to throw the laptop into the bag and forget about it until it is needed.  Fortunately, the size and weight allow.  It would be nice not to start up, every time, the necessary applications manually, but simply to continue working from the place where you stopped. <br><br>  Sleep mode, like, works out-of-the-box.  It is implemented by regular means, I mean through systemctl suspend.  However, empirically, it was found that the power consumption in this mode is not much inferior to consumption in idle.  Apparently, the device simply extinguishes the screen, network interfaces and disables the cooler.  As a result, the battery will land at zero days for two. <br><br>  Need hibernation.  The standard hibernate systemctl turned out to be inoperable: the state is dumped into the swap, but it cannot recover when it is loaded. <br><br>  I remembered that there is such a project - <a href="http://suspend.sourceforge.net/">Userspace Software Suspend</a> and there are its packages in the repository. <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#apt install hibernate</span></span></code> </pre> <br>  Checking: <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#hibernate-disk</span></span></code> </pre> <br>  Voila, it works!  The system has been dumped and turned off.  After entering the password LUKS, recovered.  But the sound and wifi were covered, the brightness of the screen backlight was reset to the maximum.  We will finish. <br><br><h3>  We install the necessary </h3><br>  Before proceeding to configure ACPI, you will need to install several utilities. <br><br>  So xbacklight is responsible for adjusting the brightness of the screen. <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#apt install xbacklight</span></span></code> </pre> <br>  The laptop is not a hard disk, but a flash drive, so I don’t want to kill it with a swap.  There is such a thing <a href="https://ru.wikipedia.org/wiki/ZRam">ZRam</a> , so we will use it.  Now everything is simple with this, it is not required to register sheets in rc.local, and you only need to do the following: <br><br><pre> <code class="hljs css"><span class="hljs-selector-id"><span class="hljs-selector-id">#apt</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">install</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">zram-config</span></span> <span class="hljs-selector-id"><span class="hljs-selector-id">#sudo</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">systemctl</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">enable</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">zram-config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.service</span></span></code> </pre><br>  The script itself will calculate the necessary amount of memory and make swapon. <br><br>  As it was rightly recalled in the comments, the flash resource eats up not only the swap, but also the logging.  Therefore, / tmp and / var / log will be rendered in ram to tmpfs.  To do this, we add two lines in / etc / fstab: <br><br><pre> <code class="hljs mel">tmpfs /tmp tmpfs nodev,nosuid,<span class="hljs-keyword"><span class="hljs-keyword">size</span></span>=<span class="hljs-number"><span class="hljs-number">256</span></span>M <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> tmpfs /var/<span class="hljs-keyword"><span class="hljs-keyword">log</span></span> tmpfs nodev,nosuid,<span class="hljs-keyword"><span class="hljs-keyword">size</span></span>=<span class="hljs-number"><span class="hljs-number">512</span></span>M <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br><br><h3>  We finish acpi </h3><br>  First of all, disable systemg handlers.  So how does it all by its own means, and they are inoperative.  The motto - we do everything, but we do badly.  For example, it did not learn how to handle the connection of the power adapter or headphones, keystrokes, and the like. <br><br><div class="spoiler">  <b class="spoiler_title">He ate acpid and still hungry!</b>  <b class="spoiler_title">(4Mb)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/3g/yu/fa/3gyufa5pfygiidcnl4zw2xxmcxi.gif"></div></div><br>  /etc/systemd/logind.conf <br><br><pre> <code class="hljs">HandlePowerKey=ignore HandleLidSwitch=ignore</code> </pre><br><pre> <code class="hljs css"><span class="hljs-selector-id"><span class="hljs-selector-id">#systemctl</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">restart</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">systemd-logind</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.service</span></span></code> </pre> <br>  The acpid daemon is responsible for handling acpi-events, whose config files are stored, suddenly, in / etc / acpi. <br><br>  We will send the laptop to hibernation by pressing the power button.  To do this, edit the following files (if not, you need to create): <br><br>  / etc / acpi / events / powerbtn <br><br><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">event</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">button</span></span>[ /]power action=/etc/acpi/hibernate.sh</code> </pre><br>  /etc/acpi/hibernate.sh (with comments) <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">#!/bin/bash #отключаю свой скрипт блокировки экрана, так как при загрузке будет запрошен пароль LUKS mv /home/<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>/bin/<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span> /home/<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>/bin/nolock #убиваем пшшш-аудио killall <span class="hljs-number"><span class="hljs-number">-9</span></span> pulseaudio #отключае zram и активируем swap systemctl stop zram-config.service swapon /dev/xubuntu-vg/swap_1 #сохраняем состояние подсветки экрана DISPLAY=:<span class="hljs-number"><span class="hljs-number">0.0</span></span> su <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> -c "xbacklight &gt;/tmp/xbl" #отмонтируем сетевые файловые системы umount -alt nfs4 umount -alt cifs #усыпляем wpa_supplicant /sbin/wpa_cli suspend hibernate-disk sleep <span class="hljs-number"><span class="hljs-number">2</span></span> #восстанавливаем статус подсветки DISPLAY=:<span class="hljs-number"><span class="hljs-number">0.0</span></span> su <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> -c "xbacklight -set `cat /tmp/xbl`" #восстанавливаем wpa_supplicant /sbin/wpa_cli resume #перезагружаем модули alsa, иначе звука не будет. пшш-аудио при вызове восстановится самостоятельно /sbin/alsa force-reload #звуковая система ноута оставляет желать лучшего. было замечено, что при больших значениях канала DAC1, из динамиков и наушников идет дикий перегруз до хрипоты и дребезжания amixer -c <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-string"><span class="hljs-string">'DAC1'</span></span> <span class="hljs-number"><span class="hljs-number">90</span></span>% #убиваем блокировщик экрана на случай, если гибернация была запущена при залоченном экране killall i3lock #восстанавливаем возможность запуска блокировщика mv /home/<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>/bin/nolock /home/<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>/bin/<span class="hljs-keyword"><span class="hljs-keyword">lock</span></span> #восстанавливаем zram systemctl <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> zram-config.service #отключаем своп на карту swapoff /dev/xubuntu-vg/swap_1</code> </pre></div></div><br>  It is not easy to realize automatic hibernation at low charge, but very simple: <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#apt install acpi</span></span></code> </pre> <br>  /etc/acpi/ifbatlowgotosleep.sh <br><br><pre> <code class="hljs pgsql">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">level</span></span>=`/usr/bin/acpi -b|sed <span class="hljs-string"><span class="hljs-string">'/unava/d'</span></span>|awk -F\ <span class="hljs-string"><span class="hljs-string">'{ print $4 }'</span></span>|sed -e <span class="hljs-string"><span class="hljs-string">'s/,//'</span></span> -<span class="hljs-string"><span class="hljs-string">e's/%//'</span></span>` <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ "$level" -lt "10" ] <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> /etc/acpi/hibernate.sh fi</code> </pre><br>  The script checks the state of charge.  If less than 10%, then the hibernation script above performs. <br><br>  Periodic execution is set via crontab: <br><br><pre> <code class="hljs ruby">$sudo crontab -e *<span class="hljs-regexp"><span class="hljs-regexp">/3 * * * * /etc</span></span><span class="hljs-regexp"><span class="hljs-regexp">/acpi/ifbatlowgotosleep</span></span>.sh <span class="hljs-number"><span class="hljs-number">2</span></span>&gt;<span class="hljs-regexp"><span class="hljs-regexp">/dev/null</span></span></code> </pre><br>  In my case, the battery is polled every 3 minutes. <br><br>  Sleep mode (systemctl suspend), as mentioned above, is rather useless.  Therefore, I see no reason to activate it when closing the lid.  Moreover, there may be a desire, say, to listen to music from a gated laptop that is in your pocket (no wonder he is “pocket”). <br><br>  Therefore, simply extinguish the screen when closing and turn on when opening. <br><br>  Remove / etc / acpi / lidbtn. <br><br>  Create and edit: <br><br>  / etc / acpi / events / lidclose: <br><br><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">event</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">button</span></span>/lid LID close action=/etc/acpi/lidclose.sh</code> </pre><br>  / etc / acpi / events / lidopen: <br><br><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">event</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">button</span></span>/lid LID open action=/etc/acpi/lidopen.sh</code> </pre><br>  /etc/acpi/lidopen.sh <br><br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">DISPLAY</span></span>=:<span class="hljs-number"><span class="hljs-number">0.0</span></span> su user -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-string"><span class="hljs-string">"xrandr --output DSI1 --off"</span></span></code> </pre> <br>  /etc/acpi/lidclose.sh <br><br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">DISPLAY</span></span>=:<span class="hljs-number"><span class="hljs-number">0.0</span></span> su user -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-string"><span class="hljs-string">"xrandr --output DSI1 --auto --rotate right --dpi 200"</span></span></code> </pre> <br>  Set the DPI value to taste, and user is the simple name of my account (change to your own). <br><br><h3>  Adjust the sound and brightness control keys </h3><br>  We do this through all the same acpi-events. <br><br>  / etc / acpi / events / voldown <br><br><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">event</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">button</span></span>[ /]volumedown action=/etc/acpi/volume-down.sh</code> </pre><br>  / etc / acpi / events / volup <br><br><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">event</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">button</span></span>[ /]volumeup action=/etc/acpi/volume-up.sh</code> </pre><br>  / etc / acpi / events / mute <br><br><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">event</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">button</span></span>[ /]<span class="hljs-keyword"><span class="hljs-keyword">mute</span></span> action=/etc/acpi/volume-<span class="hljs-keyword"><span class="hljs-keyword">toggle</span></span>.sh</code> </pre><br>  Scripts: <br><br>  /etc/acpi/volume-toggle.sh <br><br><pre> <code class="hljs swift">amixer -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> '<span class="hljs-type"><span class="hljs-type">Speaker</span></span> <span class="hljs-type"><span class="hljs-type">Channel'</span></span> toggle amixer -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> '<span class="hljs-type"><span class="hljs-type">Headphone</span></span> <span class="hljs-type"><span class="hljs-type">Channel'</span></span> toggle</code> </pre><br>  /etc/acpi/volume-up.sh <br><br><pre> <code class="hljs swift">amixer -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> '<span class="hljs-type"><span class="hljs-type">Headphone'</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>%+ amixer -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> '<span class="hljs-type"><span class="hljs-type">Speaker'</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>%+</code> </pre><br>  /etc/acpi/volume-down.sh <br><br><pre> <code class="hljs swift">amixer -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> '<span class="hljs-type"><span class="hljs-type">Headphone'</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>%- amixer -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> '<span class="hljs-type"><span class="hljs-type">Speaker'</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>%-</code> </pre><br>  Similarly for brightness: <br>  / etc / acpi / events / bdown <br><br><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">event</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">button</span></span>[ /]brightnessdown action=/etc/acpi/bdown.sh</code> </pre><br>  / etc / acpi / events / bup <br><br><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">event</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">button</span></span>[ /]brightnessup action=/etc/acpi/bup.sh</code> </pre><br>  /etc/acpi/bup.sh <br><br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">DISPLAY</span></span>=:<span class="hljs-number"><span class="hljs-number">0.0</span></span> su user -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-string"><span class="hljs-string">"xbacklight -inc 5%"</span></span></code> </pre><br>  /etc/acpi/bdown.sh <br><br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">DISPLAY</span></span>=:<span class="hljs-number"><span class="hljs-number">0.0</span></span> su user -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-string"><span class="hljs-string">"xbacklight -dec 5%"</span></span></code> </pre><br>  Let me remind you, user is the name of my account.  Enter your own. <br><br><h3>  Headphones </h3><br>  Shit ^ WCSpeaky chip Realtek ALC5645 can not turn off the speakers when connecting headphones.  We'll have to teach the system to do it yourself. <br><br>  In respin there is such a script: <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="hljs vbscript">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> -e -u <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ <span class="hljs-string"><span class="hljs-string">"$1"</span></span> = <span class="hljs-string"><span class="hljs-string">"jack/headphone"</span></span> -a <span class="hljs-string"><span class="hljs-string">"$2"</span></span> = <span class="hljs-string"><span class="hljs-string">"HEADPHONE"</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"$3"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> plug) sink=<span class="hljs-string"><span class="hljs-string">"[Out] Headphones"</span></span> ;; *) sink=<span class="hljs-string"><span class="hljs-string">"[Out] Speaker"</span></span> ;; esac <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> userdir <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /run/user/*; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> uid=<span class="hljs-string"><span class="hljs-string">"$(basename $userdir)"</span></span> user=<span class="hljs-string"><span class="hljs-string">"$(id -un $uid)"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ -f <span class="hljs-string"><span class="hljs-string">"$userdir/pulse/pid"</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> su <span class="hljs-string"><span class="hljs-string">"$user"</span></span> -c <span class="hljs-string"><span class="hljs-string">"pacmd set-sink-port alsa_output.platform-cht-bsw-rt5645.HiFi__hw_chtrt5645__sink $sink"</span></span> fi done fi</code> </pre></div></div><br>  But it does not work.  He is trying to make the switch through the control of cine-audio cynics, but it does not work.  Because: <br><br><pre> <code class="hljs smalltalk"><span class="hljs-string"><span class="hljs-string">$s</span></span>udo su <span class="hljs-symbol"><span class="hljs-symbol">#su</span></span> user -c <span class="hljs-comment"><span class="hljs-comment">"pacmd set-sink-port alsa_output.platform-cht-bsw-rt5645.HiFi__hw_chtrt5645__sink '[Out] Speaker'"</span></span> Нет запущенного демона <span class="hljs-type"><span class="hljs-type">PulseAudio</span></span>, либо он не запущен в качестве сеансового демона.</code> </pre><br>  The answer is simple: when the pshsh-audio process is not yet called by the client, there is nothing to communicate with pacmd.  You can, of course, add a line to launch this one in rc.local, xinitrc, or write a separate systemg unit at all, but I decided that it would be better to make a crutch of your own than repair others.  And I wrote my script, much less monstrous and sophisticated, I think. <br><br>  /etc/acpi/headphone-jack.sh <br><br><pre> <code class="hljs pgsql">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> -e -u <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ "$3" = "plug" ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> amixer -c <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-string"><span class="hljs-string">'Speaker Channel'</span></span> mute &gt;/dev/<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> amixer -c <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-string"><span class="hljs-string">'Headphone Channel'</span></span> unmute &gt;/dev/<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> amixer -c <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-string"><span class="hljs-string">'Speaker Channel'</span></span> unmute &gt;/dev/<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> amixer -c <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-string"><span class="hljs-string">'Headphone Channel'</span></span> mute &gt;/dev/<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> fi</code> </pre><br><h3>  We treat layout and other trifles </h3><br>  As already mentioned, the layout infuriates me.  The delete button, where there should be backslash and bar, a colon in the bottom row, it is not clear why the rendered menu, tab key is where escape is on normal keyboards ... <br><br>  In detail, with analysis, I will not paint, I’ll just give my ~ / .xmodmaprc and describe how it's all done. <br><br>  For starters, we need to catch keikod.  This is done using the xev program (#apt install xev, yes).  Run, press the desired key and get the output like: <br><br><pre> <code class="hljs pgsql">KeyPress event, <span class="hljs-type"><span class="hljs-type">serial</span></span> <span class="hljs-number"><span class="hljs-number">33</span></span>, synthetic <span class="hljs-keyword"><span class="hljs-keyword">NO</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">window</span></span> <span class="hljs-number"><span class="hljs-number">0x3200001</span></span>, root <span class="hljs-number"><span class="hljs-number">0x2c0</span></span>, subw <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-type"><span class="hljs-type">time</span></span> <span class="hljs-number"><span class="hljs-number">187713326</span></span>, (<span class="hljs-number"><span class="hljs-number">979</span></span>,<span class="hljs-number"><span class="hljs-number">493</span></span>), root:(<span class="hljs-number"><span class="hljs-number">982</span></span>,<span class="hljs-number"><span class="hljs-number">1078</span></span>), state <span class="hljs-number"><span class="hljs-number">0x0</span></span>, keycode <span class="hljs-number"><span class="hljs-number">119</span></span> (keysym <span class="hljs-number"><span class="hljs-number">0xffff</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Delete</span></span>), same_screen YES, XLookupString gives <span class="hljs-number"><span class="hljs-number">1</span></span> bytes: (<span class="hljs-number"><span class="hljs-number">7</span></span>f) "" XmbLookupString gives <span class="hljs-number"><span class="hljs-number">1</span></span> bytes: (<span class="hljs-number"><span class="hljs-number">7</span></span>f) "" XFilterEvent <span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">False</span></span></code> </pre><br>  We need the value "keycode 119". <br><br>  Next, open ~ / .xmodmaprc and write it there. <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">keycode</span></span> <span class="hljs-number"><span class="hljs-number">119</span></span> = backslash bar backslash bar</code> </pre> <br>  And we bring the execution of “xmodmap ~ / .xmodmaprc” into your xinitrc or whatever you call when starting your favorite DE or WM. <br><br>  My ~ / .xmodmaprc: <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="hljs sql">pointer = 1 2 3 4 5 remove <span class="hljs-keyword"><span class="hljs-keyword">Lock</span></span> = Caps_Lock remove Control = Control_L keycode <span class="hljs-number"><span class="hljs-number">0x42</span></span> = Control_L keycode <span class="hljs-number"><span class="hljs-number">135</span></span> = Alt_R keycode <span class="hljs-number"><span class="hljs-number">0x25</span></span> = Super_R keycode <span class="hljs-number"><span class="hljs-number">133</span></span> = Super_R <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> Control = Control_L keycode <span class="hljs-number"><span class="hljs-number">113</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">Left</span></span> keycode <span class="hljs-number"><span class="hljs-number">111</span></span> = Up keycode <span class="hljs-number"><span class="hljs-number">114</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">Right</span></span> keycode <span class="hljs-number"><span class="hljs-number">116</span></span> = Down keycode <span class="hljs-number"><span class="hljs-number">110</span></span> = Home keycode <span class="hljs-number"><span class="hljs-number">115</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">End</span></span> keycode <span class="hljs-number"><span class="hljs-number">108</span></span> = ISO_Next_Group keycode <span class="hljs-number"><span class="hljs-number">136</span></span> = ISO_First_Group keycode <span class="hljs-number"><span class="hljs-number">49</span></span> = asciitilde grave asciitilde grave keycode <span class="hljs-number"><span class="hljs-number">119</span></span> = backslash bar backslash bar keycode <span class="hljs-number"><span class="hljs-number">51</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">Delete</span></span> keycode <span class="hljs-number"><span class="hljs-number">48</span></span> = colon semicolon Cyrillic_zhe Cyrillic_ZHE keycode <span class="hljs-number"><span class="hljs-number">47</span></span> = apostrophe quotedbl Cyrillic_e Cyrillic_E keycode <span class="hljs-number"><span class="hljs-number">130</span></span> = XF86Explorer keycode <span class="hljs-number"><span class="hljs-number">121</span></span> = XF86AudioMute keycode <span class="hljs-number"><span class="hljs-number">198</span></span> = XF86AudioMicMute keycode <span class="hljs-number"><span class="hljs-number">122</span></span> = XF86AudioLowerVolume keycode <span class="hljs-number"><span class="hljs-number">123</span></span> = XF86AudioRaiseVolume keycode <span class="hljs-number"><span class="hljs-number">37</span></span> = Tab <span class="hljs-keyword"><span class="hljs-keyword">clear</span></span> mod5 <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> mod5 = XF86Explorer keycode <span class="hljs-number"><span class="hljs-number">166</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">Prior</span></span> keycode <span class="hljs-number"><span class="hljs-number">167</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span></code> </pre></div></div><br>  They use such doubtful, for most users, things like moving ctrl to caps-lock, tab to ctrl_l, alt_gr to menu and switching layouts to the old altgr position. <br><br>  I also use xcape to emulate pressing escape when I press ctrl_l once.  Called as follows: <br><br><pre> <code class="hljs nginx"> <span class="hljs-attribute"><span class="hljs-attribute">xcape</span></span> -t <span class="hljs-number"><span class="hljs-number">1000</span></span> -e <span class="hljs-string"><span class="hljs-string">"Control_L=Escape"</span></span></code> </pre> <br>  Since I prefer dark themes that are more comfortable (I have an opinion, hell be challenging) in low light conditions, but often have to work in bright daylight, there is a small trick: the colors of the image can be inverted.  To do this, you need the xcalib program: <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#apt install xcalib</span></span></code> </pre> <br>  Invert: <br><br><pre> <code class="hljs matlab">$xcalib -<span class="hljs-built_in"><span class="hljs-built_in">i</span></span> -a</code> </pre> <br>  You can zabindit to any convenient hot key tools window manager.  I'm hanging on Super_L + Backspace. <br><br><h2>  Total </h2><br>  Impressions of the device are more positive than negative.  I do not regret the money spent.  The device does not take up much space in the bag, it fits in the pocket of cargo pants and a smok-like jacket. <br><br> <a href=""><img src="https://habrastorage.org/webt/xz/u5/a2/xzu5a2lnxboqgbrkw8chzh3zlzu.jpeg"></a> <br><br>  It works for a long time from the battery, for the test I played three and a half hours films with wifi on, discharged it by half.  Charged from the paver with usb-a through the adapter ac. <br><br>  All encountered soft curvatures successfully treated. <br><br>  It is a pity that there is no rj45 port, but I hope it will be decided by the ordered adapter with usb.  The lack of mobile communications and cameras, now, in conditions of total surveillance, I think rather a plus. </div>