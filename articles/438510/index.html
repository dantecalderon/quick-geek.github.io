<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Composition against inheritance, the team pattern and game development in general</title>
  <meta name="description" content="Disclaimer: In my opinion, an article on software architecture should not and cannot be perfect. Any solution described may cover the level required b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Composition against inheritance, the team pattern and game development in general</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/na/sz/bh/naszbh_usuh0jpozxmoiuqpdl1q.png"></div><br>  Disclaimer: <i>In my opinion, an article on software architecture should not and cannot be perfect.</i>  <i>Any solution described may cover the level required by one programmer, and the other programmer will complicate the architecture too unnecessarily.</i>  <i>But she must give a solution to the tasks that she set for herself.</i>  <i>And this experience, along with the rest of the knowledge of a programmer who is studying, systematizes information, hones new skills, and criticizes himself and others - this experience turns into excellent software products.</i>  <i>The article will switch between art and technical part.</i>  <i>This is a small experiment and I hope it will be interesting.</i> <br><blockquote>  - Listen, I've come up with a great idea for the game!  - game designer Vasya was disheveled, and his eyes were red.  I still sipped coffee and holivaril on Habr√©, to kill time before the stand-up.  He looked at me expectantly, until I finished writing in the comments to the person what he was wrong about.  Vasya knew that while justice will not prevail, and the truth will not be protected - there‚Äôs no point in continuing the conversation with me.  I finished the last sentence and looked at it. <br><br>  - In a nutshell - magicians with mana can cast spells, and warriors can fight in close combat and spend endurance.  And magicians and warriors can move.  Yes, there it will still be possible to rob the cows, but we will do this in the next version, in short.  Will you show the prototype after the stand-up, okay? <br><br>  He ran away on his game design affairs, and I opened the IDE. </blockquote><a name="habracut"></a><br>  In fact, the topic ‚Äúcomposition vs. inheritance‚Äù, ‚Äúbanana-monkey problem‚Äù, ‚Äúdiamond problem (multiple inheritance)‚Äù are frequently asked questions during interviews in various formats and for good reason.  Incorrect use of inheritance can complicate the architecture, and inexperienced programmers do not know how to deal with this and, as a result, begin to criticize the PLO as a whole and start writing procedural code.  Therefore, experienced programmers (or those who have read clever things on the Internet) consider it their duty to ask about such things at an interview in a variety of forms.  The universal answer is ‚Äúcomposition is better than inheritance, no shades of gray should be used‚Äù.  Those who have just read each such answer will be 100% satisfied. <br><br>  But, as I said at the beginning of the article, each architecture will suit your project, and if inheritance is enough for your project and all you need to do to create a MonkeyBanan is to create a task.  Our programmer found himself in a similar situation.  It makes no sense to abandon inheritance just because FPShniki will laugh at you. <br><br><pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ x = <span class="hljs-number"><span class="hljs-number">0</span></span>; y = <span class="hljs-number"><span class="hljs-number">0</span></span>; moveTo (x, y) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x = x; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.y = y; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ mana = <span class="hljs-number"><span class="hljs-number">100</span></span>; castSpell () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mana--; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Warrior</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ stamina = <span class="hljs-number"><span class="hljs-number">100</span></span>; meleeHit () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.stamina--; } }</code> </pre> <br><blockquote>  Stand-up as always dragged on.  I rocked on a chair and hung in the phone until June Petya tried to convince the tester that the inability to quickly control through the right mouse button was not a bug, because nowhere was this opportunity described, which means you need to throw the task to the pre-production department.  The tester argued that once management seems to be mandatory for users via the right button, this is a bug, not a feature.  In fact, as the only player of our team to our game on combat servers, he wanted to add this opportunity as soon as possible, but he knew that if you drop it into the pre-production department, the bureaucratic machine will let you release it in release no earlier than 4 Month, and having issued it as a bug - you can get it in the next build.  The project manager, as always, was late, and the guys were so fiercely cursing that they had already switched to the mats and, probably, it would soon have come to a massacre if the studio director hadn‚Äôt been scolded and hadn‚Äôt taken both to his office.  Probably again at 300 bucks fakananut. <br><br>  When I came out of the meeting room, a game designer ran up to me and happily said that everyone liked the prototype, he was accepted into the work and now this is our new project for the next six months.  While we were going to my table, he enthusiastically told what new features would be in our game.  How many different spells he came up with and, of course, there will be a paladin who can fight and throw magic.  And the whole department of artists is already working on new animations, and China has already signed an agreement according to which our game will be released in their market.  I silently looked at the code of my prototype, I thought deeply, selected everything and deleted it. </blockquote>  I believe that over time, based on his experience, each programmer begins to see obvious problems that he may encounter.  Especially if it works for a long time in a team with one game designer.  We have a lot of new requirements and features.  And our old "architecture" obviously will not cope with this. <br><br>  When you are given a similar task at the interview - they will definitely try to catch you.  They can be in various forms - crocodiles, which can swim and run.  Tanks that can shoot from a cannon or a machine gun and so on.  The most important feature of such tasks is that you have an object that can do several different actions.  And your inheritance can not cope, because it is impossible to inherit from FlyingObject and SwimmingObject And different objects can do different things.  At this point, we discard inheritance and proceed to the composition: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ abilities = []; addAbility (...abilities) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> abilities) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.abilities.push(a); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } getAbility (AbilityClass) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.abilities) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> AbilityClass) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-comment"><span class="hljs-comment">/////////////////////////////////////// // // –¢—É—Ç –±—É–¥–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–±–∏–ª–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ // –ö–∞–∂–¥–∞—è –∞–±–∏–ª–∫–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ // /////////////////////////////////////// class Ability {} class HealthAbility extends Ability { health = 100; maxHealth = 100; } class MovementAbility extends Ability { x = 0; y = 0; moveTo(x, y) { this.x = x; this.y = y; } } class SpellCastAbility extends Ability { mana = 100; maxMana = 100; cast () { this.mana--; } } class MeleeFightAbility extends Ability { stamina = 100; maxStamina = 100; constructor (power) { this.power = power; } hit () { this.stamina--; } } /////////////////////////////////////// // // –ê —Ç—É—Ç —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ —Å–æ —Å–≤–æ–∏–º–∏ –∞–±–∏–ª–∫–∞–º–∏ // /////////////////////////////////////// class CharactersFactory { createMage () { return new Character().addAbility( new MovementAbility(), new HealthAbility(), new SpellCastAbility() ); } createWarrior () { return new Character().addAbility( new MovementAbility(), new HealthAbility(), new MeleeFightAbility(3) ); } createPaladin () { return new Character().addAbility( new MovementAbility(), new HealthAbility(), new SpellCastAbility(), new MeleeFightAbility(2) ); } }</span></span></code> </pre><br>  Every possible action now is a separate class with its own state and, if necessary, we can create unique characters, throwing the necessary number of skills for them.  For example, it is very easy to create an immortal magical tree: <br><br><pre> <code class="javascript hljs">createMagicTree () { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Character().addAbility( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpellCastAbility() ); }</code> </pre> <br>  We have lost inheritance and instead of it appeared composition.  Now we create a character and list his possible abilities.  But this does not mean that inheritance is always bad, just in this case it does not fit.  The best way to understand whether inheritance is suitable is to answer for yourself the question of what relationship it represents.  If this connection is ‚Äúis-a‚Äù, that is, you indicate that MeleeFightAbility is an abilka, then it is perfect.  If the link is created only because you want to add an action and displays ‚Äúhas-a‚Äù, then you should think about composition. <br><blockquote>  I enjoyed looking at the excellent result.  It works elegantly and without bugs, dream architecture!  I am sure that it will stand more than one test of time and we will not have to rewrite it for a long time.  I was so enthusiastic about my code that I didn‚Äôt even notice how June Petya approached me. <br><br>  It was already dark outside, which made it even more noticeable how he beamed with happiness.  Apparently, he managed to push the task and get rid of the penalty for the mats in the direction of colleagues, which was announced last week. <br><br>  - Artists painted simply divine animations - he quickly rattled off - I can‚Äôt wait until we have them screwed.  Particularly chic departing pluses when a healing spell is applied.  They are so green and such pluses! <br><br>  I cursed myself, for I completely forgot that we still have to fasten the view.  Devil seems to have to rewrite architecture. </blockquote>  In such articles, only the work with the model is usually described, because it is abstract and adult, and you can give ‚Äúpicture pictures‚Äù to the juna and no matter what kind of architecture it will be.  However, our model should provide maximum information for the view so that it can do its job.  In GameDev, for this purpose, the pattern ‚ÄúTeam‚Äù is usually used.  In a nutshell, we have a state without logic, and any change must occur in the appropriate commands.  This may seem like a complication, but it has many advantages: <br>  - They are excellent combo when one team calls another <br>  - Each team, when executed, is, in fact, an event to which you can subscribe <br>  - We can easily serialize them <br><br>  For example, the damage command may look like this.  It is then that the warrior will use it when striking with the sword and the magician when striking with a fire spell.  Now, for simplicity, I implemented command validation through exceptions, but then they can be rewritten as return codes. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DealDamageCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (target, damage) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage = damage; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> healthAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target.getAbility(HealthAbility); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (healthAbility == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'NoHealthAbility'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> resultHealth = healthAbility.health - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage; healthAbility.health = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.max( <span class="hljs-number"><span class="hljs-number">0</span></span>, resultHealth ); } }</code> </pre> <br>  I like to make hierarchical commands - when one is executed, it <s>gives birth</s> creates many children, which the engine then executes.  So now, when we have the opportunity to cause damage - we can try to implement a melee strike <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MeleeHitCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (source, target, damage) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source = source; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage = damage; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fightAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source.getAbility(MeleeFightAbility); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fightAbility == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'NoFightAbility'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addChildren([ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DealDamageCommand(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target, fightAbility.power); ]); } }</code> </pre> <br>  These two teams have everything you need for our animations.  Renderschik can simply subscribe to events and display everything that the artists wish with the following code: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> onMeleeHit (meleeHitCommand) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> view.drawMeleeHit( meleeHitCommand.source, meleeHitCommand.target ); } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> onDealDamage (dealDamageCommand) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> view.showDamageNumbers( dealDamageCommand.target, dealDamageCommand.damage ); }</code> </pre> <br><blockquote>  I lost count, which once in a row I stayed up at work until dark.  Since childhood, the development of games has attracted me, seemed to me something magical, and even now, when I have been doing this for many years, I have a reverent attitude to it.  Despite the fact that I learned the secret of how they are created - I have not lost faith in magic.  And this magic makes me sit at night with such inspiration and write my code.  Vasya approached me.  He does not know how to program at all, but he shares my attitude towards games. <br><br>  - Here is a game designer put in front of me a Talmud of 200 pages printed on A4 sheets.  Although the design document was conducted in confluence, we liked to print it out at important stages in order to feel this work in physical embodiment.  I opened it on a random page and got on a huge list of a wide variety of spells that a magician and paladin can do, a description of their effects, intelligence requirements, a price in man and an approximate description for artists how to display them.  Work for many months, because today I will stay at work again. </blockquote>  Our architecture makes it easy to create complex spell combinations.  Simply, each spell can return a list of commands that must be performed during a caste. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CastSpellCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (source, target, spell) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source = source; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell = spell; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> spellAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source.getAbility(SpellCastAbility); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (spellAbility == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'NoSpellCastAbility'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addChildren(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PayManaCommand(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell.manaCost)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addChildren(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell.getCommands(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target)); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">0</span></span>; getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DamageSpell</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (damageValue) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damageValue = damageValue; } getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DealDamageCommand(target, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damageValue) ]; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HealSpell</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (healValue) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.healValue = healValue; } getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HealDamageCommand(target, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.healValue) ]; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VampireSpell</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value = value; } getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DealDamageCommand(target, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HealDamageCommand(source, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value) ]; } }</code> </pre><br><blockquote>  <i>A year and a half later</i> <br><br>  Stand-up as always dragged on.  I rocked on a chair and hung in a laptop while middle Peter was arguing with a tester about a bug.  With all sincerity he tried to convince the tester that the lack of control through the right mouse button in our new game should not be marked as a bug, because such a task never stood and it was not worked out by game designers or lawyers.  I had a feeling of deja vu, but a new message in the discord distracted me: <br><br>  - Listen - wrote a game designer - I have a great idea ... </blockquote></div><p>Source: <a href="https://habr.com/ru/post/438510/">https://habr.com/ru/post/438510/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>