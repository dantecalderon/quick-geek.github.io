<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why is TypeScript based on every new web application in PayPal?</title>
  <meta name="description" content="We recently published material in which Eric Elliot criticized TypeScript. Today we present to your attention the translation of the article by Kent D...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Why is TypeScript based on every new web application in PayPal?</h1><div class="post__text post__text-html js-mediator-article">  We recently published <a href="https://habr.com/ru/company/ruvds/blog/437464/">material</a> in which Eric Elliot criticized TypeScript.  Today we present to your attention the translation of the article by Kent Dodds.  Here he talks about why in PayPal switched from Flow to TypeScript. <br><br> <a href="https://habr.com/ru/company/ruvds/blog/437986/"><img src="https://habrastorage.org/getpro/habr/post_images/3a8/f8a/5c2/3a8f8a5c2c03cbf9e48b333147cfe9b4.png" alt="image"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Prehistory</font> </h2><br>  I work at PayPal and do the <code>paypal-scripts</code> library, which is a collection of tools that resembles the <code>react-scripts</code> from <code>create-react-app</code> , or <code>angular-cli</code> , or <code>ember-cli</code> .  I <a href="https://blog.kentcdodds.com/automation-without-config-412ab5e47229">already wrote</a> about this.  At the core of this library is the idea of ‚Äã‚Äãcombining all the tools used in PayPal applications and in published modules.  The purpose of creating <code>paypal-scripts</code> is to take all development dependencies, <code>devDependencies</code> , from <code>package.json</code> , all configuration files, and reduce it all to one entry in the <code>devDependencies</code> section.  And, since all configurations are in a single package, during the creation of which they adhere to a quite definite point of view on what is good, in order to keep the tools up to date, it is enough to update only one dependency (actually <code>paypal-scripts</code> ) , updates of which usually do not contain something of such that can disrupt the operation of the code that relies on it.  As a result, it is enough to keep only one dependency up to date and calmly develop applications. <br><br>  Over the past year, programmers at PayPal have become accustomed to working with <code>paypal-scripts</code> .  Here, to create a new application, just click on several buttons in the web interface, as a result, a corporate GitHub repository will be created, project deployment tools, a continuous integration system, and so on will be configured.  The automatically created repository is based on the <code>sample-app</code> repository. <br><br>  Just last week, my addition was added to it, calculated on the use of <code>paypal-script</code> in it.  This means that each new application in PayPal will be based on a framework built on the basis of modern technologies and tools, the updating of which does not need to be taken care of by the developer of this application.  Among other things, such an application will be statically typed using TypeScript and tested using Jest tools. <br><br>  Honestly, it became the Magnum Opus of my career.  I did not think that someday I would be able to reach a similar level in PayPal.  This project has a huge impact, and I am grateful to PayPal for giving me the opportunity to work on something so ambitious. <br><br>  So, I brought you up to date, now let's talk about TypeScript. <br><br>  In mid-December, I worked to integrate <code>paypal-scripts</code> into <code>sample-app</code> .  I also worked (and continue to work) on the <code>pp-react</code> , which is a library of components (buttons, windows, styles) suitable for reuse.  Since <code>paypal-scripts</code> supports modules that can be published, I used <code>react-scripts</code> to build <code>pp-react</code> .  A month ago, the <code>paypal-scripts</code> library included support for <a href="https://flow.org/">Flow</a> .  Such support was very easy to add to this library thanks to Babel. <br><br>  On December 12, when I was working on <code>pp-react</code> and the new version of the <code>sample-app</code> in terms of supporting Flow, I felt that I was already very tired of Flow (more on this I will tell below) and made an unexpected decision.  I wrote a letter to a <a href="https://twitter.com/xjamundx">colleague</a> asking him how he looked at what I would try to do so that TypeScript would be used in the <code>sample-app</code> .  He replied: "Yes, do it."  Then I arranged a survey on the Slack-channel <code>#paypal-scripts</code> , the results of which turned out that all of its participants support my idea.  For me, all this was enough to get to work.  About a week later, I completely translated <code>paypal-scripts</code> from Flow support to TypeScript support.  Most of this time was spent on teaching all the tools to recognize the <code>.ts</code> and <code>.tsx</code> file <code>.ts</code> , and on allowing the <code>paypal-scripts</code> package to test itself, which turned out to be quite a difficult task.  Then I spent a few days working on PR in the <code>sample-app</code> repository, which was aimed at using the new improved <code>paypal-scripts</code> library, and switching from <code>.js</code> files to <code>.ts</code> and.  <code>tsx</code> files  Then there were holidays, and then my PR was approved.  As a result, now in every new project in PayPal static TypeScript typing is used. <br><br>  Of course, after someone creates a new project, he can do whatever he wants with him.  Say, you can delete all the template code and write it on Elm, or on anything else.  This is completely normal.  But the authors of most projects adhere to those technologies that were used in their creation due to the so-called ‚Äú <a href="https://en.wikipedia.org/wiki/Default_effect">silence effect</a> ‚Äù. <br><br><h2>  <font color="#3AC1EF">Why did I go to TypeScript for so long?</font> </h2><br>  The question in the title of this section was often asked by TypeScript fans.  The fact is that I have been familiar with TypeScript for a long time, but I have had a relationship with this language for some time.  So, I remember how in about 2013 a colleague suggested that I translate a code of about 500 thousand lines into TypeScript.  Then I rejected this offer, but I do not particularly regret it, since at that time TS was a rather young language.  And <a href="https://javascriptair.com/episodes/2016-08-31/">once</a> I even interviewed <a href="https://twitter.com/ahejlsberg">Anders Hejlsberg</a> , the creator of TypeScript. <br><br>  That's why I kept out of TypeScript all this time. <br><br><h3>  <font color="#3AC1EF">‚ñçReason # 1.</font>  <font color="#3AC1EF">Fear of destroying the existing working environment based on Babel and ESLint</font> </h3><br>  For me, for a very long time, the main advantage of Flow in front of TypeScript was that Flow was better combined with the tools I was used to.  In particular, I have been using Babel and ESLint for many years, I like to write my own plugins for that and for another (you, too, by the way, can <a href="https://frontendmasters.com/courses/linting-asts/">learn</a> this).  I liked the fact that there were huge communities around Babel and ESLint.  As a result, I categorically did not want to refuse them.  As a matter of fact, it lasted until recent events, since if I were going to get into TypeScript, I would have had to leave both.  Of course, in the TypeScript world there is such a thing as TSLint, but the ESLint community is much larger. <br><br>  In Flow, I especially like the fact that in order to include it in my workflow, I need to perform only a few simple steps: <br><br><ol><li>  It is necessary to connect to Babel preset with the support of the appropriate syntax. </li><li>  It is necessary to add to the beginning of each file, the type check in which you want to organize, the construction of <code>// @flow</code> (there is a <a href="https://github.com/gajus/eslint-plugin-flowtype/tree/ae28b639670284956d32bdcacc4b9d53f7cd3c12">plugin</a> for ESLint that allows you to check it). </li><li>  Add a script to the project that allows you to run Flow to check types in the code base. </li></ol><br>  I really like the fact that type checking (using Flow) and building projects (using Babel, Webpack or Rollup) are separate.  I did not want to connect my life with TypeScript, in particular, due to the fact that its compiler, in any case, would not understand the Babel plug-ins of my own design.  And also - due to the fact that I had Flow - quite a tolerable tool. <br><br>  Now everything continues to work as usual.  Thanks to Babel 7 (in particular, we are talking about <a href="https://babeljs.io/docs/en/babel-preset-typescript">@ babel / preset-typescript</a> ), you can save the usual tools and, in addition, get at your disposal most of the capabilities of TypeScript.  The main problem is to make the tools accept files with extensions.  <code>ts</code> and <code>.tsx</code> , but, fortunately, this problem is solved. <br><br><h3>  <font color="#3AC1EF">‚ñçReason # 2.</font>  <font color="#3AC1EF">Contributors will have to learn TypeScript in order to contribute to the project.</font> </h3><br>  I‚Äôm talking mainly about open source, but the need to master TypeScript by those who want to contribute to projects also applies to what I do at work.  At the same time, I always believed that work projects should be typed, and this was achieved by means of Flow.  I tried not to use Flow in my open source projects, because those who decided to join them would have to master Flow.  I myself have always talked about this, but, subconsciously, always led a counter-argument, which is that typing is, by its nature, just one more form of testing, and those who want to contribute to the open source still have to understand with testing. <br><br>  Honestly, the refusal to use some kind of technology in the open source just because the potential contributor may not own it, seems to me a poor excuse for rejecting this technology.  And, as more and more programmers master TypeScript, I think that, perhaps, in some time I will write on TS and my own open source projects. <br><br><h3>  <font color="#3AC1EF">‚ñçReason number 3.</font>  <font color="#3AC1EF">Powerful output type flow</font> </h3><br>  I read <a href="https://jamie.build/adopting-flow-and-typescript.html">this</a> post, and I really liked it.  In particular, its last line, according to which when using Flow, types are added in order to make the error messages more pleasant, and not to identify them. <br><br>  The way it is.  Nowadays, Flow has a more powerful type inference system than TypeScript, and this is encouraging. <br><br><h3>  <font color="#3AC1EF">‚ñçReason # 4.</font>  <font color="#3AC1EF">Flow, like React, comes from Facebook</font> </h3><br>  I will sin against the truth if I say that I did not succumb to a very common misconception, which is to believe that if a certain company did something grandiose, then everything else that it does is automatically at the same high level.  This is not at all guaranteed.  I have nothing more to add here. <br><br><h3>  <font color="#3AC1EF">‚ñçPrice number 5.</font>  <font color="#3AC1EF">Big fanatics for TypeScript</font> </h3><br>  I think everyone knows that if someone is truly fascinated by some kind of technology, then he, without silence, tells everyone around her.  Does anyone use <a href="https://twitter.com/iamdevloper/status/676695839524282368">vim here</a> ?  And TypeScript followers are no exception. <br><br>  By the way, the TypeScript community is full of great people.  Kind, willing to help, full of enthusiasm, friendly.  But I had to intersect with such TS lovers who would call a person a fool only because he does not use TypeScript, or does not understand him, or uses something else.  They demonstrate a lack of ability to understand the interlocutor, and their position gives snobbery.  This is not the community I would like to be a part of.  I mean that the enthusiasm caused by the technology chosen by someone is great, but if it goes so far that a fan of this technology starts to oppress those who have chosen something else, it is already <a href="https://twitter.com/kentcdodds/status/1081569132573646848">very sad</a> . <br><br>  I still have some concerns about this.  But I hope that together we will make the TypeScript community more positive. <br><br>  Now, when I talked about the reasons why I was in no hurry to switch to TypeScript, I‚Äôll tell you what does not suit me in Flow. <br><br><h2>  <font color="#3AC1EF">Flow problems</font> </h2><br>  As I said, at a certain point I was very tired of Flow.  Here is one of the <a href="https://twitter.com/kentcdodds/status/997571730536321025">tweets</a> in which I shared one of the main problems I encountered when working with Flow.  It consisted in the fact that in order for Flow to work, it is regularly necessary, after its unsuccessful launch, to stop it, and then start it again.  Here's another one of my <a href="https://twitter.com/kentcdodds/status/1019704559692894209">tweets</a> , where we are talking about the wrong work Flow. <br><br>  I was finally pushed away from Flow regularly arising problems with its reliability.  Plug-ins for editors worked, so to speak, with varying success (I must admit that I did not work with Nuclide, and maybe if I tried it, my life would have been different, but I tried working with Flow in Atom and in VSCode), I constantly faced with some weirdness.  This was very annoying, as it undermined my faith in the type control system I used. <br><br>  When I saw <a href="https://twitter.com/jamiebuilds/status/1064649666275340288">this</a> tweet in November, he expressed what I was already thinking about;  A short story about the transition from Flow to TypeScript coincided with my vision of the situation.  I honestly could not stop thinking about how to take up TypeScript.  In the end, I did it and I'm very happy about it. <br><br><h2>  <font color="#3AC1EF">Questions and answers</font> </h2><br><h3>  <font color="#3AC1EF">‚ñçWhy don't you use TSLint?</font> </h3><br>  In fact, I implemented <a href="https://palantir.github.io/tslint/">TSLint</a> support in <code>paypal-script</code> .  It was one of the first scripts that I earned.  I was going to decide whether to use TSLint or ESLint based on whether there is a <code>tsconfig.json</code> file in the project.  But then I remembered that we have some own-designed ESLint plug-ins (for example, to check internationalization), which I did not want to waste time rewriting in the form of plug-ins for TSLint.  In addition, the TSLint command line interface has fewer features than ESLint, and it is not well suited for working with <code>paypal-scripts</code> .  Maybe after a while I will again look at TSLint. <br><br>  Yes, I would like to point out that the ESLint community is still much larger than the TSLint community.  In addition, I gradually realize that a good type control system makes the lint plugins useless.  In the meantime, I use ESLint with TypeScript, and what turns out looks quite good.  <a href="https://www.youtube.com/watch%3Fv%3DPl2heYVwQ-Q%26list%3DPLV5CVI1eNcJgCrPH_e6d57KRUTiDZgs0u">Here is</a> my video on this topic. <br><br>  And by the way, I have a feeling that the TypeScript team is leaning towards ESLint, so I suppose I made the right choice. <br><br><h3>  <font color="#3AC1EF">‚ñçWhy didn‚Äôt you choose Reason?</font> </h3><br>  I, in correspondence with <a href="https://twitter.com/kentcdodds/status/997571730536321025">this</a> tweet, responded to the offer to try TypeScript, saying that it would be better to switch from Flow to ReasonML.  In fact, I often talked about switching to <a href="https://reasonml.github.io/">Reason</a> before switching to TypeScript.  One of the main reasons for such statements was my desire to preserve the usual tools, which I have already mentioned.  But, since I didn‚Äôt have to give up anything, TypeScript was more attractive to me.  I still like Reason very much, but switching to Reason would mean a huge change for many PayPal employees.  And although I think they would cope with it, I believe that it will be more comfortable for them to use TypeScript than to try to learn a new language. <br><br>  Probably, if I chose Reason, my PR would never get into the <code>sample-app</code> repository.  One thing is to encourage colleagues to use, in essence, what can be called ‚Äútyped JavaScript‚Äù (especially if they do not need support for certain configurations), and a completely different conversation will take place if you try to encourage colleagues to use a completely different language and a completely different ecosystem (and it doesn‚Äôt matter how well this language interacts with JS and npm). <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  Now I would like to <a href="https://twitter.com/kentcdodds/status/1081598314934460416">thank</a> all Twitter users, under whose influence my vision of TypeScript was formed.  As I said, the fact that the <code>paypal-scripts</code> library got into the <code>sample-app</code> repository in PayPal is probably the main achievement of my career.  And I think that the fact that now all new application templates in the company are equipped with TypeScript support by default is a huge plus for all PayPal employees.  I am immensely pleased that I have chosen TypeScript. <br><br>  <b>Dear readers!</b>  Do you think it is worthwhile for those who use Flow to look towards TypeScript? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/437986/">https://habr.com/ru/post/437986/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>