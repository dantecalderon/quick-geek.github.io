<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JavaScript: Public and private class fields</title>
  <meta name="description" content="Several sentences extend existing class syntax in JavaScript with new functionality. This article explains the new class public field syntax in V8 v7....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>JavaScript: Public and private class fields</h1><div class="post__text post__text-html js-mediator-article"><p>  Several sentences extend existing class syntax in JavaScript with new functionality.  This article explains the new class public field syntax in V8 v7.2 and Chrome 72, as well as the upcoming private fields. </p><br><p>  Here is an example of the code that creates an instance of the <em>IncreasingCounter</em> class: </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> counter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IncreasingCounter(); counter.value; <span class="hljs-comment"><span class="hljs-comment">// logs 'Getting the current value!' // ‚Üí 0 counter.increment(); counter.value; // logs 'Getting the current value!' // ‚Üí 1</span></span></code> </pre> <br><p>  Note that accessing <em>value</em> performs some code (outputting a message to the log) before returning a value.  Now ask yourself: how would you implement this class in JavaScript? </p><a name="habracut"></a><br><h3 id="klassy-es2015">  ES2015 Classes </h3><br><p>  Below is an example of how the <em>IncreasingCounter</em> class can be implemented using the ES2015 syntax: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IncreasingCounter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._count = <span class="hljs-number"><span class="hljs-number">0</span></span>; } get value() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Getting the current value!'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._count; } increment() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._count++; } }</code> </pre> <br><p>  The class provides a getter <em>value</em> and a method for incrementing the value in the prototype.  More curiously, the class has a constructor that triggers the <em>_count</em> property and sets its initial value to 0. We now use the underscore prefix to mean that <em>_count</em> should not be used directly outside the class, but this is just a convention;  in reality, this is not a private property, and this semantics is not defined in the language itself. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> counter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IncreasingCounter(); counter.value; <span class="hljs-comment"><span class="hljs-comment">// logs 'Getting the current value!' // ‚Üí 0 // Nothing stops people from reading or messing with the // `_count` instance property. counter._count; // ‚Üí 0 counter._count = 42; counter.value; // logs 'Getting the current value!' // ‚Üí 42</span></span></code> </pre> <br><h3 id="publichnye-polya-klassov">  Public class fields </h3><br><p>  The new syntax for public fields makes it easy to define a class: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IncreasingCounter</span></span></span><span class="hljs-class"> </span></span>{ _count = <span class="hljs-number"><span class="hljs-number">0</span></span>; get value() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Getting the current value!'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._count; } increment() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._count++; } }</code> </pre> <br><p>  The <em>_count</em> property <em>is</em> now succinctly declared at the beginning of the class.  We no longer need a constructor just to define some fields.  Fine! </p><br><p>  However, <em>_count</em> is still a public property.  And in this particular example, we want to prevent accessing this field directly. </p><br><h3 id="privatnye-polya-klassov">  Private class fields </h3><br><p>  This is where private fields come to the rescue.  The new syntax for private fields is similar to the syntax of public fields, except that <a href="">you mark them as private using the <em>#</em> symbol</a> .  You may think that <em>#</em> is just part of the field name: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IncreasingCounter</span></span></span><span class="hljs-class"> </span></span>{ #count = <span class="hljs-number"><span class="hljs-number">0</span></span>; get value() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Getting the current value!'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.#count; } increment() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.#count++; } }</code> </pre> <br><p>  Private fields are not available outside the body of the class: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> counter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IncreasingCounter(); counter.#count; <span class="hljs-comment"><span class="hljs-comment">// ‚Üí SyntaxError counter.#count = 42; // ‚Üí SyntaxError</span></span></code> </pre> <br><h3 id="staticheskie-svoystva">  Static properties </h3><br><p>  Class field syntax can be used to create public and private static properties and methods, as shown below: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FakeMath</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// `PI` is a static public property. static PI = 22 / 7; // Close enough. // `#totallyRandomNumber` is a static private property. static #totallyRandomNumber = 4; // `#computeRandomNumber` is a static private method. static #computeRandomNumber() { return FakeMath.#totallyRandomNumber; } // `random` is a static public method (ES2015 syntax) // that consumes `#computeRandomNumber`. static random() { console.log('I heard you like random numbers‚Ä¶') return FakeMath.#computeRandomNumber(); } } FakeMath.PI; // ‚Üí 3.142857142857143 FakeMath.random(); // logs 'I heard you like random numbers‚Ä¶' // ‚Üí 4 FakeMath.#totallyRandomNumber; // ‚Üí SyntaxError FakeMath.#computeRandomNumber(); // ‚Üí SyntaxError</span></span></code> </pre> <br><h3 id="uproschenie-raboty-s-podklassami">  Simplify subclassing </h3><br><p>  The advantages of class field syntax become more obvious when working with subclasses that introduce additional fields.  Imagine the following Base <em>Animal</em> class: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(name) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; } }</code> </pre> <br><p>  To create a <em>Cat</em> subclass that adds a new property to an instance, you previously needed to call <em>super ()</em> to call the constructor of the base <em>Animal</em> class before creating this property: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cat</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(name) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(name); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.likesBaths = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } meow() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Meow!'</span></span>); } }</code> </pre> <br><p>  There is a lot of template code just to indicate that cats do not like to take a bath.  Fortunately, the new class field syntax eliminates the need to define this constructor with an awkward <em>super ()</em> call: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cat</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{ likesBaths = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; meow() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Meow!'</span></span>); } }</code> </pre> <br><h3 id="itogo">  Total </h3><br><p>  Public class fields are available starting with V8 v7.2 and Chrome 72. It is planned to release private class fields soon. </p></div><p>Source: <a href="https://habr.com/ru/post/438202/">https://habr.com/ru/post/438202/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>