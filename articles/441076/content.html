<div class="post__text post__text-html js-mediator-article"><p>  In this article I would like to share my experience on splitting bundles for a multi-page site using Webpack 4. First, we will create our own entry point for each page.  Consider the example of 4 pages: </p><br><pre><code class="plaintext hljs">const path = require("path"); const PATHS = { src: path.resolve(process.cwd(), "src"), dist: path.resolve(process.cwd(), "dist") }; module.exports = { entry: { common: `${PATHS.src}/js/common`, index: `${PATHS.src}/js/index`, contacts: `${PATHS.src}/js/contacts`, about: `${PATHS.src}/js/about`, } }</code> </pre> <br><p>  At assembly for each page the bandl will be created.  I put common scripts for all pages to the <code>common</code> entry point.  To connect our bundles to the pages, we will use the Webpack plugin <a href="https://webpack.js.org/plugins/html-webpack-plugin/">HtmlWebpackPlugin</a> . </p><br><p>  Consider an example: </p><br><pre> <code class="plaintext hljs"> module.exports = { ... plugins: [ new HtmlWebpackPlugin({ filename: `${PATHS.dist}/index.html`, template: `${PATHS.dist}/index.html`, chunks: ["index", "common"] }) ... ] ... };</code> </pre> <a name="habracut"></a><br><p>  In the <code>chunks</code> indicate the bundles necessary for this page (sequence: from right to left).  Thus, the page will be connected first with common scripts, and then the scripts needed separately for this page. </p><br><p>  If we have common modules / third-party libraries connected on different pages, we will create common bundles for these pages. </p><br><p>  Use Webpack plugin <a href="https://webpack.js.org/plugins/split-chunks-plugin/">SplitChunksPlugin</a> .  Actually here is the configuration: </p><br><pre> <code class="plaintext hljs">module.exports = { optimization: { splitChunks: { chunks: "all", minSize: 1, minChunks: 2 } } }</code> </pre> <br><p>  After the assembly, we will get bundles separately for each page and bundles that divide our pages. </p><br><pre> <code class="plaintext hljs">index.js contacts.js common.js about.js vendors~about-us~index.js vendors~about-us~contacts.js</code> </pre> <br><p>  In the vendors ~ about-us ~ index.js bundle, common scripts for <code>about-us</code> and <code>index</code> will be submitted, which will be cached by the browser, and when switching from the page to <code>about</code> will be already downloaded by the browser, and you will only need to download the bundle <code>about.js</code> . </p><br><p>  The names of the chunks can be changed in the config of this plugin. </p><br><p>  To connect these bundles correctly for each of our pages we will use HtmlWebpackPlugin.  The configuration is the same as in the beginning of the article.  Only here you will have to install an alpha version of this plugin, because at the time of this writing, this plugin did not connect our shared chunks, but only connected entry points. </p><br><pre> <code class="plaintext hljs">npm i --save-dev html-webpack-plugin@next</code> </pre> <br><p>  After the build, we will get this code in index.html: </p><br><pre> <code class="plaintext hljs">&lt;script src="js/common.js"&gt;&lt;/script&gt; &lt;script src="js/vendors~about-us~index.js"&gt;&lt;/script&gt; &lt;script src="js/index.js"&gt;&lt;/script&gt;</code> </pre> </div>