<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to set up Continuous Deployment for your project: personal experience</title>
  <meta name="description" content="Translated for you by Julius Minmo ‚Äôs article on setting up Continuous Deployment for your project. Automation allows you to save a lot of time and ef...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>How to set up Continuous Deployment for your project: personal experience</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/3f7/449/9fb/3f74499fbc2c0f4ee1f44c634962939b.png"><br><br>  Translated for you by <a href="https://medium.freecodecamp.org/how-to-set-up-continuous-deployment-in-your-home-project-the-easy-way-41b84a467eed">Julius Minmo</a> ‚Äôs <a href="https://medium.freecodecamp.org/how-to-set-up-continuous-deployment-in-your-home-project-the-easy-way-41b84a467eed">article</a> on setting up Continuous Deployment for your project.  Automation allows you to save a lot of time and effort.  The article will be useful, first of all, for novice programmers. <br><br>  Continuous deployment is a great thing.  Once we commit a project and then everything happens automatically, the observation of this process is simply hypnotizing.  In this article I will show how you can configure everything for a home project. <br><a name="habracut"></a><br><blockquote>  <b>We remind:</b> <i>for all readers of "Habr" - a discount of 10,000 rubles when recording for any Skillbox course on the promotional code "Habr".</i> <br><br>  <b>Skillbox recommends:</b> Online course <a href="https://skillbox.ru/webdev/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DWEBDEV%26utm_content%3Darticles%26utm_term%3Dinhouseproject">"Profession Frontend Developer"</a> . <br></blockquote>  So, first, let's look at the diagram, which explains the difference between Continuous Delivery and Continuous Deployment. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/067/06d/2c0/06706d2c0caf97f57ceb16ded3605527.png"><br><br>  In the case of a home project, we select Continuous Deployment, since no one but you (the project) works with it and no one depends on it.  Well, since in most cases I want the changes to be immediately deployed, the choice is obvious.  If you later want to change the process, you can always do it. <br><br>  You will learn the following: <br><br><ul><li>  How to make a dockerfile. </li><li>  How to upload a project to GitHub. </li><li>  How to automatically build a docker image on Docker Hub. </li><li>  How to automatically download and launch an image from Watchtower. </li></ul><br>  What is needed: <br><br><ul><li>  A basic understanding of what Docker and Dockerfile are. </li><li>  Installed git. </li><li>  Account at &lt;a href='https://hub.docker.com/"&gt; Docker Hub </li></ul><br>  Server (physical or virtual) running Docker. <br><br>  Here are my <a href="https://github.com/juligreen/easy_CD_tutorial">GitHub</a> and <a href="https://hub.docker.com/r/juligreen/easy_cd_tutorial">Docker Hub</a> <a href="https://github.com/juligreen/easy_CD_tutorial">repositories</a> that I work with. <br><br><h3>  Why do I use Docker? </h3><br>  It makes it possible to use the same environment for different processes, which excludes the appearance of <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D0%25B5%25D0%25B9%25D0%25B7%25D0%25B5%25D0%25BD%25D0%25B1%25D0%25B0%25D0%25B3">heisenbags</a> and the problem ‚Äúit only works on my machine‚Äù.  Containers are isolated, which is good from a cybersecurity point of view.  There are more advantages, but in my opinion, these two are the main ones. <br><br>  <b>Dockerfile setup</b> <br><br>  First we need a Dockerfile for the project.  This file is always called exactly and has no extension.  It is always located in the main project directory. <br><br>  It starts with the FROM operator, which tells Docker which basic image we start with.  You can draw an analogy with painting.  We can imagine this image as a finished canvas with a painted background and the missing main element of the composition (your program). <br><br>  Next, copy the project files into the container using the COPY ... command. <br><br>  It allows you to pick up files from the initial location to the current location - of course, inside the container. <br><br>  Next, you need to install the dependencies, for this I use Python PIP.  The main thing to remember is the launch of commands in the container with RUN. <br><br>  <i>From python: 3.7</i> <i><br></i>  <i>COPY ..</i> <i><br></i>  <i>RUN pip install -r requirements.txt</i> <br><br>  It's simple, right?  Now you can run the program in a container. <br><br>  <i>Cmd ["python", "./my_script.py"]</i> <br><br>  Now everything, you have finished the Dockerfile and can manually create an image and a container.  Now just skip this moment. <br><br>  Now let's create a repository in GitHub, but remember that the line ‚ÄúInitialize this repository with a README‚Äù doesn't need to be touched. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/849/d2b/e01/849d2be018ed12e984dc3aeab0ed77ab.png"><br><br>  Now copy the URL. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/00b/908/e1c/00b908e1c752e2eafda336ee1c23d0cb.png"><br><br>  Open cmd / shell project root directory.  Now you need to initialize the repository, add files, configure remote mode, commit files and send the project to GitHub. <br><br><pre><code class="plaintext hljs">git init git add * git remote add origin https://github.com/&lt;user&gt;/&lt;repository&gt;.git git commit -a -m "Make Dockerfile ready for CD" git push -u origin master</code> </pre> <br>  If everything is OK, the GitHub repository will look like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/78b/3b1/5a4/78b3b15a44f8e5a5c17497652204f67f.png"><br><br>  We are halfway to success! <br><br>  Now you need to connect GitHub to Docker Hub.  To do this, go to the account settings. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7e2/006/4c6/7e20064c60289e6965ddbf21ca540c4b.png"><br><br>  Scroll down and connect. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dff/cc6/7f7/dffcc67f700952d39c6e6c7f82eb3614.png"><br><br>  Now create a repository in the Docker Hub. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ae/424/472/3ae424472fecc07a62001cc3c0f21308.png"><br><br>  Call your repo and click on the icon GitHub or Bitbucket.  Then we select the organization (usually your nickname) and the name of the project.  If desired, the settings can be changed. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ed/a42/d4c/3eda42d4c16e4424ae70f99d2628f30f.png"><br><br>  And now the last step - here we need a Watchtower on the target machine.  This is a program that allows you to automate the process.  If an update appears, Watchtower removes the original container and creates a container from the new image with the same settings. <br><br>  The good news is that you can install Watchtower with Docker, for this you need to enter the following command into the terminal: <br><br><pre> <code class="plaintext hljs">docker run -d --name watchtower -v /var/run/docker.sock:/var/run/docker.sock v2tec/watchtower</code> </pre> <br>  And now we launch the container for your project! <br><br><pre> <code class="plaintext hljs">docker run -d --name &lt;my-project&gt; &lt;username&gt;/&lt;my-project&gt;</code> </pre> <br>  -d allows the program to work in the background, so that it does not close if you close the terminal. <br><br>  In conclusion, if you send a commit to the GitHub repository, the Docker Hub will automatically create a Docker image.  Then the Watchtower will already interact with it. <br><br>  As for the tests, you can use Travis CI.  You can read <a href="https://docs.travis-ci.com/user/tutorial/">about it here</a> , but the bottom line is that you add another file to your repository, which contains instructions for an external server to run unit tests or any other instructions. <br><br><blockquote>  <b>Skillbox recommends:</b> <br><br><ul><li>  Online course <a href="https://skillbox.ru/python/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DPTNDEV%26utm_content%3Darticles%26utm_term%3Dinhouseproject">"Python-developer from scratch</a> . <a href="https://skillbox.ru/python/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DPTNDEV%26utm_content%3Darticles%26utm_term%3Dinhouseproject">"</a> </li><li>  Practical annual course <a href="https://skillbox.ru/php/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DPHPDEV%26utm_content%3Darticles%26utm_term%3Dinhouseproject">"PHP-developer from scratch to PRO"</a> . </li><li>  Educational online course <a href="https://skillbox.ru/java/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DJAVDEV%26utm_content%3Darticles%26utm_term%3Dinhouseproject">"Profession Java developer"</a> . </li></ul></blockquote></div><p>Source: <a href="https://habr.com/ru/post/439632/">https://habr.com/ru/post/439632/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>