<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to integrate Zimbra Collaboration Suite with Active Directory</title>
  <meta name="description" content="Many enterprises, especially in the CIS, already have an established IT infrastructure, which often uses a tool such as Microsoft's Active Directory t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>How to integrate Zimbra Collaboration Suite with Active Directory</h1><div class="post__text post__text-html js-mediator-article">  Many enterprises, especially in the CIS, already have an established IT infrastructure, which often uses a tool such as Microsoft's Active Directory to manage and authenticate users.  And often in such enterprises, when they begin to plan the implementation of the Zimbra Collaboration Suite, the question arises whether ZCS can fit into their infrastructure normally and use Microsoft AD to authenticate users?  Well, Zimbra is quite capable of working in conjunction with Active Directory and now we will talk about how to achieve this. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e98/93d/7d9/e9893d7d9f995c2a24dce02df7fa5d51.png" alt="image"><a name="habracut"></a><br><br>  So, suppose that in the infrastructure of your enterprise Active Directory is located on the <b>domain.local</b> domain, and Zimbra is supposed to be installed on the <b>mail.domain.com</b> domain.  In the process of integrating Zimbra and Active Directory, we will connect AD as an external LDAP for ZCS and therefore we recommend that you immediately ban users from changing their password themselves.  We also note that to verify the success of the integration of Zimbra and Active Directory, on the server with AD it is recommended to have at least one account with a known login / password pair to verify the success of connecting two information systems. <br><br>  AD to ZCS is connected to the Zimbra administration console at <b><a href="https://mail.domain.com/">mail.domain.com</a> : 7071 / zimbraAdmin /</b> .  Here we have to select the Configure item in the left sidebar, and then the Domains sub-item.  In the list of domains, now we need to select the one that we will use in conjunction with AD, and by clicking on the selected domain right mouse button, select the item ‚ÄúConfigure Authentification‚Äù.  After that, the external LDAP settings dialog will appear on the screen, in which we will ‚Äúfriends‚Äù Zimbra with AD. <br><br>  On the Authentification Mode page, select the ‚ÄúExternal Active Directory‚Äù item, and then on the Authentification Settings page, enter information about the server with AD.  You will be required to enter the domain name, ip-address of the server and the port through which access to AD is provided, and the next page, called LDAP Bind, is suggested to be left blank. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/50c/dbe/bbd/50cdbebbd6fb320f3b2a04f2aadd9a5a.png" alt="image"><br><br>  In the Authentification Config Summary window, you can verify that Zimbra has successfully connected to AD by entering the correct login / password pair of any user.  In case the connection is successful, Zimbra will automatically calculate the Bind DN for this user.  You can then leave the External Group Settings and Domain Configuration Complete pages as they are.  This completes the integration of Zimbra with AD and we can only create existing users from AD in Zimbra for successful synchronization between information systems. <br><br>  With a small number of accounts, this can be done manually, but if there are indeed many accounts, it would be best to automate this process using the Auto-provisioning function.  To do this, we need to go to the Zimbra server and perform a number of manipulations on the command line there: <br><br><pre><code class="plaintext hljs">su zimbra zmprov md domain.com zimbraAutoProvMode LAZY zmprov md domain.com zimbraAutoProvLdapURL "ldap://domain.local:389" zmprov md domain.com zimbraAutoProvLdapStartTlsEnabled FALSE zmprov md domain.com zimbraAutoProvLdapAdminBindDn "zimbra@domain.local" zmprov md domain.com zimbraAutoProvLdapAdminBindPassword PassworD zmprov md domain.com zimbraAutoProvLdapSearchBase "ou=User,dc=domain,dc=local)" zmprov md domain.com zimbraAutoProvLdapSearchFilter "(samAccountName=%u)" zmprov md domain.com zimbraAutoProvLdapBindDn "%u@%d" zmprov md domain.com zimbraAutoProvAccountNameMap sAMAccountName zmprov md domain.com +zimbraAutoProvAttrMap "sn=sn" +zimbraAutoProvAttrMap "description=description" +zimbraAutoProvAttrMap "cn=displayName" +zimbraAutoProvAttrMap "givenName=givenName" +zimbraAutoProvAttrMap "zimbraMailAlias=mail" zmprov md domain.com zimbraAutoProvNotificationFromAddress admin@domain.com zmprov md domain.com zimbraAutoProvNotificationSubject "–ú—ã —Ä–∞–¥—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤–∞—Å –Ω–∞ –±–æ—Ä—Ç—É –Ω–∞—à–µ–≥–æ –ø–æ—á—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞" zmprov md domain.com zimbraAutoProvNotificationBody "–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –±—ã–ª —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –ø–æ —Ä–∞–±–æ—Ç–µ —Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç–æ–π, –ø–µ—Ä–µ–π–¥—è –ø–æ –¥–∞–Ω–Ω–æ–π —Å—Å—ã–ª–∫–µ" zmprov md domain.com zimbraAutoProvBatchSize 20 zmprov md domain.com zimbraAutoProvAuthMech LDAP zmcontrol restart</code> </pre> <br>  With this configuration, the user account will be automatically created on the Zimbra server when you first try to log into the web client using the existing login / password pair.  Note that in some cases, for the autotune to work correctly, it may be necessary to change the port number from 389 to 3268. <br><br>  After completing all these steps, your users will be able to log into their mail on the server with Zimbra using a username / password pair from AD, which will greatly simplify the management of the company's IT infrastructure </div><p>Source: <a href="https://habr.com/ru/post/437240/">https://habr.com/ru/post/437240/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>