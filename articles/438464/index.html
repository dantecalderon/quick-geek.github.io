<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SciPy, graph algorithms</title>
  <meta name="description" content="SciPy (pronounced sai pay) is a math application package based on the Numpy Python extension. It greatly extends the capabilities of Python by providi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>SciPy, graph algorithms</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/s2/55/ud/s255ud2nf0wnsogfo3bbd7etiko.jpeg" alt="image"></p><br><p>  SciPy (pronounced sai pay) is a math application package based on the Numpy Python extension.  It greatly extends the capabilities of Python by providing the user with commands and high-level classes for managing data and visualizing it.  With SciPy, an interactive Python session turns into the same comprehensive data processing and prototyping environment for complex systems like MATLAB, IDL, Octave, R-Lab and SciLab. </p><a name="habracut"></a><br><h3 id="vvedenie">  Introduction </h3><br><p>  The SciPy package is recommended to be installed as part of Anaconda.  It is also advisable to get familiar with the basics of Python and have Numpy documentation on hand.  For the sake of brevity and further convenience, we will agree that the main packages (numpy, scipy and matplotlib) will be imported as follows: </p><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> mpl <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt</code> </pre> <br><p>  This is the official import agreement used in the NumPy, SciPy source code and documentation.  Compliance with these conventions in your code is optional, but strongly recommended.  Each of the packages should be imported separately as follows: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> linalg, optimize</code> </pre> <br><p>  SciPy and NumPy have full documentation that covers almost all of their functions.  They are available at <a href="https://docs.scipy.org/">https://docs.scipy.org/</a> in HTML and PDF formats.  Some parts may be incomplete or outdated, because  documentation is constantly under development.  Since SciPy is a volunteer organization and depends on the community, your participation from providing feedback to improving the documentation and code is welcome and actively encouraged. </p><br><h3 id="algoritmy-na-razrezhennyh-grafah-scipycsgraph">  Algorithms on sparse graphs (scipy.csgraph) </h3><br><img src="https://habrastorage.org/webt/ru/ha/xd/ruhaxdt-r_ec9nnbjqopzrfd1io.jpeg"><br><p>  <em>Lewis Carroll, Merry Christmas 1877</em> <br><br></p><br><p>  Consider the use of the package scipy.csgraph on the example of the children's game " <a href="https://en.wikipedia.org/wiki/Word_ladder">Stairs of words</a> ", invented by Lewis Carroll at Christmas 1877.  In this game you need to find the path between the words, carrying out the replacement one letter at a time.  For example, you can trace the path from a monkey to a human by associating the words ‚Äúape‚Äù and ‚Äúman‚Äù as follows: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>m</mi><mi>a</mi><mi>p</mi><mi>e</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>o</mi><mi>a</mi><mi>p</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>o</mi><mi>a</mi><mi>i</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>o</mi><mi>b</mi><mi>i</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>o</mi><mi>b</mi><mi>i</mi><mi>g</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>o</mi><mi>b</mi><mi>a</mi><mi>g</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>o</mi><mi>m</mi><mi>a</mi><mi>g</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>o</mi><mi>m</mi><mi>a</mi><mi>n</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="49.048ex" height="2.419ex" viewBox="0 -780.1 21118 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-72" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-6D" x="701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-61" x="1580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-70" x="2109" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-65" x="2613" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-74" x="3329" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-6F" x="3691" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-61" x="4176" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-70" x="4706" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-74" x="5209" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-74" x="5821" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-6F" x="6182" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-61" x="6668" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-69" x="7197" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-74" x="7543" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-74" x="8154" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-6F" x="8516" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-62" x="9001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-69" x="9431" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-74" x="9776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-74" x="10388" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-6F" x="10749" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-62" x="11235" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-69" x="11664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-67" x="12010" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-74" x="12740" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-6F" x="13102" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-62" x="13587" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-61" x="14017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-67" x="14546" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-74" x="15277" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-6F" x="15638" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-6D" x="16124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-61" x="17002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-67" x="17532" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-74" x="18262" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-6F" x="18624" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-6D" x="19109" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-61" x="19988" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-6E" x="20517" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>r</mi><mi>m</mi><mi>a</mi><mi>p</mi><mi>e</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>o</mi><mi>a</mi><mi>p</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>o</mi><mi>a</mi><mi>i</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>o</mi><mi>b</mi><mi>i</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>o</mi><mi>b</mi><mi>i</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>o</mi><mi>b</mi><mi>a</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>o</mi><mi>m</mi><mi>a</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>o</mi><mi>m</mi><mi>a</mi><mi>n</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> \ rm ape \ to apt \ to ait \ to bit \ to big \ to bag \ to mag \ to man </script></p><br><p>  Note that each step involves changing only one letter of a word.  This is just one possible path from monkey to man, but is this the shortest path?  Thus, it is necessary to find the shortest path (ladder) between two given words.  This problem can be solved with the help of the scipy.sparse.csgraph package. </p><br><p>  First we need a list of valid words.  Many operating systems have such a built-in list.  For example, in linux, a list of words can be found in one of the following places: </p><br><pre> <code class="plaintext hljs">/usr/share/dict /var/lib/dict</code> </pre> <br><p>  Another source of words are dictionaries that are available on various sites on the Internet (search your favorite search engine).  The system word list is a file with one word per line.  To use the system word list, read it as follows: </p><br><pre> <code class="python hljs">word_list = open(<span class="hljs-string"><span class="hljs-string">'/usr/share/dict/words'</span></span>).readlines() word_list = map(str.strip, word_list)</code> </pre> <br><p>  Since  we are looking for words of three letters, then we will select only the necessary words from the general list.  We also exclude words that begin with an uppercase (proper nouns) or contain non-letter characters, such as apostrophes and hyphens.  At the end, check the size of the resulting list of words. </p><br><pre> <code class="python hljs">word_list = [word <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> word_list <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(word) == <span class="hljs-number"><span class="hljs-number">3</span></span>] word_list = [word <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> word_list <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> word[<span class="hljs-number"><span class="hljs-number">0</span></span>].islower()] word_list = [word <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> word_list <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> word.isalpha()] word_list = list (map (str.lower, word_list)) len (word_list)</code> </pre> <br><pre> <code class="plaintext hljs">591</code> </pre> <br><p>  Now we have a list of 591 three-letter words (the exact number may vary depending on the particular dictionary used).  Each of these words is the top of the graph.  Create edges connecting vertices (pairs of words) that differ only in one letter. <br>  We use a fairly efficient way for which we need some manipulations with the numpy array: </p><br><pre> <code class="python hljs">word_list = np.asarray(word_list) word_list.sort() <span class="hljs-comment"><span class="hljs-comment"># —Å–æ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ word_list.dtype # —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö - —Å–∏–º–≤–æ–ª—ã Unicode –≤ Python</span></span></code> </pre> <br><pre> <code class="plaintext hljs">dtype('&lt;U3')</code> </pre> <br><p>  Now we have an array in which each record contains three Unicode characters.  We would like to find all pairs that have exactly one character.  Let's start with the transformation of each word into a three-dimensional vector: </p><br><pre> <code class="python hljs">word_bytes = np.ndarray((word_list.size, word_list.itemsize), dtype=<span class="hljs-string"><span class="hljs-string">'uint8'</span></span>, buffer=word_list.data) <span class="hljs-comment"><span class="hljs-comment"># –¥–ª–∏–Ω–∞ –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ —é–Ω–∏–∫–æ–¥–∞ - 4 –±–∞–π—Ç–∞. –ù–∞–º –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π –±–∞–π—Ç # –∫–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ —Å–æ—Å—Ç–æ–∏—Ç —Ç–æ—á–Ω–æ –∏–∑ —Ç—Ä–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤ word_bytes = word_bytes[:, ::word_list.itemsize//3] word_bytes.shape</span></span></code> </pre> <br><pre> <code class="plaintext hljs">(591, 3)</code> </pre> <br><p>  We recall that the Hamming distance is the number of different characters in two vectors of the same length.  Using Hamming distance, we determine the length of the edges connecting the pairs of words.  In the ladder of words are connected every two words with a distance equal to <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.371ex" height="2.419ex" viewBox="0 -780.1 3604 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-63" x="1781" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMAIN-31" x="2215" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-4E" x="2715" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>N</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-2"> \ frac {1} {N} </script>  where <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi><mo>=</mo><mn>3</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.325ex" height="2.057ex" viewBox="0 -780.1 2723.1 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMAIN-3D" x="1166" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/438464/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhx8TipbV0RyilsOjLEu7jP0scHZw#MJMAIN-33" x="2222" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi><mo>=</mo><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-3"> N = 3 </script>  - the number of letters in a word: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.spatial.distance <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pdist, squareform <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.sparse <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> csr_matrix hamming_dist = pdist (word_bytes, metric = <span class="hljs-string"><span class="hljs-string">'hamming'</span></span>) graph = csr_matrix (squareform (hamming_dist &lt; <span class="hljs-number"><span class="hljs-number">1.5</span></span> / <span class="hljs-number"><span class="hljs-number">3</span></span>))</code> </pre> <br><p>  When comparing distances, lax equality is used, because otherwise the result for floating point values ‚Äã‚Äãmay be unstable.  Inequality gives the desired result in the event that the two characters in the word do not match.  Now that the graph has been set, we will perform the shortest path search between any two words on the graph: </p><br><pre> <code class="python hljs">i1 = word_list.searchsorted (<span class="hljs-string"><span class="hljs-string">'ape'</span></span>) i2 = word_list.searchsorted (<span class="hljs-string"><span class="hljs-string">'man'</span></span>)</code> </pre> <br><p>  Now we need to find the shortest path between these two vertices on the graph.  To do this, use the Dijkstra algorithm, which allows you to find all possible distances for the specified vertex: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.sparse.csgraph <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dijkstra distances, predecessors = dijkstra(graph, indices=i1, return_predecessors=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) print(distances[i2])</code> </pre> <br><pre> <code class="plaintext hljs">5.0</code> </pre> <br><p>  So, we see that the shortest path between the monkey and man contains only five steps.  We can use the predecessors returned by the algorithm to restore this path: </p><br><pre> <code class="python hljs">path = [] i = i2 <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> i != i1: path.append(word_list[i]) i = predecessors[i] path.append(word_list[i1]) print(path[::<span class="hljs-number"><span class="hljs-number">-1</span></span>])</code> </pre> <br><pre> <code class="plaintext hljs">['ape', 'apt', 'opt', 'oat', 'mat', 'man']</code> </pre> <br><p>  The length of the stairs is three steps less than in the initial example.  Using other tools of the module, you can find the answer to other questions.  For example, are there words with three letters that are not connected to a ladder of words?  This is the task of determining the connectivity of the graph: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.sparse.csgraph <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> connected_components N_components, component_list = connected_components(graph) print(N_components)</code> </pre> <br><pre> <code class="plaintext hljs">15</code> </pre> <br><p>  In our example, for three-letter words there are 15 related components: that is, 15 different sets of words without paths in between.  How many words are in each of these sets?  We can learn this from the list of components: </p><br><pre> <code class="python hljs">[np.sum(component_list == i) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(N_components)]</code> </pre> <br><pre> <code class="plaintext hljs">[577, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]</code> </pre> <br><p>  We obtained one large graph, which includes 577 vertices, as well as 14 isolated graphs.  Let's look at these words: </p><br><pre> <code class="python hljs">[list(word_list[np.where(component_list == i)]) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, N_components)]</code> </pre> <br><pre> <code class="plaintext hljs">[['aha'], ['chi'], ['ebb'], ['gnu'], ['ism'], ['khz'], ['nth'], ['n√©e'], ['ova'], ['qua'], ['ugh'], ['ups'], ['urn'], ['use']]</code> </pre> <br><p>  You can find out between which words there is a ladder of maximum length.  This can be determined by calculating the adjacency matrix.  Note that the distance between two unlinked points is considered to be infinite, so they should be excluded: </p><br><pre> <code class="python hljs">distances, predecessors = dijkstra(graph, return_predecessors=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) max_distance = np.max(distances[~np.isinf(distances)]) print(max_distance)</code> </pre> <br><pre> <code class="plaintext hljs">13.0</code> </pre> <br><p>  So, in our example there are such pairs of words, between which the shortest staircase contains 13 steps!  Let's determine what these pairs are: </p><br><pre> <code class="python hljs">i1, i2 = np.where(distances == max_distance) list(zip(word_list[i1], word_list[i2]))</code> </pre> <br><pre> <code class="plaintext hljs">[('imp', 'ohm'), ('imp', 'ohs'), ('ohm', 'imp'), ('ohm', 'ump'), ('ohs', 'imp'), ('ohs', 'ump'), ('ump', 'ohm'), ('ump', 'ohs')]</code> </pre> <br><p>  We saw all possible combinations of pairs of words, the distance between which is equal to 13 (as much as possible separated from each other).  If you look closely, on one side of the staircase are the words ‚Äúimp‚Äù and ‚Äúump‚Äù, which differ only in one letter.  On the other side of the staircase are the words "ohm" and "ohs", which also differ in just one letter.  The list of steps between these words will be almost the same.  It can be found just as stated above: </p><br><pre> <code class="python hljs">path = [] i = i2[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> i != i1[<span class="hljs-number"><span class="hljs-number">0</span></span>]: path.append(word_list[i]) i = predecessors[i1[<span class="hljs-number"><span class="hljs-number">0</span></span>], i] path.append(word_list[i1[<span class="hljs-number"><span class="hljs-number">0</span></span>]]) print(path[::<span class="hljs-number"><span class="hljs-number">-1</span></span>])</code> </pre> <br><pre> <code class="plaintext hljs">['imp', 'amp', 'asp', 'ass', 'ads', 'ids', 'ins', 'inn', 'ion', 'won', 'woo', 'who', 'oho', 'ohm']</code> </pre> <br><p>  Word ladders are just one of the possible applications of fast algorithms on sparse graphs in scipy.  Graph theory is applied in many areas of mathematics, data analysis and machine learning.  The tools for working with sparse graphs scipy are flexible enough to solve a wide range of tasks. <br>  I would be glad if you write in the comments about which section of scipy it will be interesting to read in the next article. </p></div><p>Source: <a href="https://habr.com/ru/post/438464/">https://habr.com/ru/post/438464/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>