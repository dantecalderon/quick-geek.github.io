<div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/3h/tk/me/3htkmehj2c1kahxmbcjdwf-1dmw.jpeg" width="600"></div><br>  You've probably heard about this keyboard.  IBM Model M is called "the best keyboard for typing", "the legendary unkillable keyboard", by all means adding "these no longer do."  To posts on Reddit about finding a Model M, they often add to congratulations the wish to “enjoy this keyboard over the next decades”.  What is so good about IBM Model M, how is it bad, and how can it be improved? <br><a name="habracut"></a><br><h2>  Story </h2><br>  A bit of theory.  IBM Model M, in its most famous modification called the IBM Enhanced Keyboard, was produced from 1985 to 1999, and in a slightly modernized form (USB, Win-keys, later - a smaller case) continues to be produced to this day by a small company Unicomp. <br><br>  The main highlight is the <i>buckling spring</i> mechanism (“curving spring”), to which we owe tactility and a clicking click.  If you are interested in details, design features and a list of modifications, then you should read the article in the <a href="https://en.wikipedia.org/wiki/Model_M_keyboard">English-language Wikipedia</a> (you should translate it) and in the <a href="https://deskthority.net/wiki/IBM_Enhanced_Keyboard">Deskthority encyclopedia</a> . <br><br><h2>  Glitter and poverty IBM Model M </h2><br>  First about the good.  Here, for what love IBM Model M: <br><br><ul><li>  The mechanism of buckling spring.  The same correct tactility, dear to the heart of any lover of mechanical keyboards.  The abrupt change in pressing force that occurs at the moment of spring bending corresponds exactly to the moment of operation.  Cherry MX blue clickers and their clones are somewhat similar, but they have a trigger point, and you won't mix up buckling spring. </li><li>  Durability.  Even slightly simplified keyboards of the fourth generation and made on worn-out equipment Unicomp have a robust body, such a keyboard can be repulsed in the case of a zombie apocalypse.  The case and the keys are made of PBT plastic, which, unlike ABS, almost does not turn yellow and does not wear out over time (keys worn to gloss are unpleasant for many to touch).  However, these strengths and durability are relative, I will discuss this in more detail below. </li><li>  A little more about the keys.  Keys are located on a curved surface to facilitate access to the upper rows.  In keyboards with modular switches, such curvature has to be simulated, making the keys of a different profile.  Model M uses the keys of one profile, as a result - they can be easily reversed in case of switching to alternative layouts (for example, Dvorak or Colemak for Latin).  In addition to all in most Model M, you can not pull out the key entirely, and remove only the upper part.  The inscriptions on the keys are made by thermosublimation, in which the dye impregnates plastic to a depth of several tenths of a millimeter.  Taking into account the high wear resistance of PBT plastic, the inscriptions turn out to be almost eternal, only double casting (doubleshot), used mainly for ABS plastic, is more reliable. <br></li><li>  Weight.  It is unlikely that you will regularly move this keyboard, the dimensions are not the same.  For stationary use, a lot of weight is a plus - the keyboard weighing 2.5 kg is difficult to move with random movement. </li><li>  The combination of vintage and mass release.  Two decades of production have done their job.  Despite the fact that many Model M ended their lives in a landfill or recycling center, enough for a long time for all those in need.  The efficiency of the surviving copies, as well as the livestock of the replica continues to support Unicomp, which produces parts for almost all generations of the IBM Enhanced Keyboard. </li></ul><br><p>  There are no perfect keyboards.  Here's what's bad in IBM Model M: <br><br></p><ul><li>  Noise.  In the 1970s, in the USA (this process took a long time), people were transferred to computer keyboards from typewriters, and there was not enough keyboard volume.  In some keyboards there was a solenoid, which produced an additional clatter when the key was triggered.  Over time, everything changed, and in most cases, your office colleagues or relatives in the apartment will not be happy to have “audio-tactile feedback”.  The vibration of the springs can be extinguished by making the so-called floss mod - a piece of dental floss is inserted into the springs, the ringing of the springs almost completely disappears, but the tactility decreases. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/88/mw/tb/88mwtbuvirc4xs8x1ejowvsbq28.jpeg" width="300"></div><br><p>  <i>Dental floss mod</i> .  Reducing IBM Model M noise by installing dental floss springs.  The author is Chris Satterfield (Deskthority wiki, publick domain).  <a href="">Source of</a> </p></li><li>  Lack of modularity.  A “sandwich” made from a steel plate, rubber gasket, membranes, hammers with springs and a plastic panel with “wells” functions as a single unit.  Keyboards with separate mechanical switches (Alps, Cherry and compatible) are much more convenient in this regard: the idle switch can be soldered in a minute, dozens of switches are available for every taste, they can be arranged on the keyboard as you like.  In the case of buckling spring repair takes a lot of time, and modifying the layout becomes an extremely difficult task. </li><li>  Strength and durability are relative.  It is worth remembering that the appearance of the Model M was dictated by the need to drastically reduce the cost of production in comparison with its predecessor, Model F. In short: IBM Model F also uses the buckling spring mechanism, but instead of a membrane, a curved printed circuit board with capacitive sensors was used.  The predecessor supported the NKRO (see below), was more durable, and the capacitive sensors provided greater durability. <br><br><p>  The membrane in the Model M <strike>is not at all like a membrane in cheap 1000-ruble keyboards, no “bumps” with a graphite layer</strike> (edited on January 24, 2017: it looks like I'm behind the times and don't understand the device of modern membrane keyboards).  It consists of two plastic sheets with contact pads and a blank sheet that separates them with holes at the site of the contact pads.  When the spring is bent, the hammer attached to it hits the pad of the upper sheet of the membrane through a thin rubber gasket, and the pad closes on the lower sheet.  I have never come across a killed membrane in any Model M, but it has a weak spot - a contact cable, the tracks can be damaged by bending the cable strongly by negligence.  Soldering these tracks is almost useless, especially in places of bending.  Only the conductive marker or self-adhesive copper tape remains, but in most cases it is better to order a new membrane in Unicomp. <br></p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/i-/lw/zd/i-lwzdgompmgeuuymq9ssusdzns.jpeg" width="600"></div><br><p>  Bundle assembly due to burst rivets.  The author is Ripster.  <a href="https://imgur.com/a/QroSL">Source of</a> </p><br>  The Achilles' heel of the IBM Model M is the fastening of a “sandwich” with a plate and membranes.  The top plastic panel has numerous pins, which, after being assembled at the factory, simply melt, forming a kind of plastic rivet.  Obviously, such a construction makes repair of these Rivets very difficult, but over time, as the plastic ages and under the influence of vibration (especially if the keyboard owner in a fit of anger begins to hit the keys with all his strength), these rivets start to break down.  The “sandwich” is exfoliated, some keys start to work poorly, leading to the need for a strong push, which is why the neighboring rivets also start to break down.  On the elimination of this trouble just takes the bulk of the time when repairing the IBM Model M. </li><li>  The main disadvantage of the membrane design is the lack of NKRO (No key rollover), that is, the ability to perceive the simultaneous pressing of a large number of keys.  With normal typing this does not interfere, but in games there may be problems.  The tracks from each key on the membrane can not be spent, they should be wide enough.  Diodes for building a classic keyboard matrix also do not solder to the membrane, so the <b>Model M keyboards support only 2KRO</b> , that is, they perceive the simultaneous pressing of <b>at least</b> two any keys.  It’s not for nothing that I selected the word “minimum” - in fact, not everything is so bad, since the topology of the rows and columns of the membrane does not match the physical layout of the keys.  For example, you can press W, A, D and R at the same time (4 keys), but W + S blocks almost all the keys of the middle row. <br></li><li>  Interface.  Even if your computer has a PS / 2 connector, then the IBM Model M keyboard in it will most likely not work because of abnormally high power consumption.  Most inexpensive adapters won't help.  Or you could get a terminal variant with an RJ-45 connector.  This problem is easily fixed.  Using an inexpensive microcontroller board with a ready-made firmware, the IBM Model M will get a USB interface and all the delights of modern programmable keyboards in the form of several layers and macros. <br></li></ul><br><h2>  Repairs </h2><br>  Dealt with the advantages and disadvantages.  If you weighed all the pros and cons, thought and bought IBM Model M, then, most likely, will get in an imperfect state - the production of these keyboards was discontinued in 1999.  If you do not want to repair, the vintage of the equipment does not matter, but you definitely need a mechanical keyboard with buckling spring, then it is better to take a new Unicomp.  Classic Unicomp with the talking title Classic (there is even a Classic 101, almost like two peas in a pod similar to the 101-button IBM Enhanced Keyboard with the exception of the nameplate) or a little less cumbersome Ultra Classic will cost only $ 84.  Even with the delivery (about $ 40), it will be inexpensive against the backdrop of the modern renaissance of mechanical keyboards.  The difference in quality will be (slightly curved print on some keys, not so neat looking body), but nothing fatal. <br><br>  If you need exactly the "same one", then you should carefully examine the keyboard when buying.  Virtually any killed "most indestructible keyboard in the world" can be recovered, but it costs time and money. <br><br><ul><li>  It is desirable to get a whole body, without cracks and chips.  The new case from Unicomp will be different from IBM's, taking into account the cost of delivery, it is easier to completely buy Unicomp. </li><li>  Keys  Missing keys (entire or upper caps) - a little trouble, but can lead to additional cash costs.  The sellers of IBM keys on Ebay may not be necessary, and the minimum cost of delivery for Unicomp is almost $ 15. <br></li><li>  Keyboard operability can be immediately determined not always due to the lack of a PS / 2 port in place (even its presence <a href="https://habr.com/ru/post/409651/">does not guarantee success</a> ).  Do not carry the external adapter with you.  Try to at least touch the performance of the keys.  All should work with approximately the same click.  The lack of a click may indicate damage to the spring / hammer, but most likely it is due to detached plastic rivets.  With the order of the springs, the same story as with the keys is a trifle with possibly expensive delivery, but you should not worry about the bundle. <br></li><li>  If you failed to connect the keyboard when buying and it turned out to be a dead controller, then this can also be corrected.  You just have to solder not the converter, but the <a href="https://blog.lmorchard.com/2016/02/21/modelm-controller/">controller entirely</a> , having obtained connectors for connecting a loop from a membrane (or using existing ones). <br></li></ul><br>  Actually, for the repair you will need the following: <br><br><ol><li>  A 5.5 m (7/32 inch) socket wrench to unscrew the four self-tapping screws that hold the keyboard case.  Inch end keys do not lie in each household, but, like many things now, this key is easier to order on Aliexpress.  If you don’t repair Model M and Unicomp more or less regularly, you can save money by making a key from a ... ballpoint pen!  It is necessary to melt the end of a suitable plastic handle with a cigarette lighter and quickly attach it to the head of the bolt. </li><li>  M2 × 8 screws and nuts - 58 pieces.  Small screws can also be a problem, usually you can find M3 and more in hozmagi.  On Aliexpress, I managed to find them from 200 pieces, but for a single repair this may seem unnecessary to you. </li><li>  Spare parts from <a href="https://www.pckeyboard.com/">Unicomp</a> .  Keys, hammers + springs (Pivot Plate &amp; Spring Assembly), fluoroplastic inserts stabilizers (Stabilizer Insert), membranes.  They even have stickers on the window with LEDs (the corresponding classic IBM is called “Pebble LEDs on Bottom”).  For reference, the color of IBM's gray keys (modifiers, arrows, Escape, etc.) is called <i>pebble</i> in Unicomp.  Immediately throw something to order before the full diagnosis is not worth it because of the expensive overseas delivery. <br></li><li>  Teensy 2.0 or Arduino Pro Micro.  On the one and the other, you can run TMK or Soarer's converter.  Pro Micro is cheaper, but a little harder is stitched and the USB cable does not come with it.  Chasing the originals is not worth it, the Chinese from Aliexpress now work without problems, at least for this purpose. <br></li><li>  USB Type C connector with board.  <a href="https://www.aliexpress.com/item/2pcs-lot-USB-3-1-TYPE-C-Connector-Female-socket-24P-Test-board-with-PCB-board/32787770605.html%3Fspm%3Da2g0s.9042311.0.0.OMBhFv">This</a> or <a href="https://www.aliexpress.com/item/1-Set-DIY-24pin-USB-C-USB-3-1-Type-C-Male-Female-Plug-Socket-Connector/32437958116.html%3Fspm%3Da2g0s.9042311.0.0.i3p2FD">such</a> .  A large fee is easier to fix in the case.  Don't forget two 5.1 kΩ resistors. <br><br><p>  Why not to use the microcontroller connector or not to make a fixed wire?  Of course, this can be done, which will lead to substantial savings, but mini-USB in Teensy or micro-USB in Pro Micro is flimsy, and the fixed cable is not always convenient and does not look so aesthetically pleasing, and we are doing it like a conscience , children and grandchildren.  If you still want to save money and are too lazy to mess with Type C decoupling, then you can put a good old USB Type B, but you can’t accurately put it in the latest generation Model M, which had a non-removable cable, it will not work because of its size.  You can make an external converter, but I don’t see any point in this, since most of the Model M’s museum value isn’t, it’s still not a <a href="https://en.wikipedia.org/wiki/Space-cadet_keyboard">Space-cadet of</a> any kind.  However, if you regularly check Model M and other keyboards with PS / 2 interface, an additional external converter will be very useful. </p></li><li>  Office knife or scraper for ceramic tiles to cut plastic rivets. <br></li><li>  Dremel or other tool with a 2 mm drill.  It is also desirable to use a grinding nozzle (with sandpaper or a roller cutter) for cutting rivets from a plastic panel, since it is inconvenient to cut them with a knife. </li><li>  Soldering iron. <br></li><li>  Spring clamps, four pieces.  Can be replaced with large stationery clips.  Greatly simplify the assembly procedure. <br></li><li>  Soil and paint on metal, if on the keyboard ever spilled liquid. </li></ol><br><h2>  Example </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/jw/0k/hx/jw0khxiyzlmudr90amouy4ganos.jpeg" width="600"></div><br>  My patient for this article is IBM Model M with part number 51G8572, released almost 25 years ago, on May 21, 1993.  Removable twisted SDL – DIN cable, gray logo, inscriptions on Alt keys in green, right Control is marked Ctrl / Act.  Inside the speaker is installed, that is, most likely, this keyboard was designed to work with the <a href="https://en.wikipedia.org/wiki/RS/6000">IBM RS / 6000</a> .  The keyboard as a whole works, but on top of it is a thick layer of dirt, and the nampad keys are some kind of wadded ones, which do not work out clearly.  It is worth a little shake to hear the detached heads of plastic rivets poured inside the case.  The task: to wash, make a bolt mod, make sure that all keys work, solder the adapter to USB, place the USB Type C connector. <br><br><p>  You should start by washing the keys and the cabinet.  <a href="https://habr.com/ru/post/409651/">We unscrew the four screws</a> , carefully lift and remove the upper part of the body - now it will be much more convenient to remove the keys.  If the outside is just dirty, then there is just horror: dust, hair, crumbs, paper clips, a <strike>colony of leaf cutter ants and rat corpses</strike> . <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/hf/sk/uu/hfskuuzmikrca9fjdxqd56piyem.jpeg" width="600"></div><br><p>  The keys can be removed with a special tool (you can make it out of wire), but in Model M it will be much quicker to just hook them up from the bottom, just not with a screwdriver, but with something soft, for example, a wooden chopstick.  The gap is equipped with a wire stabilizer.  Under the other long keys (cipher, enter, backspace and long pad) you will see fluoroplastic insert stabilizers.  There is nothing to break in them, it is usually enough to wipe them with alcohol.  Send the keys to the wash, separating the top caps from the actual keys.  In most cases, there is enough warm water with dishwashing liquid or detergent and a few hours to soak up the dirt.  In severe cases, I use an ultrasonic bath, but sometimes even this does not help and the keys have to be scrubbed manually. <br></p><br><p>  Disconnect the controller.  Unscrew the bolt from the plate holding the end of the harsh ground wire.  Disconnect the small cable from the daughter board with LEDs. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/fg/po/3s/fgpo3sd8fbl3jkgzmit_a_1cjie.jpeg" width="600"></div><br>  If you have the latest generation Model M or Unicomp, then the insides will look a little different - the small controller board along with the LEDs will be on the right;  There will be no LEDs in the terminal keyboards, if desired, they can be added.  Then you can gently lift the "sandwich" (assembly of a metal plate, membranes, gaskets and the top plastic panel, then I will call it just a sandwich), pull out the controller and disconnect (neatly!) Loops.  Before washing the case, it is worth protecting the “birth certificate” with a layer of masking tape, additionally gluing a regular one on top. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5s/3f/bm/5s3fbmzljv7gb60wffic-st1qto.jpeg" width="600"></div><br><p>  We start disassembling a sandwich.  Even if all the plastic rivets remained in place and all the keys work, there are two reasons for the disassembly and <a href="https://habr.com/ru/post/409651/">bolt mod</a> .  First, we make the keyboard conscientiously - for ourselves and future generations (even if some telepathic neural interface appears in 20 years and the keyboards start to die out, then retrocomputing fans will still remain).  If these plastic gizmos miraculously did not fall off, then perhaps they didn’t use the keyboard and should prevent this attack.  Going to the dark side and glue the places of the rivets torn off with epoxy is only if you are a shameless huckster and a barbarian.  The epoxy will last for a while, but <a href="https://imgur.com/a/Rrl1J">most likely will fall off</a> . <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/i-/lw/zd/i-lwzdgompmgeuuymq9ssusdzns.jpeg" width="600"></div><br><p>  The effects of repairing the keyboard with epoxy.  The author is Ripster.  <a href="https://imgur.com/a/Rrl1J">Source of</a> </p><br>  Disassembling the "repaired" in this way the keyboard will be more difficult.  For the same reason, dubious durability should not be used instead of screws screws.  Secondly, disassembling a sandwich greatly simplifies the cleaning of the plastic panel; all sticking horror can be washed off with water from the tap, and not picked out with cotton buds. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-i/1b/pr/-i1bprnjsadkxfu5awsrptrxdsc.jpeg" width="600"></div><br><p>  If there are broken keys and / or torn rivets, the choice is obvious - you have to cut it.  Remember that after removing the keys from the "wells" now unprotected springs stick out, so you need to put the sandwich on the appropriate stand.  Suitable shoe box.  Cut off the remaining rivets with a knife, scraper for a slab or other suitable tool.  Observe safety precautions, plastic is strong enough, cut away from you.  One or two rivets may be under the paper label.  Before removing the plate, the edges of all rivets must be completely cut off, the plate must be removed without much effort.  Pull the plastic panel by the edges or corners, and even more so it is impossible to use a screwdriver in any case - it will crack.  Remove the plate and three membrane layers.  If liquid is spilled on the keyboard, you will immediately notice this by the dark stains on the contacts of the membrane and rust on the metal plate.  In some cases, rubbing with isopropyl will help, in case of strong oxidation, you will have to change the membrane.  Under the membranes will be a thin rubber mat, handle it carefully so as not to tear.  Finally, at the very bottom there will be only a plastic panel with springs / hammers.  You can simply gently shake them out or transfer them to strips of masking tape, so as not to spend much time on installation.  Springs should be carefully examined for rust.  Remember the fragility of the plastic panel!  It is provided with grooves, “fold lines,” but it can crack and cross when handled carelessly. <br></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1l/1p/nf/1l1pnfnk4zjjehmnctxx1ahq_ea.jpeg" width="600"></div><br><p>  In my instance, a crack in a plastic panel was formed from the left end and along the “fold line”.  At first, a pair of rivets in the area of ​​the nampad came off and one or two keys became “wadded.”  The user began to press the keys harder, a few more rivets fell off, and so on, until the keyboard had to be hollowed in order to get the keys to work.  With bolt mod, such a crack is not dangerous, but the butt should be sealed.  The studs still remain on the panel.  They can be whipped off completely, leaving a few pieces for easy laying of the membrane, but you need to at least cut off the thickening from the top. <br></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yo/fp/-h/yofp-hhp0v3gaqydllgkekvlvbo.jpeg" width="600"></div><br><p>  Install the metal plate back, clamp it with spring clamps.  Before drilling it is advisable to mark the holes.  In the Model M of the first generation for the vertical keys used wire stabilizers, which can interfere with the heads of the respective screws, you will have to look for screws with a flat head. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/8v/fb/vo/8vfbvoi-pjhxvsp_qvk1oe0wino.jpeg"></div><br><p>  Wire stabilizer vertical 2U keys in the early IBM Model M. Written by Sandy (Deskthority wiki, publick domain).  <a href="">Source of</a> </p><br><br>  I used a diamond cone nozzle, but you can do it with a soldering iron with a thin sting.  You do not need to drill the bottom row - this edge of the panel will press against the projections on the bottom of the case.  After stripping and drilling, there will be a pile of electrified plastic chips and sawdust.  Take the time to rinse well and dry the panel (remember that you can not shake it!). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bh/9k/fu/bh9kfubcsj0nomxlko9nowpruuu.jpeg" width="600"></div><br><p>  Putting a sandwich back.  The panel on the stand, inserts stabilizers, hammers (make sure everything is flat), do not forget that not all the seats are installed hammers.  Then there is a rug, membranes (they cannot be put on the wrong side, the main thing is to lay exactly) and a plate on top. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/-_/7k/fw/-_7kfwteekkkyzxsr0-bd4cippk.jpeg" width="600"></div><br>  We clamp along the edges with four clamps or stationery clips, overturn, insert screws, turn the nuts.  It is not necessary to firmly tighten, the screws should protrude 1–2 threads.  Put back the keys and check their work.  If something does not click as it should, then you need to try a little to loosen the screws around the problem key. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sf/sp/72/sfsp72y8hdugaod4ophmb4tw0ek.jpeg" width="600"></div><br><p>  With the mechanics finished, let's do electronics.  The SDL connector on the controller will interfere, you need to get rid of it.  It is difficult to unsolder it, without peeling off the tracks, at least for me, so I just gently broke the plastic case of the connector with a nipper and dropped out the contacts one by one.  The pin of the PS / 2 interface on the openings looks like this: <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/rx/3k/un/rx3kunevuhv36pbiwu_llb5sz0o.jpeg" width="600"></div><br>  As a converter, I used Teensy 2.0 (Chinese clone) with <a href="https://deskthority.net/workshop-f7/xt-at-ps2-terminal-to-usb-converter-with-nkro-t2510.html">Soarer's converter firmware</a> .  A kind person under the nickname Soarer placed five years ago on Geekhack and Deskthority firmware, allowing you to connect XT, AT, PS / 2 and IBM terminal keyboards via USB with the following functionality: <br><br><ul><li>  Key mapping, layers and macros. </li><li>  Upgradeable configuration.  Unlike TMK / QMK, where the configuration is part of the firmware, and with any change you have to compile the firmware and rewrite the controller, SC allows you to load a small configuration file into the EEPROM. </li><li>  NKRO support (if supported by the original keyboard). </li><li>  Five keys additionally connected to the microcontroller - a pedal or keys added when modifying the keyboard. </li><li>  Connecting LEDs (NumLock, CapsLock, ScrollLock).  Useful for IBM terminal keyboards and early Model M for IBM PC XT, where there are no LEDs. </li></ul><br>  Unfortunately, Soarer disappeared from keyboard forums in 2014, nothing is known about his fate, he did not leave the source codes, but there were attempts to disassemble.  There is about the same, except for updating the configuration of <a href="https://github.com/tmk/tmk_keyboard/">the TMK project</a> from the no less legendary Hasu. <br><br><p>  So, fill in Soarer_at2usb_v1.12_atmega32u4.hex in Teensy 2.0 with the help of Teensy loader (as I already mentioned, you can use Arduino Pro Micro, but there appears fuss with drivers and utilities) and solder it to the keyboard controller: Data to PD0, Clock to PD1 and the earth is powered.  You can immediately connect to the computer and check all the keys through the <a href="https://elitekeyboards.com/switchhitter.php">Switch Hitter</a> . <br></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/v4/lq/i3/v4lqi33kqdzgul2gy4cd3eozhu0.jpeg" width="600"></div><br><p>  It remains only to arrange everything beautifully and place the keyboard into the case.  I chose a strong and modern USB Type C, but, as mentioned above, you can save money by replacing it with Type B or making the cable non-removable.  The pinout of the Type C connector looks like this: <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mm/mb/bo/mmmbbohpxsacjnr5v0xhagzly6g.png"></div><br>  For our purposes, we need power (A4, B9, B4, A9), ground (A1, A12, B1, B12 and connector body), a pair for data transmission - D + (A6, B6) and D− (A7, B7).  CC1 and CC2 need to be connected to ground through resistors with a resistance of 5.1 kΩ.  We connect to the stub of the USB cable bundled with Teensy: black - ground, red - power, green - D +, white - D−.  A little plastic, superglue, electrical tape - and the connector is ready.  Fix the tie and the keyboard is ready. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/-7/qn/ix-7qn1cw8rcswj1v-omuuuutum.jpeg" width="600"></div><br><p>  We use the functionality of the converter. Я взял за основу layer example.sc, простую конфигурацию, назначающую CapsLock в качестве модификатора FN1 и FN1+I/J/K/L в качестве стрелок. Можно добавить ещё несколько клавиш (PageUp/PageDown рядом с этиими дополнительными клавишами, Win-клавиша, CapsLock и несколько мультимедийных на F5–F11): <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/d9/i0/fz/d9i0fzvt19oe56u0pqhjpv2qcgc.png"></div><br>  One has only to say <code>scwr конфигурация.sc</code> - it will be compiled into a binary one and poured into the keyboard. <br><br><p>  That's all, good luck to all drilling and clicking.  Many thanks to Soarer, Hasu and Ripster keyboard geeks for their invaluable contribution to keyboard science. </p></div>