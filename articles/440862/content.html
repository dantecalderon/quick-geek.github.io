<div class="post__text post__text-html js-mediator-article">  Hello!  Friends, on the last day of winter, we will launch a new thread on the <a href="https://otus.pw/jHCT/">“DevOps practices and tools”</a> course.  On the eve of the start of the course, we are sharing with you the first part of the article: “Patterns and anti-patterns CI / CD”. <br><br><img src="https://habrastorage.org/webt/z0/gg/cl/z0ggclmknnk3vkytluxno9hrhss.png"><br><br>  The deployment pipeline task consists of three parts: <br><br><ul><li>  Visibility: All aspects of the delivery system — creation, deployment, testing, and release — are visible to team members and facilitate collaboration. </li><li>  Feedback: Team members will learn about problems as soon as they occur, in order to eliminate them as soon as possible. </li><li>  Continuous Deployment: With a fully automated process, you can deploy and release any version of software in any environment. </li></ul><a name="habracut"></a><br><img src="https://habrastorage.org/webt/s9/v2/ew/s9v2ewfst7vvt66zuo-98xqic2w.jpeg"><br><br>  In the above Deployment Pipeline diagram, all patterns have context.  Some patterns cover several stages of this pipeline, so I chose the stage at which they are used most often. <br><br>  <b>1.1 Configuration Management - Patterns and Anti-Patterns</b> <br><br>  <i><b>1.1.1 Customizable Third-Party Software</b></i> <br><br><ul><li>  Pattern: Evaluate and use third-party software that can be easily customized, deployed and automated. </li><li>  Anti-pattern: Software that cannot be configured externally.  Software without API and command line interface, requiring the command to use the GUI. </li></ul><br>  <i><b>1.1.2 Configuration Directory</b></i> <br><br><ul><li>  Pattern: Support of the catalog of all parameters of each application, ways of changing these parameters and the storage location of each application.  Automatic catalog creation as part of the build process. </li><li>  Anti-patterns: Configuration parameters are not documented.  The catalog of all applications and other assets is local undescribed “folklore”. </li></ul><br>  <i><b>1.1.3 Mainline</b></i> <br><br><ul><li>  Pattern: Minimize merges, control the number of active codeline by working in the mainline. </li><li>  Anti-patterns: Several branches per project. </li></ul><br>  <b><i>1.1.4 Daily Merdzhi</i></b> <br><br><ul><li>  Pattern: Changes committed to mainline are applied to all branches at least every day. </li><li>  Anti-patterns: Merge all iterations once a week or less than once a day. </li></ul><br>  <i><b>1.1.5 Secure Configuration</b></i> <br><br><ul><li>  Pattern: Storing configuration information in a secure, remotely accessible location, such as a database, directory, or registry. </li><li>  Anti-patterns: Open text passwords and / or one computer or share. </li></ul><br>  <i><b>1.1.6 Repository</b></i> <br><br><ul><li>  Pattern: All source files - executable code, configuration, host environment, data - are loaded into the repository with version control. </li><li>  Anti-pattern: Some files are checked-in, others, such as environment configurations or data changes, are not.  Binary files that can be recreated during the build or deployment process are checked out. </li></ul><br>  <b><i>1.1.7 Short-lived Branches</i></b> <br><br><ul><li>  Pattern: Branches should be short-lived, ideally, several days and no more than one iteration. </li><li>  Anti-patterns: Branches living longer iteration.  Branches for product functionality, living after release. </li></ul><br>  <i><b>1.1.8 The Environment of the Unified Team</b></i> <br><br><ul><li>  Pattern: Checkout the project repository with version control and run a single command to build and deploy the application to any available environment, including local development. </li><li>  Anti-pattern: Require a developer to define and set environment variables.  Get the developer to install many build / deployment tools. </li></ul><br>  <i><b>1.1.9 One Way to Operation</b></i> <br><br><ul><li>  Pattern: Configuration management of the whole system - source, configuration, environment, data.  Any changes can be traced to a specific revision in the version control system. </li><li>  Anti-patterns: Parts of the system have no version.  Unable to roll back to the previous system settings software. </li></ul><br>  <b>1.2 CI Continuous Integration - Patterns and Anti-Patterns</b> <br><br>  <i><b>1.2.1 Build Threshold</b></i> <br><br><ul><li>  Pattern: Build crashes if project rules are violated.  For example, violations of architecture, slow tests, violation of standards for writing code. </li><li>  Anti-patterns: Manual code review.  Detection of problems with code quality in the later stages of the development cycle. </li></ul><br>  <b><i>1.2.2 Frequent commits</i></b> <br><br><ul><li>  Pattern: Each team member checks regularly - at least once a day, but ideally after each task to activate the CI system. </li><li>  Anti-patterns: The commit of source files occurs less frequently than once a day, due to the number of changes made by the developer. </li></ul><br>  <i><b>1.2.3 Continuous Feedback</b></i> <br><br><ul><li>  Pattern: Send automatic feedback from the CI system to all members of a cross-functional team. </li><li>  Anti-patterns: Notifications are not sent;  notifications are ignored;  The CI system sends information to everyone that cannot be used. </li></ul><br>  <i><b>1.2.4 Continuous Integration</b></i> <br><br><ul><li>  Pattern: Software build and testing takes place after committing any change to a project versioned repository. </li><li>  Anti-patterns: Scheduled assemblies, nightly assemblies, periodic assemblies, assemblies exclusively on the developer's machine, the complete absence of assemblies. </li></ul><br>  <i><b>1.2.5 The principle of “Stop Line”</b></i> <br><br><ul><li>  Pattern: Repair all software delivery bugs as they arise;  “Stop line”.  No one is checked in a broken assembly, since its repair has the highest priority. </li><li>  Anti-pattern: Builds remain broken for a long time, thereby preventing developers from checking for working code. </li></ul><br>  <i><b>1.2.6 Independent Build</b></i> <br><br><ul><li>  Pattern: Written scripts for the assembly, which are separated from the IDE.  These scripts are executed by the CI system so that the build is done with every change. </li><li>  Anti-patterns: Automatic builds depend on the IDE setting.  Unable to start assembly from command line. </li></ul><br>  <b><i>1.2.7 Visible Dashboards</i></b> <br><br><ul><li>  Pattern: It is possible to see all the information about your delivery system.  To provide high-quality feedback to an inter-functional team in real time. </li><li>  Anti-patterns: Alerts come only to email.  Feedback is not published for the whole team. </li></ul><br>  The end of the first part. <br><br>  Here is such a material.  We will publish the continuation of the translation in the near future, and now we are waiting for your comments and invite you to <a href="https://otus.pw/ca1I/">an open webinar</a> , which will be held this evening. </div>