<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I created an extension for Atom and VS Code: personal experience and source codes</title>
  <meta name="description" content="We translated for you an article by Philip Korey about how he developed extensions for Atom and VS Code editors. Projects cannot be called complex, bu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>How I created an extension for Atom and VS Code: personal experience and source codes</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ed1/5a8/1ef/ed15a81ef9dd6a49c1247f3d4d0f3d65.jpg" alt="image"><br><br>  We translated for you <a href="https://revs.runtime-revolution.com/my-journey-in-developing-editor-extensions-1bef0bd3ae2a">an article by Philip Korey</a> about how he developed extensions for Atom and VS Code editors.  Projects cannot be called complex, but this is their advantage: you can immediately understand what needs to be done to create your own expansion. <br><br>  When the Atom editor was first introduced, I, like many web developers, were delighted.  ‚ÄúOh, cool, extensible editor, built on a stack that I know,‚Äù I thought then.  And immediately began to expand the capabilities of the editor, as well as thousands of other developers. <br><br>  By the way, I work with Atom for two reasons.  The first is that great extensions appear every week.  The second is that I know the stack and can work with it without any problems by creating my own versions of the extensions. <br><a name="habracut"></a><br><blockquote>  <b>We remind:</b> <i>for all readers of "Habr" - a discount of 10,000 rubles when recording for any Skillbox course on the promotional code "Habr".</i> <br><br>  <b>Skillbox recommends:</b> Online course <a href="https://skillbox.ru/frontend-developer/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DFRENDEV%26utm_content%3Darticles%26utm_term%3Dextensionforeditor">"Profession Frontend Developer"</a> . <br></blockquote><br><h3>  Big Cursor Extension </h3><br>  When Atom came out, I programmed in Slim, Sass and CoffeeScript.  At that time I did not know any other ways to edit indents, other than the usual way - to change each indent separately.  Sometimes it was difficult to determine the completion of the block, so I decided to change the appearance of the cursor.  I wanted to turn it into something like a ruler that allows you to measure everything exactly.  Here is an example: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c6/b89/06f/7c6b8906f44db314f022418da30a1a10.gif"><br><br>  To understand how to do this, I examined the Atom developer tools, selected the cursor element, and then modified it with CSS.  Thus, I managed to get something like a proof of concept - I realized that my idea is realizable. <br><br>  Next, I examined the documentation (again) in order to learn how to register a command and apply changes to the cursor class.  The first iteration was very simple. <br><br><pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = activate: (state) -&gt; atom.workspaceView.command <span class="hljs-string"><span class="hljs-string">'big-cursor:toggle'</span></span>, @toggle toggle: ()-&gt; atom.workspaceView.getActiveView() .find(<span class="hljs-string"><span class="hljs-string">".cursor"</span></span>).toggleClass(<span class="hljs-string"><span class="hljs-string">"big-cursor"</span></span>) .big-cursor { <span class="hljs-attr"><span class="hljs-attr">top</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> !important; height:<span class="hljs-number"><span class="hljs-number">100</span></span>%; }</code> </pre> <br>  This is a simple and working extension. <br><br>  What happened to him? <br><br>  Nothing special, I wrote it when even Atom version 1.0 wasn‚Äôt, so the API changed later, but I didn‚Äôt need the extension and I stopped supporting it. <br><br><h3>  VS Code </h3><br>  After a couple of years, I decided to switch to VS Code.  For convenience, I used an extension that allowed you to quickly change the necessary parameters, such as variable names.  But I had to constantly enter a command to make these changes.  I didn‚Äôt want to tie them to some keyboard buttons, so I began to think about options for working with aliases in the ZSH shell. <br><br>  ZSH has many plugins, plus you can use short versions of commands to run them.  An example is running the git checkout plugin using gco, and the rails server plugin using the rs command. <br><br>  Actually, for a team like Change Case Snake Case, I could just enter the first letters of all the words, that is, run all this using the abbreviation ccsc. <br><br>  <b>Writing an extension for VS Code</b> <br><br>  So, I began to explore the possibilities for creating extensions.  I was already a little familiar with some points, because I made my additions for Scry (language server for Crystal), so I studied the Crystal extension for VS Code. <br><br>  So, it was created using the Yeoman generator.  He looked like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c8/e45/ec7/7c8e45ec771b89f03cec1fea01cc3a29.png"><br><br>  The basis of the Typescript extension is quite convenient.  You can configure everything using tsconfig (which, however, means that Typescript files can often generate an error and not compile), but you can choose the second option - tslint. <br><br>  After the generator is configured, you have the hello world extension, which adds the hello world logging command.  The project uses VS Code debugging tasks to enable the launch of a VS Code instance with the extension enabled.  All this really can be easily configured with the addition of breakpoints if necessary.  As a result, you can study the API without problems. <br><br>  In order to create an extension that I need, I need to know a few things: <br><br><ul><li>  How to create a palette box where the user can work. </li><li>  How to filter the palette box to display commands in accordance with their short versions entered by the user. </li><li>  How to get all the available commands, so that was what to look for right in the window. </li><li>  How to execute a command. </li></ul><br>  I had to go into the documentation in order to get all the data.  The API is very limited, this is a problem.  But I did what I planned. <br><br>  <b>1. Palette box</b> <br><br>  To do this, you do not need to access DOM or views.  There is a set of views that you can use (one of them is an HTML panel).  There was also a presentation for the palette box, so I could understand how it all works. <br><br>  <b>2. Filtering the palette box</b> <br><br>  I had to try here because the QuickPick API does not offer this feature.  But on the other hand, it has an event that can be intercepted whenever the user starts typing something, I just change the list of options.  This option works surprisingly well. <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> disposable = vscode.commands.registerCommand(<span class="hljs-string"><span class="hljs-string">'short-commands.activatePalette'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> list = vscode.window.createQuickPick&lt;CommandOption&gt;<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">placeholder</span></span></span><span class="hljs-function"> = "</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Hello</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">some</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stuff</span></span></span><span class="hljs-function">"; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onDidChangeValue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ee</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ee.length === <span class="hljs-number"><span class="hljs-number">0</span></span>) { list.items = []; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { list.items = options.filter(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) =&gt;</span></span> e.short.startsWith(ee)) } }); });</code> </pre> <br>  <b>3. Get the list of available commands.</b> <br><br>  Here, too, there are difficulties, you can get a list of other installed extensions.  For each, you need to access its own package.json. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseExtensionCommands</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> extensions: Extension&lt;any&gt;[] </span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CommandOption</span></span></span><span class="hljs-function">[] </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> options: CommandOption[] = []; extensions.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ext</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> { <span class="hljs-attr"><span class="hljs-attr">packageJSON</span></span>: { <span class="hljs-attr"><span class="hljs-attr">contributes</span></span>: { commands } = { <span class="hljs-attr"><span class="hljs-attr">commands</span></span>: [] } } } = ext; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (commands) { commands.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c: Command</span></span></span><span class="hljs-function">) =&gt;</span></span> { options.push(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CommandOption(c)); }); } }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> options; }</code> </pre> <br>  <b>4. Execute the command</b> <br><br>  Well, here everything is simple, we turn to the API to call the desired command. <br><br>  vscode.commands.executeCommand (list.activeItems [0] .command.command) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b83/64c/00a/b8364c00ac8a67d15d9a20c51352f63e.gif"><br><br><h3>  As output </h3><br>  Actually, this is all that I have done for the editors.  My goal was to show how you can start developing your own extensions.  Here is a list of what I used in my work, plus the source of the projects: <br><br><ul><li>  <a href="https://github.com/laginha87/atom-big-cursor" rel="noopener">Atom Extension Big Cursor</a> </li><li>  <a href="https://github.com/laginha87/vscode-short-commands" rel="noopener">VSCode Extension Short Commands</a> </li><li>  <a href="https://code.visualstudio.com/api/get-started/your-first-extension" rel="noopener">VSCode extension api</a> </li><li>  <a href="https://github.com/Microsoft/vscode-extension-samples" rel="noopener">Vscode repo samples</a> </li><li>  <a href="https://github.com/crystal-lang-tools/scry" rel="noopener">Scry</a> </li></ul><br><blockquote>  <b>Skillbox recommends:</b> <br><br><ul><li>  Practical course <a href="https://skillbox.ru/agima/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DAGIMA%26utm_content%3Darticles%26utm_term%3Dextensionforeditor">"Mobile Developer PRO"</a> </li><li>  Online course <a href="https://skillbox.ru/webdev/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DWEBDEV%26utm_content%3Darticles%26utm_term%3Dextensionforeditor">"Profession Web Developer"</a> </li><li>  Two-year practical course <a href="https://iamwebdev.skillbox.ru/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DWEBDEVPRO%26utm_content%3Darticles%26utm_term%3Dextensionforeditor">"I am a web developer PRO"</a> . </li></ul></blockquote></div><p>Source: <a href="https://habr.com/ru/post/439380/">https://habr.com/ru/post/439380/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
</ul></nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>