<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Speed ‚Äã‚Äãup complex calculations with minimal RAM</title>
  <meta name="description" content="In the process of mastering ML, CNN, NN in Python, a novice almost always faces the problem of computation speed, and sometimes lack of RAM. 

 This i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Speed ‚Äã‚Äãup complex calculations with minimal RAM</h1><div class="post__text post__text-html js-mediator-article">  In the process of mastering ML, CNN, NN in Python, a novice almost always faces the problem of computation speed, and sometimes lack of RAM. <br><br>  This is especially noticeable with large databases that are larger than 50% of free RAM.  Thinking about buying more worthy hardware is just one of the possible solutions. <br><br>  Another option to use one of the features in Python is to iterate over the function itself. <br><br>  A simple and illustrative example.  Suppose you need to build in 200,000 degree a series of numbers from 1 to 10 and add up their sum.  As a result, you should get the number of long 200 thousand characters.  <a href="https://en.wiktionary.org/wiki/googol">This is 2 times more than google</a> ) <br><br>  Here is the simple code for this function: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-comment"><span class="hljs-comment"># –∏–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è –≤—Ä–µ–º–µ–Ω–∏ # –ø—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤–µ–¥–µ–Ω–∏—è –≤ —Å—Ç–µ–ø–µ–Ω—å def power_1(x): power_1 = 0 start = time() power_1 = x**200000 end = time() total_1 = end - start return round(total_1,6) # –ø—Ä–æ—Å—Ç—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ–∂–µ–Ω–∏—è, –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ –±—ã –ø–æ—Å—á–∏—Ç–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –≤—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–∏ power_1(1) + power_1(2) + power_1(3) + power_1(4) + power_1(5) + power_1(6) + power_1(7) + power_1(8) \ + power_1(9) + power_1(10)</span></span></code> </pre> <br>  As a result, we get quite a ‚Äúcostly‚Äù operation for your computer, and for example mine it takes more than 13 ms.  And what if there can be many such operations?  Then everything gets complicated, and maybe you just do not have enough RAM. <br><br>  But you can be more cunning and use the same function by running it through iteration over your variables. <br><a name="habracut"></a><br>  Here is the code for such a simple solution of the same function: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-comment"><span class="hljs-comment">#–ø–æ–ª—É—á–∞–µ–º –º–æ–¥—É–ª—å –≤—Ä–µ–º–µ–Ω–∏ # —Ñ—É–Ω–∫—Ü–∏—è –∏—Ç–µ—Ä–∞—Ü–∏–∏ def power_2(): for i in range(11): yield i # —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤–µ–¥–µ–Ω–∏—è –≤ —Å—Ç–µ–ø–µ–Ω—å for i in power_2(): if i &lt; 11: d = 0 total_2 = 0 start = time() d += i**200000 end = time() total_2 += end - start print('Ineration {} lasts {}'.format(i, round(total_2, 6))) if i == 10: print(' \n End with total time {} \n'.format(round(total_2,3)))</span></span></code> </pre><br>  Time spent on my computer <br><br><img src="https://habrastorage.org/webt/yi/dn/sy/yidnsycbbtxsyuz0fmjnwgfxthi.png"><br><br>  The difference is 0.13 - 0.024 = <b>0.106 ms!</b> <b><br></b> <br><br>  If you simply add 1 to this huge number in the usual way, this one will take longer than the erection of the 200,000 degree itself.  That is, the advantages of this method are obvious. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_one</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> total_3 = <span class="hljs-number"><span class="hljs-number">0</span></span> start = time() s = x + <span class="hljs-number"><span class="hljs-number">1</span></span> end = time() total_3 += end - start print(<span class="hljs-string"><span class="hljs-string">'Time to do add 1 to BIG number: {} \n'</span></span>.format(total_3)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> print(<span class="hljs-string"><span class="hljs-string">'Difference in time {}\n'</span></span>.format(round(total_2 - total_3 ,<span class="hljs-number"><span class="hljs-number">3</span></span>))) add_one(d) print(<span class="hljs-string"><span class="hljs-string">'The size of the number {}!!!'</span></span>.format(len(str(d))))</code> </pre><br>  The result is: <br><br><img src="https://habrastorage.org/webt/3p/1s/ze/3p1szelj6lprc9u2wgmab_lguoq.png"><br><br>  Why is that?  As far as I know, when iterating through a function, Python does not create temporary objects in memory, which in turn significantly speeds up any computational process.  Therefore, by rewriting the function in this way, you save time and nerves. <br><br>  Total - for complex calculations with a limited size of RAM, it is better to use the iteration of the function than just the functions themselves. <br><br>  I hope this will help someone not to lose precious minutes or not to spend on additional, rapidly aging iron. <br><br>  <a href="https://youtu.be/cKPlPJyQrt4%3Ft%3D4257">Inspired by the lecture</a> </div><p>Source: <a href="https://habr.com/ru/post/439312/">https://habr.com/ru/post/439312/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>