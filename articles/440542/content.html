<div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/ls/uu/3_/lsuu3_cxyulypuudtrcsnd6m_wk.png"></p><br><p>  This article will discuss the common mistake most beginners make when developing an application on Vue + Vuex.  We will talk about getters and how to use them correctly.  We will also look at the helper functions mapState and mapGetters. </p><br><p>  <em>Notes before reading: It is recommended to have a basic knowledge of Vue and Vuex.</em> </p><a name="habracut"></a><br><h3 id="glava-1-chto-takoe-gettery-primer-necelesoobraznogo-ispolzovaniya">  Chapter 1. What are getters.  Example of inappropriate use </h3><br><p>  <strong>Getters</strong> are part of the Vuex repository that return the computed data of the current state of the repository to our components. </p><br><p>  Consider an example: </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vuex.Store({ <span class="hljs-attr"><span class="hljs-attr">state</span></span>: { <span class="hljs-comment"><span class="hljs-comment">// список книг books: [ { id: 1, title: '...', finished: true }, { id: 2, title: '...', finished: false } ] }, getters: { // возвращаем список всех книг books: state =&gt; state.books } });</span></span></code> </pre> <br><p>  This will look like a component with a list of all books: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">computed</span></span>: { <span class="hljs-comment"><span class="hljs-comment">// наш геттер books() { return this.$store.getters.books } } }</span></span></code> </pre> <br><p>  The example above works, but you should not do that.  <strong>We overload the application with this approach.</strong> </p><br><p>  If you need to transfer data directly from the repository to the component without any modifications, getters are not the best solution.  Next, I will show how to improve the code and get rid of the inappropriate use of getters. </p><br><h3 id="glava-2-ispolzovanie-mapstate-dlya-polucheniya-dannyh-iz-hranilischa">  Chapter 2. Using mapState to retrieve data from the repository </h3><br><p>  <a href="https://vuex.vuejs.org/ru/guide/state.html">Documentation</a> reads as follows: </p><br><blockquote>  When a component has to use many properties or getter storage, it can be tedious to declare all these calculated properties.  In such cases, you can use the <strong>mapState</strong> function, which automatically generates calculated properties. </blockquote><p>  Let's go back to our component and use mapState instead of the getter: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { mapState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vuex'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">computed</span></span>: { ...mapState([ <span class="hljs-string"><span class="hljs-string">'books'</span></span> ]) } }</code> </pre> <br><p>  Getter from storage can be removed, because  we no longer need him: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vuex.Store({ <span class="hljs-attr"><span class="hljs-attr">state</span></span>: { <span class="hljs-comment"><span class="hljs-comment">// список книг books: [ { id: 1, title: '...', finished: true }, { id: 2, title: '...', finished: false } ] } });</span></span></code> </pre> <br><p>  Much easier, isn't it?  We got rid of unnecessary getters and reduced the amount of code. </p><br><h3 id="glava-3-zachem-zhe-nuzhny-gettery-esli-est-mapstate">  Chapter 3. Why do we need getters if there is a mapState </h3><br><p>  And yet they are needed.  Getters are used in cases where you need to display the modified information from the repository (for example, a list of all <strong>the</strong> books <strong>read</strong> ). </p><br><p>  Let's create a getter to get all the read books from the repository: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vuex.Store({ <span class="hljs-attr"><span class="hljs-attr">state</span></span>: { <span class="hljs-comment"><span class="hljs-comment">// список книг books: [ { id: 1, title: '...', finished: true }, { id: 2, title: '...', finished: false } ] }, getters: { // возвращаем список прочитанных книг finishedBooks: state =&gt; { return state.books.filter(books =&gt; books.finished); } } });</span></span></code> </pre> <br><p>  Now our component will look like this: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { mapState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vuex'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">computed</span></span>: { <span class="hljs-comment"><span class="hljs-comment">// получаем список всех книг ...mapState([ 'books' ]), // получаем список прочитанных книг finishedBooks() { return this.$store.getters.finishedBooks } } }</span></span></code> </pre> <br><p>  One could stop at that, but there is another useful thing worth knowing.  If you need to reuse the same getter in different components, it may not be very convenient to write getters each time in the computed method.  <strong>MapGetters</strong> comes to the <strong>rescue</strong> . </p><br><p>  Let's look at an example: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// не забываем про импорт import { mapState, mapGetters } from 'vuex'; export default { computed: { // получаем список всех книг ...mapState([ 'books' ]), // получаем список геттеров, или в // нашем случае список всех прочитанных книг ...mapGetters([ 'finishedBooks' ]) } }</span></span></code> </pre> <br><p>  The improvement is obvious: using mapGetters, we have reduced the amount of code. </p><br><p>  You can also calculate information from the repository based on some data, for example, get a book by its id or title.  This can be achieved by passing the argument to our getter. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vuex.Store({ <span class="hljs-attr"><span class="hljs-attr">state</span></span>: { <span class="hljs-comment"><span class="hljs-comment">// список книг books: [ { id: 1, title: '...', finished: true }, { id: 2, title: '...', finished: false } ] }, getters: { // возвращаем список прочитанных книг finishedBooks: state =&gt; { return state.books.filter(books =&gt; books.finished); }, // возвращаем книгу по id getBookById: (state) =&gt; (id) =&gt; { return state.books.find(books =&gt; books.id === id) } } });</span></span></code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { mapState, mapGetters } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vuex'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">computed</span></span>: { ...mapState([ <span class="hljs-string"><span class="hljs-string">'books'</span></span> ]), ...mapGetters([ <span class="hljs-string"><span class="hljs-string">'finishedBooks'</span></span>, <span class="hljs-string"><span class="hljs-string">'getBookById'</span></span> ]), getBook() { <span class="hljs-comment"><span class="hljs-comment">// получаем книгу с id === this.id return this.getBookById(this.id) } } }</span></span></code> </pre> <br><h3 id="zakreplenie-materiala">  Fastening material </h3><br><ul><li>  You can use getters in your actions (actions) vuex or directly in the components. </li><li>  The getter results are updated when one of the dependencies changes. </li><li>  Additional arguments can be passed to getters to perform data calculations based on them. </li><li>  Use getters only to calculate non-trivial data that is required in several components; in other cases, use the helper function mapState. </li></ul><br><p>  <a href="https://vuex.vuejs.org/ru/guide/getters.html">Documentation for getters in Russian</a> </p><br><p>  <a href="https://codepen.io/andrew-savetchuk/pen/NoOZXX">Sample application from the article on codepen</a> </p></div>