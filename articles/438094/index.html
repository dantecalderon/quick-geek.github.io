<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The nuances of working tools Target Length and Tuning Meter in PADS Professional / Xpedition</title>
  <meta name="description" content="When tracing complex printed circuit boards using high-speed interfaces, engineers need to clearly control the length of critical signals, because at ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>The nuances of working tools Target Length and Tuning Meter in PADS Professional / Xpedition</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/le/1p/5p/le1p5pfc5oopizuic_aq1s6oq8u.jpeg"></div><br>  When tracing complex printed circuit boards using high-speed interfaces, engineers need to clearly control the length of critical signals, because at high frequencies each unaccounted millimeter of the conductor will greatly affect the integrity of the signal, and therefore the operation of your device as a whole. <br><br>  In this article I will try to explain the logic of the Tuning Meter and Target Lengths tools, since they do not always calculate the lengths of the conductors in the same way. <br><br>  As always, all the fun under the cut. <br><a name="habracut"></a><br><h2>  Overview </h2><br><ul><li>  How is the allowable length range of the conductor and its upper / lower limits calculated? </li><li>  Tuning meter vs.  Target Lengths </li><li>  Why are there differences between lengths in the Target Length and what is displayed in the Tuning Meter? </li></ul><br>  In this article, the term FromTos (FT) is used to describe the physical connection between two pins (contacts), this concept is also used in the Constraints Manager (CM). <br><br><h2>  Example 1: Point-to-Point Connection </h2><br>  This is the simplest example - a two-point connection for a circuit consisting of 2 contacts.  The minimum and maximum length of the conductor is set in the Constraint Manager, as shown in the figure below. <br><br>  * <i>Important note # 1: When the length is determined using the minimum / maximum length, the default tolerance setting in CM (Setup Settings - Design Configuration: Default Tolerances) is <b>NOT</b> applied!</i> <br><br><img src="https://habrastorage.org/webt/vl/1j/mf/vl1jmf3iwac1_cbsktrtnsr78ok.jpeg"><br><br>  Both the Target Lengths dialog box and the Tuning Meter will display the current (Current) length and range (Range), in this case from 1800th to 1900th.  Since the actual length of the divorced conductor is less than 1800th, the 1800th is displayed in the ‚ÄúSolution‚Äù column. <br><br><img src="https://habrastorage.org/webt/yf/l7/cb/yfl7cbys2rchqtwxdy-nngitku4.jpeg"><br><br><h2>  Example 2: MST type topology without vias </h2><br>  The second example is a 3-pin circuit, topology of the MST (Minimum Spanning Tree) type, without interlayer transitions: <br><br><img src="https://habrastorage.org/webt/_l/1c/69/_l1c69q9zxt7zdvphrcf_o_zaji.jpeg"><br><br>  In this case, the "Range" is displayed as 1800: 1900, as we set in CM.  This conductor is traced with a length of 1805.95th, which is the smallest possible length for a given case.  Thus, in the Solution column, the shortest attainable length is displayed at the 1805.95th. <br><br>  In short, the solution depends on the current length of the conductor and the specified range: <br><br><ol><li>  If the ‚ÄúCurrent‚Äù value is less than the lower limit of the limit =&gt; Solution = the lower limit of the range </li><li>  If the ‚ÄúCurrent‚Äù value is greater than the upper limit of the limit =&gt; Solution = the upper limit of the range </li><li>  If the ‚ÄúCurrent‚Äù value is within our range =&gt; Solution = current conductor length </li></ol><br>  To update the Solution value in the Target Length window, click the Refresh Solution icon. <br><br><h2>  Example 3: 3-pin circuit with user topology </h2><br>  This circuit is similar to the circuit used in Example 2, but now we have defined a user topology for it. <br><br>  A custom topology is essentially a chained topology containing two FTs, one from pin 16 of IC5 to pin 9 of IC3 and the other from pin 9 of IC3 to pin 12 of IC3. <br><br><img src="https://habrastorage.org/webt/sl/ps/ev/slpsevuxbwuu353toa8a0b1_dpk.jpeg"><br><br>  The same minimum / maximum limits are used (1800: 1900). <br><br>  As we can see in the picture below, the track passes inside the IC3-9 contact pad, and then is output from the pad.  This route piece, which is embedded in the pad, will also affect the overall length of the conductor.  In addition, since there are now two FTs, the path segment that is highlighted below is part of both FTs ‚Äî this is the total, the so-called stub length ‚Äî the maximum distance from the path to the output for a T-shaped connection. <br><br><img src="https://habrastorage.org/webt/gp/qu/er/gpquerz2axdftfrtbje_nkw292q.jpeg"><br><br>  <i>* Important note # 2: Trace segments that are embedded in the pads affect the overall length of the track and are taken into account when tracing.</i> <br><br>  Below you can see the cross-section tracing of our user topology: <br><br><img src="https://habrastorage.org/webt/nv/rp/is/nvrpish5hs1tijr0qco0kr7dtdg.jpeg"><br><br>  The calculation of the target range depends on whether the FT length is inside or outside this range.  Since the min / max value of the conductor length in CM is set as 1800: 1900 th, the whole range is 100 th, or 1850 ¬± 50 th.  The two segments of the route are shown in green in the ‚ÄúCurrent‚Äù column, because their total length is within the tolerance: <br>  363.02 + 1509.63 = 1872.65 th. <br><br><img src="https://habrastorage.org/webt/xh/td/-q/xhtd-qxls8bptpbotrs1v-dnlgc.jpeg"><br><br>  Two FTs are listed in separate lines, since each segment of the route can be adjusted individually. <br><br>  Note that the ‚ÄúCurrent‚Äù values ‚Äã‚Äãcorrespond to the sum of the lengths of the trace segment and the length of the ‚Äúhemp‚Äù: <br><br>  For FT1 = 294,880 th + 68,144 th = 363.04 th <br><br>  For FT2 = 1,441.486 th + 68.144 th = 1509.63 th <br><br>  So, what is the achievable trim range for each track segment?  Since only one chain can be tuned at a time, when setting up an FT2 segment, only the length of the route that <b>does NOT</b> have common segments with FT1 can be changed. <br><br>  Note that the range of each individual section is the same as the range defined by the minimum / maximum values ‚Äã‚Äãin the Constraint Manager, i.e.  100th or ¬± 50th. <br><br>  When the algorithm determines the adjustment range for individual FT segments, it sets the upper boundary of the segment, taking the maximum value of the range defined in the CM, in this case 1900 th, and subtracts the length of the traces of the other segments included in this circuit.  Remember that the total length of the stub lenght is not taken into account, therefore we get the following: <br><br><ul><li>  for FT1, the upper bound is calculated as 1900 th - 1,441.486 th = 458,514 th.  The target range for FT1 is obtained [358.51: 458.51]. </li><li>  for FT2, respectively, 1900 th - 294.880 th = 1605.120 th.  The target range for FT2 is obtained [1505.120: 1605.120] </li></ul><br><h2>  Example 4: 3-pin ordered circuit with vias and a common route segment </h2><br>  In this example, the effect of the length of the transition hole itself is not taken into account (i.e., the Via Length Factor in the Setup&gt; Setup Parameters&gt; Via Definitions menu is zero). <br><br>  The same minimum / maximum length [1800: 1900] is used as in the examples above.  FTs (path segments) are defined in the same way in CM, where FT1 goes from IC2-3 (bottom layer) to IC3-18 (top layer), and FT2 goes from IC55-18 to IC2-3. <br><br><img src="https://habrastorage.org/webt/4g/nq/s1/4gnqs1sp8jkom9nnhvmueidmbyo.jpeg"><br><br>  Please note that there is a common route that has a length of 46.278 th with a via (from 1 to 8 layers), but we do not take into account the length of the transition.  Both the common track (shown in red) and the short track (shown in blue) are built into the corresponding pads.  The length from the vias in the top layer to the center of the pad IC3: 18 is 21.278 th. <br><br><img src="https://habrastorage.org/webt/hf/fg/mj/hffgmjplkjrs_idpxnhu_4jneaa.jpeg"><br><br><img src="https://habrastorage.org/webt/wz/sl/q9/wzslq94yivx_s4qaycytrjo53vi.jpeg"><br><br>  The definition of target ranges is performed by analogy with the previous example.  The width of the range is set based on the Min / Max limit ‚Äî 100 th or ¬± 50 th. <br><br>  For FT1, the central value of the range is calculated as: 1850 th - 21.278 th = 1828.72 th.  Thus, the target range for FT1 is 1828.72 th ¬± 50 th, or [1778.72: 1878.72]. <br><br>  For FT2, the central value of the range is: 1850 th - 93.26 th - 1663.57 th = 93.17 th, therefore, the target range is 93.17 th ¬± 50 th, or [43.17: 143.17]. <br><br>  Now let's consider the case when the FT length is out of range.  In this case, the calculation is based on the current length and deviation, which is negative if the route is too short, and positive if the route is too long.  The deviation is calculated by subtracting the value of ‚ÄúSolution‚Äù from the value of ‚ÄúCurrent‚Äù, as shown in the figure below. <br><br><img src="https://habrastorage.org/webt/v9/uk/jw/v9ukjwusogkekhtdzpe5outh8lm.jpeg"><br><br>  Change the CM range to [1840: 1900] or 1870 ¬± 30th. <br><br>  In this particular case, notice the negative deviation.  This means that both FTs are too short, and the algorithm for calculating the target range will take this into account. <br><br>  For FT1, the lower target value (TL) is determined by adding (negative) deviations to the current length, since this will be the closest match, therefore <br><br>  TL1 = 1803.11 + 15.05 = 1818.16 th. <br><br>  Since we have a tolerance of ¬± 30 th, therefore, the target range is obtained [1818.16: 1878.16]. <br><br>  Similarly for FT2: TL2 = 67.56 + 0.56 = 68.12 th, the range is obtained [68,12: 128,12]. <br><br><h2>  Example 5: 3-pin ordered chain with vias and a common path segment (including the vias length ratio) </h2><br>  In the last example, the length coefficient Via is introduced.  This parameter can be configured via the Setup&gt; Setup Parameters menu on the Via Definitions tab. <br><br>  In this example, we have the following stack of layers: <br><br><img src="https://habrastorage.org/webt/1f/xc/1n/1fxc1nnjwha2w1mnfbtu8ihvyqg.jpeg"><br><br>  <i>Note: Thickness of materials can be found in the Stackup Editor.</i> <br><br>  The track connects to the software on 1 layer and goes to layer 3. Another connection goes from layer 3 to layer 8. <br><br>  <b>Please note that to calculate the software length, the copper thickness of the initial and final layers is NOT taken into account.</b> <br><br>  In cross section, the signal topology will be as follows: <br><br><img src="https://habrastorage.org/webt/0u/py/ye/0upyyeamdjp2rtrqeowromecpxu.jpeg"><br><br>  With the Via Lenghth Factor software length ratio = 0 and the minimum / maximum length limit [1800: 1900], the target range in the Target Length window will look like the one shown in the figure below. <br><br><img src="https://habrastorage.org/webt/8y/3i/qy/8y3iqyiy4f38x4ohldllmtyqimk.jpeg"><br><br>  The value "Current" in this case is simply the length of the conductor, therefore: <br><br>  FT2 = 93.264 + 1680.948 + 46.27878 = 1820.49 <br><br>  FT1 = 21.278 + 46,278 = 67,556 <br><br>  When we set the software length factor Via Lenghth Factor = 1, we have the following result in the Target Length window: <br><br><img src="https://habrastorage.org/webt/1c/5m/co/1c5mcok0nz8cwc1eq_ircv2kima.jpeg"><br><br>  Since Via Lenghth Factor = 1, the system will add the length of the transition between layers to the length of the corresponding segments of the route, and the current length of these FromTos segments will increase: <br><br>  Current2 = Route + PO1 + PO2 = 1820.49 + 27.7 + 86.5 = 1934.69 <br><br>  Current1 = Route + Pass-Through = 67.556 + 114.9 = 182.46 <br><br>  And, since the lengths of the segments are now too large, the upper limit of the range (TU) is calculated as: <br><br>  TU1 = Current1 - Deviation1 = 1934.69 th - 77.1 th = 1857.59 th, therefore, the whole range is [1757.59: 1857.59] <br><br>  TU2 = Current2 - Deviation2 = 182.46 - 7.27 = 175.19 th, the range is [75.19: 175.19]. <br><br><h2>  Conclusion </h2><br>  The considered examples show how the algorithm for calculating the target length of the conductor, taking into account its topology, as well as the influence of the length of vias in the Target Length and Tuning Meter tools. </div><p>Source: <a href="https://habr.com/ru/post/438094/">https://habr.com/ru/post/438094/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>