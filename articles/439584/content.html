<div class="post__text post__text-html js-mediator-article">  Hi, Habr!  I want to talk about my vision of a universal programmable portable power source.  How I came to this, how the project eventually became in the gland, for which it is needed and application options, as well as its further development.  One article will not be enough, so with proper interest in this project, the next article will be devoted to the points of development and the solutions used in all details.  I ask under the cat, I really want to tell you about my project! <br><br><img src="https://habrastorage.org/webt/vi/qd/ru/viqdrujhrkihnkzjwzipfmojwjc.jpeg"><br><a name="habracut"></a><br>  In this article I want to share not only the description and purpose of the device, but also the ideological component that motivated me in this creation.  Therefore, I want to apologize in advance to the readers, who may seem a certain volume of this material.  I just could not write otherwise. <br><br><h2>  Genesis </h2><br>  I am sure that humanity will someday be able to come to a single solution to the transfer of energy, but for the time being, we are in the zoo of all different standards.  Yes, USB-C Power Delivery is still not as ubiquitous in portable technology as we would like, but it will not be a panacea for the very advanced. <br><br>  I wanted a truly versatile and flexible source of email.  energy.  So that professionals in their field could find in it a reliable and maximally universal tool for their tasks.  To make it possible for traveling to take any technique, without worrying, at times, about its sudden sad transition into a dead load and at the same time be flexible in terms of weight / capacity.  The house on the table was like a laboratory BP.  And in general, in work and everyday life did not disappoint.  However, such an obvious device for some reason was not on sale.  With one exception, entitled: "Vampirchik."  I liked the concept and approach, but its characteristics, namely the power, were clearly not enough. <br><br>  As time went on, I continued to “collective-farm” various decisions as needed.  This provision has already begun to tire pretty.  For all these years, a very clear understanding of the concept of the desired device has been formed, as well as a “critical mass” of motivation to go this way on its own!  I admit, it turned out to be very long and not yet finished. <br><br>  If the concept of complexity was not from the word quite that, with the component base and circuit engineering, everything was not so clear.  It was necessary to determine exactly what will become the basis not only for this version, but also for possible subsequent variations.  In search of the most balanced solution, several prototypes were designed and manufactured, on which I conducted all imaginable and inconceivable experiments.  I frankly did not spare the time at this stage.  Of course, as he wrote in the introduction, it deserves a separate article.  The result of all these iterations is what is shown in the photo above and below.  In general, I am satisfied! <br><br><img src="https://habrastorage.org/webt/uo/my/ew/uomyew5j9fmkgz3xyh63lyr778e.jpeg"><br><br><h2>  Concept </h2><br>  This is a programmable universal energy storage device with two high-performance converters in the input and output.  The whole thing is managed through a mobile application, as well as through an application on a PC.  Immediately calm the opponents of this approach.  There is a convenient function of saving presets on the device with configuration through the application, the subsequent work, with which it is carried out with just one button and already without any applications.  In the basic version, it can accumulate about 45 W * h of energy in the form of 4 elements of the type 18650. Many may note the not so high capacity of the internal battery, but such is the charge for adequate dimensions and weight.  Anyway, at the expense of a special connector, you have the flexible possibility of increasing the capacity with external units or with any batteries of the same type.  The output power is not limited and can briefly exceed 100 watts for a short time, lasting 50-75 watts depending on temperature.  On the ends on either side are the most common connectors for connecting everything and everyone. <br><br>  Over time, I want to come to an open API and allow you to change not only the built-in batteries, but even some components;) <br><br>  TTH: <br><br><ul><li>  Output: 3 - 25 V / 0.01 - 10 A / 50-100 W depending on temperature </li><li>  Input: 4.5 - 25 V, <abbr title="Maximum power point tracking">MRRT</abbr> </li><li>  Capacity: ~ 45-50 W * h (13600 mA * h) in the form of 4 x 18650 elements </li><li>  Efficiency of each converter is 90-96% </li><li>  Work in the mode of pass-through charging (by type of UPS) </li><li>  Hypothetical opportunity to increase capacity indefinitely </li><li>  Bluetooth LE and microUSB for control from Android / iOS and PC phones </li><li>  Quick Charge support for both microUSB inputs </li><li>  Accelerated charging support for Apple, etc. on output </li><li>  Dimensions: 133x84x31 mm </li><li>  Weight: 300 grams </li></ul><br><h3>  Concept. Accent </h3><br><img src="https://habrastorage.org/webt/io/up/tr/iouptrbmbeq4vn5ok3qcctuqzpu.jpeg" align="right">  Initially, the most important goal was efficiency.  Everything depended on it.  How much power can be obtained at the outlet before overheating begins.  How much precious energy will be lost to heat when converted to field conditions, where every gram of battery counts and, of course, will affect its size.  Along with efficiency, great attention is paid to small things, because they determine the quality of use by the device.  Equally important was the high accuracy of the output values, which was also not missed. <br><br>  Of course, despite its excellent TTX poor interface, could instantly defile the "usability" of all functions.  Realizing this, I also concentrated on this moment as I once did on the hardware, without looking at the time. <br><br><h3>  Concept. Purpose </h3><br>  Here I can not specifically say how you use it, only the flight of your thoughts and needs will determine its place in your life.  Simply give a few examples. <br><br>  Let's imagine you are a videographer.  Video filming is very energy-intensive, and you will not get enough of a regular battery for the camera.  You can buy expensive portable branded unit, which, notice, often consists of standard batteries and / or connects to the outlet.  Or you can buy a cheap standard battery adapter with a wire on Ali or connect it to my device!  Even the built-in batteries in the device will be 3-4 times larger than a typical original battery, but this is not the power.  You can place the device on the belt along with additional external battery packs (or throw it into the backpack) in this case, the energy supply will be truly enormous. <br><br>  In nature, having connected a solar battery, you can charge batteries from a drone or even a car, power a laptop from it, charge the phone.  Excess energy will simultaneously charge the device itself for the future.  If you left him, and the sun has set, he will continue to provide your equipment with energy from "its own reserves", working as a UPS.  Built-in profiles in the application will simplify charging batteries directly. <br><br>  At home on your desktop, it will become your faithful assistant in your DIY aspirations due to high power and precision of output values.  Software for the computer in addition to the basic functions of management and monitoring will allow you to write even scripts. <br><br>  In the ubiquitous daily processes, it will be an indispensable and very reliable Powerbank.  Its power is enough to charge laptops, cameras, phones, tablets, etc. <br><br><h2>  Connectors </h2><br>  All connectors are grouped as receiving on the one hand, and giving energy on the opposite side.  You can connect to the host group, connect to a car audio cassette, plug in power supplies from a laptop, power supply from a computer (CPU power cable), other batteries, solar panels, a bicycle dc generator, a thermoelectric generator, just charge from a phone, etc.  Accordingly, everything that you will charge and power - consumers connects to the outputs. <br><br><img src="https://habrastorage.org/webt/me/oc/7o/meoc7ompdfdlb1wz4vhbunqsjia.jpeg"><br><br>  Each connector does not make sense to describe, they are identical, that at the input, that at the output.  Some points still need to be clarified, namely the built-in terminal blocks are chosen for less confusion with polarity, where “+” is located in the center, and “-” on the sides.  The two round DC connectors at the output have a different thickness of the central pin (2.1 and 2.5 mm).  It should also be noted that two microUSBs at the input have Quick Charge support, but the two USBs are no longer at the output, but for that they support accelerated charging for Apple and other manufacturers' equipment.  There is a possibility that Quick Charge will be added by updating the firmware later, like other fast-charging technologies, but not yet.  All connectors are protected from reverse polarity, in other words, in case you mix up plus with minus.  Here is a list of connectors: <br><br><ul><li>  Round DC 5.5 x2.1 / 2.5 mm </li><li>  Push terminal connectors for bare wires </li><li>  Two microUSB inputs with QuickCharge </li><li>  Two output USB (Apple 2.4 A, <a href="https://ru.wikipedia.org/wiki/USB">USB Battery Charging</a> ) </li><li>  Molex 4 pin - how to power the CPU on motherboards.  You can always find this wire from a burnt ATX power supply.  I found it simple and reliable. </li></ul><br><img src="https://habrastorage.org/webt/gt/hj/be/gthjbe2u6ob7plofxxnrgd6wea8.jpeg"><br><br><h3>  Connectors.  Molex Special </h3><br>  The exception to incoming connectors is one Molex.  In the basic usage scenario, this connector is intended for connecting unlimited external battery packs or batteries of the same type.  However, in the next article I plan to reveal all the technical features of the device, and you will understand how versatile and versatile this connector is, and further development of the interface will update its functionality. <br><br><h2>  Interface </h2><br>  As hinted above on the device there are only two buttons and three LEDs, which are responsible for indicating the general state or the currently selected preset.  If one button is responsible for common functions and presets, the second for emergency stop. <br><br>  There are a few more options for using the device than just a lot and it is impossible to foresee everything.  It was logical to implement the main logic of operation and the interface of interaction with the device at the program level.  Thus, I plan to continue to further improve the interface and algorithms by adding new functions by updating the software.  Yes, and we must understand that one requires the simplest and most accessible way of interaction, and the other, on the contrary, requires professional advanced functions.  All this is easy to do in the app. <br><br>  I would not like very much to leave this section without a detailed description of the interface, mobile and PC applications.  Since there is confidence and a little bit of pride that I turned out to be a functionally unique and no less universal interface without excesses, which is ideal for most application scenarios.  But there is no desire to turn this section into a dull instruction.  Still, I can not cite a very brief description. <br><br><img src="https://habrastorage.org/webt/2o/d6/lv/2od6lvg0k81djjocyupgn3v18tm.jpeg" align="right">  By launching the application, you get to the main screen, in which you can manipulate the main three values: voltage (U), current (I) and power (P).  Note that the screen underlined U, this means that the voltage is currently the target, i.e.  setting it, the device will maintain the output voltage you set.  Also with current and power.  If, in addition to the target value, you set the other two, they will be the upper permissible limit, a restriction. <br><br>  I will give an example: you have a laptop, it is associated with red (for example, it has design elements of red).  You need to brush on the next screen, which looks exactly the same, but is decorated not in green, but in red, which corresponds to the color of the LED on the device, which in turn is responsible for this preset.  On it you scroll the voltage to the desired, for example, 19.5 V. Everything.  You can immediately apply it to turn on the device or simply close it, which will automatically save it as a red preset.  When you need to charge, just press the button to select the preset corresponding to the red LED without the participation of the phone. <br><br><h2>  Further development </h2><br>  Since I originally laid the modular design not only of iron, but also of software, this will allow me to make at least a few variations.  Be sure to be a variation with USB-C Power Delivery.  I'd like to make a compact version without batteries, as a cheap alternative to a laboratory power supply unit with the possibility of programming, perhaps even in a polyphase / multichannel layout.  On the basis of the existing board, obviously, will be prof.  Revision with increased power and voltage up to 36 V, without regard to cost. <br><br>  That's all for now.  Hope you enjoyed it! <br><br>  I want to express a special thank you for the uncompromising and urgent recommendations in writing this article. <a href="https://habr.com/ru/users/maiorovx/" class="user_link">Maiorovx</a> </div>