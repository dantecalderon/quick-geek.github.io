<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>EcmaScript 10 - JavaScript This Year</title>
  <meta name="description" content="Standardization JS has moved to a year-long update cycle, and the beginning of the year is a great time to find out what awaits us in the anniversary ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>EcmaScript 10 - JavaScript This Year</h1><div class="post__text post__text-html js-mediator-article"><p>  Standardization JS has moved to a year-long update cycle, and the beginning of the year is a great time to find out what awaits us in the anniversary - the tenth edition of EcmaScript! </p><br><p>  <em>ES</em> 9 is the <a href="https://www.ecma-international.org/publications/standards/Ecma-262.htm">current version of the specification</a> . </p><br><p>  <em>ES</em> 10 is still a <a href="https://tc39.github.io/ecma262/">draft</a> . </p><br><p>  Today in <a href="https://habr.com/ru/post/437806/"><em>Stage</em> <strong>4</strong> <sup># there</sup></a> are only a few sentences. </p><br><p>  And in <a href="https://habr.com/ru/post/437806/"><em>Stage</em> <strong>3</strong> <sup>#</sup></a> - a whole dozen! </p><br><p>  Of these, in my opinion, the most interesting are <a href="https://habr.com/ru/post/437806/">private class fields <sup>#</sup></a> , <a href="https://habr.com/ru/post/437806/">shebang grammar for scripts <sup>#</sup></a> , <a href="https://habr.com/ru/post/437806/">arbitrary precision numbers <sup>#</sup></a> , <a href="https://habr.com/ru/post/437806/">access to the global context <sup>#</sup></a> and <a href="https://habr.com/ru/post/437806/">dynamic imports <sup>#</sup></a> . </p><br><p><br><img src="https://habrastorage.org/webt/j-/g9/na/j-g9nan1y54iew_qzum-eodzfgw.png" alt="KDPV: Yellow magnet with the inscription &quot;JS ES10&quot; on the screen - from kasper.green &amp; elfafeya.art"><br>  <sup>Photo by: kasper.green;</sup>  <sup>Yellow Magnet: elfafeya.art &amp; kasper.green</sup> </p><a name="habracut"></a><br><h2 id="soderzhanie">  Content </h2><br><h3 id="pyat-stadiysup-suppyat-stadiy">  <a href="https://habr.com/ru/post/437806/">Five stages</a> </h3><br><h3 id="stage-4--finalsup-sup-stage-4">  <a href="https://habr.com/ru/post/437806/">Stage 4 - Final <sup>#</sup></a> </h3><br><p> ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>catch</strong></code> - the argument has become optional <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>Symbol().description</strong></code> - accessor to the description of the <sup>#</sup> symbol</a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>'—Å—Ç—Ä–æ–∫–∏ EcmaScript'</strong></code> - improved compatibility with <strong>JSON</strong> format <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>.toString()</strong></code> - prototype method updated <sup>#</sup></a> . </p><br><hr><br><h3 id="stage-3--pre-releasesup-sup-stage-3">  <a href="https://habr.com/ru/post/437806/">Stage 3 - Pre-release <sup>#</sup></a> </h3><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>#</strong></code> - private all classes, through <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>#!/usr/bin/env node</strong></code> - shebang grammar for scripts <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>BigInt()</strong></code> is a new primitive, for arbitrary precision numbers <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>globalThis</strong></code> - a new way to access the global context <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>import(dynamic)</strong></code> - dynamic import <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>import.meta</strong></code> - meta-information about the loaded module <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>Object.fromEntries()</strong></code> - creating an object from an array of pairs - key \ value <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>JSON.stringify()</strong></code> - fix method <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>RegExp</strong></code> - outdated features <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>.trimStart()</strong></code> and <strong><code>.trimEnd()</code></strong> - prototype methods for strings <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>.matchAll()</strong></code> - <strong><code>.match()</code></strong> with the global flag <sup>#</sup></a> ; </p><br><p>  ‚Ä¢ <a href="https://habr.com/ru/post/437806/"><code><strong>.flat()</strong></code> and <strong><code>.flatMap()</code></strong> - prototype methods of arrays <sup>#</sup></a> . </p><br><h3 id="itogisup-supitogi">  <a href="https://habr.com/ru/post/437806/">Results</a> </h3><br><hr><br><h2 id="pyat-stadiy">  Five stages </h2><br><p>  <sub><em>Stage</em></sub> <strong>0</strong> ‚Üì <strong>Strawman Basting An</strong> Idea that can be implemented through the <strong>Babel</strong> plugin .; </p><br><p>  <sub><em>Stage</em></sub> <strong>1</strong> ‚Üì <strong>Proposal</strong> <sup><strong>Suggestion</strong></sup> Testing the viability of an idea .; </p><br><p>  <sub><em>Stage</em></sub> <strong>2</strong> ‚Üì <strong>Draft</strong> <sup><strong>Draft</strong></sup> Begin the development of the specification .; </p><br><p>  <sub><em>Stage</em></sub> <strong>3</strong> ‚Üì <strong>Candidate</strong> <sup><strong>Candidate</strong></sup> Preliminary version of the specification .; </p><br><p>  <sub><em>Stage</em></sub> <strong>4</strong> ÷ç <strong>Finished</strong> <sup><strong>The</strong></sup> final version of the specification for this year has been completed. </p><br><hr><br><p>  We will consider only <em>Stage</em> <strong>4</strong> - the de facto standard. </p><br><p>  And <em>Stage</em> <strong>3</strong> - which is about to become part of it. </p><br><hr><br><p></p><br><h2 id="-stage-4">  ÷ç Stage 4 </h2><br><p>  These changes are already included in the standard. </p><br><h3 id="neobyazatelnyy-argument-u-catch">  Optional argument of <code>catch</code> </h3><br><p>  <a href="https://github.com/tc39/proposal-optional-catch-binding">https://github.com/tc39/proposal-optional-catch-binding</a> </p><br><p>  Before <em>ES</em> 10, a <code>catch</code> required a mandatory argument to collect error information, even if it is not used: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isValidJSON</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">text</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(text); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(unusedVariable) { <span class="hljs-comment"><span class="hljs-comment">// –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è return false; } }</span></span></code> </pre> <br><p><img src="https://habrastorage.org/webt/ez/l2/2d/ezl22di9ciu-4g60nlqyuqne7lk.png"><br>  <sup><em>Edge</em> is not yet updated to <em>ES</em> 10, and is expected to fail with an error</sup> </p><br><p>  Starting from the <em>ES</em> 10 edition, the parentheses can be omitted and the <code>catch</code> will look like two drops of water similar to <code>try</code> . </p><br><p><img src="https://habrastorage.org/webt/yi/ia/qg/yiiaqgiclyxz_i7bf3gq14dj-8m.png"><br>  <sup>My Chrome has already been updated to <em>ES</em> 10, and in some places to <em>Stage</em> <strong>3</strong> .</sup>  <sup>Further screenshots will be from <em>Chrome</em></sup> </p><br><div class="spoiler">  <b class="spoiler_title">source</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isValidJSON</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">text</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(text); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { <span class="hljs-comment"><span class="hljs-comment">// –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ return false; } }</span></span></code> </pre> </div></div><br><p><br></p><br><h2 id="dostup-k-opisaniyu-simvolnoy-ssylki">  Access to the symbolic link description </h2><br><p>  <a href="https://tc39.github.io/proposal-Symbol-description/">https://tc39.github.io/proposal-Symbol-description/</a> </p><br><p>  The description of a symbolic link can be indirectly obtained by the toString () method: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> symbol_link = <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>(<span class="hljs-string"><span class="hljs-string">"Symbol description"</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(symbol_link) <span class="hljs-comment"><span class="hljs-comment">// "Symbol(Symbol description)"</span></span></code> </pre> <br><p>  Starting with <em>ES</em> 10, characters now have a description property that is read-only.  It allows you to get a description of the symbol without any dancing with a tambourine: </p><br><pre> <code class="javascript hljs">symbol_link.description <span class="hljs-comment"><span class="hljs-comment">// "Symbol description"</span></span></code> </pre> <br><p>  If the description is not specified, it will be returned - <code>undefined</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> without_description_symbol_link = <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>() without_description_symbol_link.description <span class="hljs-comment"><span class="hljs-comment">// undefined const empty_description_symbol_link = Symbol('') empty_description_symbol_link.description // ""</span></span></code> </pre> <br><p><br></p><br><h3 id="stroki-ecmascript-sovmestimye-s-json">  JSON compatible EcmaScript strings </h3><br><p>  <a href="https://github.com/tc39/proposal-json-superset">https://github.com/tc39/proposal-json-superset</a> </p><br><p>  EcmaScript to the tenth edition claims that <em>JSON</em> is a subset of <code>JSON.parse</code> , but this is not true. </p><br><p>  <em>JSON</em> lines can contain unshielded delimiter characters for <strong><code>U+2028</code></strong> <sup><em>LINE SEPARATOR lines</em></sup> and <strong><code>U+2029</code></strong> <sup><em>PARAGRAPH SEPARATOR paragraphs</em></sup> . </p><br><p>  <em>ECMAScript</em> lines up to version 10 are not. </p><br><p>  If you call <code>eval()</code> with the string <code>"\u2029"</code> in <em>Edge</em> , <br>  it behaves as if we had done a line break - right in the middle of the code: </p><br><p><img src="https://habrastorage.org/webt/vc/yg/-v/vcyg-vy7larz8y4kswiqinjhfh4.png"></p><br><p></p><br><p>  C <em>ES</em> 10 lines - everything is in order: </p><br><p><img src="https://habrastorage.org/webt/tc/he/tm/tchetmze4axxtp5wghm7pmz-0xc.png"></p><br><p><br></p><br><h3 id="dorabotka-prototipnogo-metoda-tostring">  Completion of the prototype method <code>.toString()</code> </h3><br><p>  <a href="http://tc39.github.io/Function-prototype-toString-revision/">http://tc39.github.io/Function-prototype-toString-revision/</a> </p><br><div class="spoiler">  <b class="spoiler_title">Goals change</b> <div class="spoiler_text"><ul><li>  remove the incompatible requirement: </li></ul><br><blockquote>  If the implementation cannot create a source line that matches these criteria, it should return a string for which eval will throw an exception with a syntax error. </blockquote><br><ul><li><p>  clarify the ‚Äúfunctionally equivalent‚Äù requirement; </p><br></li><li><p>  standardize string representation of built-in functions and host objects; </p><br></li><li><p>  clarify the presentation requirements based on the ‚Äúactual characteristics‚Äù of the object; </p><br></li><li><p>  make sure that parsing the string contains the same function body and parameter list as the original; </p><br></li><li><p>  for functions defined using ECMAScript code, toString should return a fragment of the source text from the beginning of the first token to the end of the last token corresponding to the corresponding grammatical structure; </p><br></li><li><p>  for built-in functional objects, toStrings should not return anything but NativeFunction; </p><br></li><li><p>  for callees that have not been defined using ECMAScript code, the toString must be returned to NativeFunction; </p><br></li><li><p>  for functions created dynamically (constructors of a function or a generator), toString must synthesize the source text; </p><br></li><li><p>  for all other objects, toString should throw a TypeError exception. </p><br></li></ul></div></div><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è function () { console.log('My Function!'); }.toString(); // function () { console.log('My Function!'); } // –ú–µ—Ç–æ–¥ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –æ–±—ä–µ–∫—Ç Number.parseInt.toString(); // function parseInt() { [native code] } // –§—É–Ω–∫—Ü–∏—è —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ function () { }.bind(0).toString(); // function () { [native code] } // –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤—ã–∑—ã–≤–∞–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç—ã Symbol.toString(); // function Symbol() { [native code] } // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç Function().toString(); // function anonymous() {} // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä function* () { }.toString(); // function* () { } // .call —Ç–µ–ø–µ—Ä—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∂–¥—ë—Ç, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞, —Ñ—É–Ω–∫—Ü–∏—é Function.prototype.toString.call({}); // Function.prototype.toString requires that 'this' be a Function"</span></span></code> </pre> <br><hr><br><p><br></p><br><h2 id="-stage-3">  ÷ç Stage 3 </h2><br><p>  Proposals that were released from the draft status, but not yet included in the final version of the standard. </p><br><h3 id="privatnyestaticheskiepublichnye-metodysvoystvaatributy-u-klassov">  Private \ static \ public methods \ properties \ attributes for classes </h3><br><p>  <a href="https://github.com/tc39/proposal-class-fields">https://github.com/tc39/proposal-class-fields</a> <br>  <a href="https://github.com/tc39/proposal-private-methods">https://github.com/tc39/proposal-private-methods</a> <br>  <a href="https://github.com/tc39/proposal-static-class-features">https://github.com/tc39/proposal-static-class-features</a> <br></p><br><p>  In some languages ‚Äã‚Äãthere is an agreement to call private methods through a visible space <sup>(‚Äú <strong>_</strong> ‚Äù is such a piece, you may know this sign under the wrong name - underscore)</sup> . </p><br><p>  For example: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AdultContent</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $_age = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $_content = <span class="hljs-string"><span class="hljs-string">'‚Ä¶is dummy example content (‚Ä¢)(‚Ä¢) ‚Äî3 (.)(.) only for adults‚Ä¶'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($age)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_age = $age; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($name === <span class="hljs-string"><span class="hljs-string">'content'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">" (age: "</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_age.<span class="hljs-string"><span class="hljs-string">") ‚Üí "</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_getContent().<span class="hljs-string"><span class="hljs-string">"\r\n"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'without info'</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_getContent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_contentIsAllowed()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_content; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'Sorry. Content not for you.'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_contentIsAllowed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_age &gt;= <span class="hljs-number"><span class="hljs-number">18</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__toString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;content; } } <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;pre&gt;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> strval(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AdultContent(<span class="hljs-number"><span class="hljs-number">10</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// (age: 10) ‚Üí Sorry. Content not for you echo strval(new AdultContent(25)); // (age: 25) ‚Üí ‚Ä¶is dummy example content (‚Ä¢)(‚Ä¢) ‚Äî3 only for adults‚Ä¶ $ObjectAdultContent = new AdultContent(32); echo $ObjectAdultContent-&gt;content; // (age: 32) ‚Üí ‚Ä¶is dummy example content (‚Ä¢)(‚Ä¢) ‚Äî3 only for adults‚Ä¶ </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br><p>  Let me remind you - this is only an agreement.  Nothing prevents you from using the prefix for other purposes, using another prefix, or not using it at all. </p><br><p>  <sup>Personally, I am impressed by the idea of ‚Äã‚Äãusing the space character as a prefix for functions that return <code>this</code> .</sup>  <sup>So they can be chained together.</sup> </p><br><p>  The developers of the <em>EcmaScript</em> specification went further and made the prefix- <strong>octotorp</strong> <sup>(‚Äú <strong>#</strong> ‚Äù ‚Äîshort, hash)</sup> part of the syntax. </p><br><p>  The previous example in <em>ES</em> 10 can be rewritten as follows: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AdultContent</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∞—Å—Å–∞ #age = 0 #adult_content = '‚Ä¶is dummy example content (‚Ä¢)(‚Ä¢) ‚Äî3 (.)(.) only for adults‚Ä¶' constructor(age) { this.#setAge(age) } // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ static #userIsAdult(age) { return age &gt; 18 } // –ü—É–±–ª–∏—á–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ get content () { return `(age: ${this.#age}) ‚Üí ` + this.#allowed_content } // –ü—Ä–∏–≤–∞—Ç–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ get #allowed_content() { if(AdultContent.userIsAdult(this.age)){ return this.#adult_content } else { return 'Sorry. Content not for you.' } } // –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ #setAge(age) { this.#age = age } toString () { return this.#content } } const AdultContentForKid = new AdultContent(10) console.log(String(AdultContentForKid)) // (age: 10) ‚Üí Sorry. Content not for you. console.log(AdultContentForKid.content) // (age: 10) ‚Üí Sorry. Content not for you. const AdultContentForAdult = new AdultContent(25) console.log(String(AdultContentForAdult)) // (age: 25) ‚Üí ‚Ä¶is dummy example content (‚Ä¢)(‚Ä¢) ‚Äî3 (.)(.) only for adults‚Ä¶ console.log(AdultContentForAdult.content) // (age: 25) ‚Üí ‚Ä¶is dummy example content (‚Ä¢)(‚Ä¢) ‚Äî3 (.)(.) only for adults‚Ä¶</span></span></code> </pre><br><p>  The example is unnecessarily complicated to show private properties, methods, and attributes at once.  But in general, JS - pleases the eye with its brevity compared with the PHP option.  No private function for you _..., no semicolons at the end of the line, and a dot instead of "-&gt;" to go deep into the object. </p><br><p>  Named getters.  For dynamic names, proxies are objects. </p><br><p>  It seems to be little things, but after switching to JS, there is less and less desire to return to PHP. </p><br><p>  By the way, private accessors are only available with Babel 7.3.0 and later. </p><br><p>  At the time of this writing, the latest version according to npmjs.com is 7.2.2 </p><br><p>  We are waiting in Stage 4! </p><br><p><br></p><br><h3 id="shebang-grammatika">  Shebang grammar </h3><br><p>  <a href="https://github.com/tc39/proposal-hashbang">https://github.com/tc39/proposal-hashbang</a> </p><br><p>  Heshbang is a Unicsoid familiar way to specify an interpreter for an executable file: </p><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">#!/usr/bin/env node // –≤ —Å–∫—Ä–∏–ø—Ç–µ 'use strict'; console.log(1);</span></span></code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">#!/usr/bin/env node // –≤ –º–æ–¥—É–ª–µ export {}; console.log(1);</span></span></code> </pre> <br><p>  <sup>at the moment, on a similar trick, <em>Chrome is</em> throwing <code>SyntaxError: Invalid or&amp;nbsp;unexpected token</code></sup> <br><br></p><br><h3 id="bolshie-chisla-s-bigint">  Big numbers with BigInt </h3><br><p>  <a href="https://github.com/tc39/proposal-bigint">https://github.com/tc39/proposal-bigint</a> </p><br><div class="spoiler">  <b class="spoiler_title">browser support</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/2z/zx/yy/2zzxyyqe3q713u_6bpsgfa0uwyo.png" alt="Browser support for the primitive BigInt ()"></p></div></div><br><p>  The maximum integer that can be safely used in JavaScript (2‚Åµ¬≥ - 1): </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>.MAX_SAFE_INTEGER) <span class="hljs-comment"><span class="hljs-comment">// 9007199254740991</span></span></code> </pre> <br><p>  BigInt is needed to use arbitrary precision numbers. </p><br><p>  This type is declared in several ways: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// –∏—Å–ø–æ–ª—å–∑—É—è 'n' –ø–æ—Å—Ç—Ñ–∏–∫—Å –≤ –∫–æ–Ω—Ü–µ –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã—Ö —á–∏—Å–µ–ª 910000000000000100500n // 910000000000000100500n // –Ω–∞–ø—Ä—è–º—É—é –ø–µ—Ä–µ–¥–∞–≤ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–∏–º–∏—Ç–∏–≤–∞ BigInt() –±–µ–∑ –ø–æ—Å—Ç—Ñ–∏–∫—Å–∞ BigInt( 910000000000000200500 ) // 910000000000000200500n // –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–≤ —Å—Ç—Ä–æ–∫—É –≤ —Ç–æ—Ç-–∂–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä BigInt( "910000000000000300500" ) // 910000000000000300500n // –ø—Ä–∏–º–µ—Ä –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–≥–æ —á–∏—Å–ª–∞ –¥–ª–∏–Ω–æ–π 1642 –∑–Ω–∞–∫–∞ BigInt( "" ) \\</span></span></code> </pre> <br><p>  This is a new primitive type: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> <span class="hljs-number"><span class="hljs-number">123</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ‚Üí 'number' typeof 123n; // ‚Üí 'bigint'</span></span></code> </pre> <br><p>  It can be compared with ordinary numbers: </p><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">42</span></span>n === BigInt(<span class="hljs-number"><span class="hljs-number">42</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ‚Üí true 42n == 42; // ‚Üí true</span></span></code> </pre> <br><p>  But mathematical operations need to be carried out within one type: </p><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">20000000000000</span></span>n/<span class="hljs-number"><span class="hljs-number">20</span></span>n <span class="hljs-comment"><span class="hljs-comment">// 1000000000000n 20000000000000n/20 // Uncaught TypeError: Cannot mix BigInt and other types, use explicit conversions</span></span></code> </pre><br><p>  Unary minus is supported, unary plus returns an error: </p><br><pre> <code class="javascript hljs"> <span class="hljs-number"><span class="hljs-number">-2</span></span>n <span class="hljs-comment"><span class="hljs-comment">// -2n +2n // Uncaught TypeError: Cannot convert a BigInt value to a number</span></span></code> </pre><br><p></p><br><h3 id="globalthis--novyy-sposob-dostupa-k-globalnomu-kontekstu">  <code>globalThis</code> - a new way to access the global context </h3><br><p>  <a href="https://github.com/tc39/proposal-global">https://github.com/tc39/proposal-global</a> </p><br><p>  <sup><em>works in chrome</em></sup> </p><br><p>  Since the implementation of the global scope is dependent on a particular engine, you had to do something like this before: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> getGlobal = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> self !== <span class="hljs-string"><span class="hljs-string">'undefined'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">window</span></span> !== <span class="hljs-string"><span class="hljs-string">'undefined'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> global !== <span class="hljs-string"><span class="hljs-string">'undefined'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> global; } <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'unable to locate global object'</span></span>); };</code> </pre> <br><p>  And even this option did not guarantee that everything will work exactly. </p><br><p>  <code>globalThis</code> is a common way for all platforms to access the global scope: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É –º–∞—Å—Å–∏–≤–∞ globalThis.Array(1,2,3) // [1, 2, 3] // –ó–∞–ø–∏—Å—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ globalThis.myGLobalSettings = { it_is_cool: true } // –ß—Ç–µ–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ globalThis.myGLobalSettings // {it_is_cool: true}</span></span></code> </pre> <br><p><br></p><br><h3 id="dinamicheskiy-importdynamic">  Dynamic <code>import(dynamic)</code> </h3><br><p>  <a href="https://github.com/tc39/proposal-dynamic-import">https://github.com/tc39/proposal-dynamic-import</a> </p><br><div class="spoiler">  <b class="spoiler_title">browser support</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/lx/66/nh/lx66nhte2i7jlnuuq_tdtpn-vdw.png" alt="Browser support for dynamic imports"></p></div></div><br><p>  I wanted variables in import strings‚ÄΩ With dynamic imports, it became possible: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(<span class="hljs-string"><span class="hljs-string">`./language-packs/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${navigator.language}</span></span></span><span class="hljs-string">.js`</span></span>)</code> </pre> <br><p>  Dynamic import is an asynchronous operation.  Returns a promise that, after loading a module, returns it to the callback function. </p><br><p>  Therefore, modules can be loaded - deferred, when necessary: </p><br><pre> <code class="javascript hljs">element.addEventListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-comment"><span class="hljs-comment">// –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å await —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è –ø—Ä–æ–º–∏—Å–∞ const module = await import(`./events_scripts/supperButtonClickEvent.js`) module.clickEvent() })</span></span></code> </pre> <br><p>  Syntactically, it looks like a call to the <code>import()</code> function, but is not inherited from <code>Function.prototype</code> , which means it will not be possible to call via <code>call</code> or <code>apply</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span>.call(<span class="hljs-string"><span class="hljs-string">"example this"</span></span>, <span class="hljs-string"><span class="hljs-string">"argument"</span></span>) <span class="hljs-comment"><span class="hljs-comment">// Uncaught SyntaxError: Unexpected identifier</span></span></code> </pre> <br><p><br></p><br><h3 id="importmeta--meta-informaciya-o-zagruzhaemom-module">  import.meta - meta-information about the loaded module. </h3><br><p>  <a href="https://github.com/tc39/proposal-import-meta">https://github.com/tc39/proposal-import-meta</a> </p><br><p>  <sup><em>works in chrome</em></sup> </p><br><p>  In the code of the loadable module it became possible to obtain information on it.  Now it is only the address where the module was loaded: </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-keyword"><span class="hljs-keyword">import</span></span>.meta); <span class="hljs-comment"><span class="hljs-comment">// { url: "file:///home/user/my-module.js" }</span></span></code> </pre> <br><p><br></p><br><h3 id="sozdanie-obekta-metodom-objectfromentries">  Creating an object using <code>Object.fromEntries()</code> </h3><br><p>  <a href="https://github.com/tc39/proposal-object-from-entries">https://github.com/tc39/proposal-object-from-entries</a> </p><br><p>  Analog to <code>_.fromPairs</code> from <code>lodash</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.fromEntries([[<span class="hljs-string"><span class="hljs-string">'key_1'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>], [<span class="hljs-string"><span class="hljs-string">'key_2'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]]) <span class="hljs-comment"><span class="hljs-comment">// {key_1: 1; key_2: 2}</span></span></code> </pre> <br><p><br></p><br><h3 id="fiks-metoda-jsonstringify">  Fix method <code>JSON.stringify()</code> </h3><br><p>  <a href="https://github.com/tc39/proposal-well-formed-stringify">https://github.com/tc39/proposal-well-formed-stringify</a> </p><br><p>  Section <a href="https://tools.ietf.org/html/rfc8259">8.1 of RFC 8259</a> requires that <em>JSON</em> text exchanged outside a closed ecosystem is encoded using UTF-8, but JSON.stringify may return strings containing code points that are not represented in UTF-8 (in particular, surrogate code points from U + D800 to U + DFFF) </p><br><p>  So the string <code>\uDF06\uD834</code> after processing JSON.stringify () turns into <code>\\udf06\\ud834</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* –ù–µ–ø–∞—Ä–Ω—ã–µ —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –±—É–¥—É—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(<span class="hljs-string"><span class="hljs-string">'\uDF06\uD834'</span></span>) <span class="hljs-string"><span class="hljs-string">'"\\udf06\\ud834"'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(<span class="hljs-string"><span class="hljs-string">'\uDEAD'</span></span>) <span class="hljs-string"><span class="hljs-string">'"\\udead"'</span></span></code> </pre> <br><p>  This should not be, and the new specification fixes this.  <sup><em>Edge</em> and <em>Chrome</em> have already been updated.</sup> </p><br><p><br></p><br><h3 id="ustarevshie-vozmozhnosti-regexp">  Outdated RegExp features </h3><br><p>  <a href="https://github.com/tc39/proposal-regexp-legacy-features">https://github.com/tc39/proposal-regexp-legacy-features</a> </p><br><p>  Specification for obsolete <em>RegExp</em> functions, such as the <code>RegExp.$1</code> , and <code>RegExp.prototype.compile()</code> method. </p><br><p><br></p><br><h3 id="prototipnye-metody-strok-trimstart-i-trimend">  Prototype methods for strings <code>.trimStart()</code> and <code>.trimEnd()</code> </h3><br><p>  <a href="https://github.com/tc39/proposal-string-left-right-trim">https://github.com/tc39/proposal-string-left-right-trim</a> </p><br><p>  <sup><em>works in chrome</em></sup> </p><br><p>  By analogy with the methods <code>.padStart()</code> and <code>.padEnd()</code> , cut off the whitespace at the beginning and end of the line, respectively: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> one = <span class="hljs-string"><span class="hljs-string">" hello and let "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> two = <span class="hljs-string"><span class="hljs-string">"us begin. "</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( one.trimStart() + two.trimEnd() ) <span class="hljs-comment"><span class="hljs-comment">// "hello and let us begin."</span></span></code> </pre> <br><p><br></p><br><h3 id="matchall--novyy-prototipnyy-metod-strok">  .matchAll () is a new prototype string method. </h3><br><p>  <a href="https://github.com/tc39/proposal-string-matchall">https://github.com/tc39/proposal-string-matchall</a> </p><br><p>  <sup><em>works in chrome</em></sup> </p><br><p>  It works as a <code>.match()</code> method with the <code>g</code> flag turned on, but returns an iterator: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> string_for_searh = <span class="hljs-string"><span class="hljs-string">'olololo'</span></span> <span class="hljs-comment"><span class="hljs-comment">// –í–µ—Ä–Ω—ë—Ç –ø–µ—Ä–≤–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –Ω—ë–º string_for_searh.match(/o/) // ["o", index: 0, input: "olololo", groups: undefined] //–í–µ—Ä–Ω—ë—Ç –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –≤—Ö–æ–∂–¥–µ–Ω–∏–π –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ string_for_searh.match(/o/g) // ["o", "o", "o", "o"] // –í–µ—Ä–Ω—ë—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä string_for_searh.matchAll(/o/) // {_r: /o/g, _s: "olololo"} // –ò—Ç–µ—Ä–∞—Ç–æ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞–∂–¥–æ–µ –ø–æ—Å–ª–µ–¥—É—é—â–µ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π, // –∫–∞–∫ –µ—Å–ª–∏ –±—ã –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ .match –±–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ñ–ª–∞–≥–∞ for(const item of string_for_searh.matchAll(/o/)) { console.log(item) } // ["o", index: 0, input: "olololo", groups: undefined] // ["o", index: 2, input: "olololo", groups: undefined] // ["o", index: 4, input: "olololo", groups: undefined] // ["o", index: 6, input: "olololo", groups: undefined]</span></span></code> </pre> <br><p>  The argument must be a regular expression, otherwise an exception will be thrown: </p><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'olololo'</span></span>.matchAll(<span class="hljs-string"><span class="hljs-string">'o'</span></span>) <span class="hljs-comment"><span class="hljs-comment">// Uncaught TypeError: o is not a regexp!</span></span></code> </pre> <br><p><br></p><br><h3 id="odnomernye-massivy-s-flat-i-flatmap">  One-dimensional arrays with <code>.flat()</code> and <code>.flatMap()</code> </h3><br><p>  <a href="https://github.com/tc39/proposal-flatMap">https://github.com/tc39/proposal-flatMap</a> </p><br><p>  <sup><em>works in chrome</em></sup> </p><br><p>  The array got prototypes <code>.flat()</code> and <code>.flatMap()</code> , which are generally similar to the implementation in <em>lodash</em> , but still have some differences.  Optional argument - sets the maximum depth of the tree: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> deep_deep_array = [ <span class="hljs-string"><span class="hljs-string">'‚â•0 ‚Äî –ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'‚â•1 ‚Äî –≤—Ç–æ—Ä–æ–π —É—Ä–æ–≤–µ–Ω—å'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'‚â•2 ‚Äî —Ç—Ä–µ—Ç–∏–π —É—Ä–æ–≤–µ–Ω—å'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'‚â•3 ‚Äî —á–µ—Ç–≤—ë—Ä—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'‚â•4 ‚Äî –ø—è—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å'</span></span> ] ] ] ] ] <span class="hljs-comment"><span class="hljs-comment">// 0 ‚Äî –≤–µ—Ä–Ω—ë—Ç –º–∞—Å—Å–∏–≤ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π deep_deep_array.flat(0) //  ["‚â•0 ‚Äî –ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å", Array(2)] // 1 ‚Äî –≥–ª—É–±–∏–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é deep_deep_array.flat() //  ["–ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å", "–≤—Ç–æ—Ä–æ–π —É—Ä–æ–≤–µ–Ω—å", Array(2)] deep_deep_array.flat(2) //  ["–ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å", "–≤—Ç–æ—Ä–æ–π —É—Ä–æ–≤–µ–Ω—å", "—Ç—Ä–µ—Ç–∏–π —É—Ä–æ–≤–µ–Ω—å", Array(2)] deep_deep_array.flat(100500) // ["–ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å", "–≤—Ç–æ—Ä–æ–π —É—Ä–æ–≤–µ–Ω—å", "—Ç—Ä–µ—Ç–∏–π —É—Ä–æ–≤–µ–Ω—å", "—á–µ—Ç–≤—ë—Ä—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å", "–ø—è—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å"]</span></span></code> </pre> <br><p>  <code>.flatMap()</code> equivalent to a sequential call to <code>.map().flat()</code> .  The callback function passed to the method must return an array that will become part of a common flat array: </p><br><pre> <code class="javascript hljs">[<span class="hljs-string"><span class="hljs-string">'Hello'</span></span>, <span class="hljs-string"><span class="hljs-string">'World'</span></span>].flatMap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">word</span></span></span><span class="hljs-function"> =&gt;</span></span> [...word]) <span class="hljs-comment"><span class="hljs-comment">// ["H", "e", "l", "l", "o", "W", "o", "r", "l", "d"]</span></span></code> </pre> <br><p>  Using only <code>.flat()</code> and <code>.map()</code> , the example can be rewritten as: </p><br><pre> <code class="javascript hljs"> [<span class="hljs-string"><span class="hljs-string">'Hello'</span></span>, <span class="hljs-string"><span class="hljs-string">'World'</span></span>].map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">word</span></span></span><span class="hljs-function"> =&gt;</span></span> [...word]).flat() <span class="hljs-comment"><span class="hljs-comment">// ["H", "e", "l", "l", "o", "W", "o", "r", "l", "d"]</span></span></code> </pre> <br><p>  Also note that <code>.flatMap()</code> , unlike <code>.flat()</code> does not have a detour depth setting.  So only the first level will be stuck together. </p><br><hr><br><p><br></p><br><h2 id="itogi">  Results </h2><br><p>  <em>Stage</em> <strong>4</strong> brought more cosmetic changes.  Of interest is <em>Stage</em> <strong>3</strong> .  Most of the proposals in <em>Chrome</em> have already been implemented, except perhaps <code>Object.fromEntries()</code> , the presence of which is not critical, and we are <code>Object.fromEntries()</code> forward to private properties. </p><br><p></p><br><hr><br><p></p><br><h2 id="ispravleniya-v-state">  Corrections in the article </h2><br><p><br>  If you notice an inaccuracy in the article, a mistake or something to add - you can write me a <a href="https://habr.com/ru/conversations/KasperGreen/">personal message</a> , but rather you can use the article‚Äôs repository <a href="https://github.com/KasperGreen/es10">https://github.com/KasperGreen/es10</a> yourself.  For an active contribution, I will reward with a yellow magnet-medal with KDPV. </p><br><h2 id="materialy-po-teme">  Materials on the topic </h2><br><p> <sup><img src="https://habrastorage.org/storage3/2e2/522/737/2e2522737ec404a9f76047e108dfaea0.gif" alt="English material"></sup>  <a href="https://www.ecma-international.org/publications/standards/Ecma-262.htm">The current version of the standard Ecma-262</a> </p><br><p> <sup><img src="https://habrastorage.org/storage3/2e2/522/737/2e2522737ec404a9f76047e108dfaea0.gif" alt="English material"></sup>  <a href="https://tc39.github.io/ecma262/">Draft of the next version of the standard Ecma-262</a> </p><br><p>  <a href="https://ru.wikipedia.org/wiki/ECMAScript">ECMAScript</a> </p><br><p>  <a href="https://medium.com/devschacht/javascripts-new-private-class-fields-c60daffe361b">New # private class fields in javascript</a> </p><br><p> <sup><img src="https://habrastorage.org/storage2/c57/b92/af4/c57b92af4ee0d37f787c211a068b1b95.png" alt="Article on Habr√©"></sup>  <a href="https://habr.com/ru/company/ruvds/blog/431872/">Overview of ES7, ES8 and ES9 standards</a> </p><br><p>  <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B5%25D0%25B1%25D0%25B0%25D0%25BD%25D0%25B3_(Unix)">Shebang</a> </p><br><p> <sup><img src="https://habrastorage.org/storage2/c57/b92/af4/c57b92af4ee0d37f787c211a068b1b95.png" alt="Article on Habr√©"></sup>  <a href="https://habr.com/ru/post/354930/">BigInt - long arithmetic in javascript</a> </p><br><p> <sup><img src="https://habrastorage.org/storage2/c57/b92/af4/c57b92af4ee0d37f787c211a068b1b95.png" alt="Article on Habr√©"></sup>  <a href="https://habr.com/ru/post/181536/">JavaScript module path</a> </p><br><p> <sup><img src="https://habrastorage.org/storage3/2e2/522/737/2e2522737ec404a9f76047e108dfaea0.gif" alt="English material"></sup>  <a href="">Why not private x</a> </p><br><p> <sup><img src="https://habrastorage.org/storage2/c57/b92/af4/c57b92af4ee0d37f787c211a068b1b95.png" alt="Article on Habr√©"></sup>  <a href="https://habr.com/ru/post/433820/">ECMAScript Proposal: Array.prototype. {Flat, flatMap}</a> </p><br><hr><br><p><br></p><br><p><img src="https://habrastorage.org/webt/nt/a4/y7/nta4y72u_f_kgtwon8jio9ghiwg.png" alt="Alternative KDPV with a yellow magnet from elfafeya.art"><br>  <sup>Photo by: kasper.green;</sup>  <sup>Yellow Magnet: elfafeya.art &amp; kasper.green</sup> </p></div><p>Source: <a href="https://habr.com/ru/post/437806/">https://habr.com/ru/post/437806/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>