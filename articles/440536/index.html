<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How Project Infer from Facebook helps to find bugs in mobile apps before deploying</title>
  <meta name="description" content="A few days ago, the Facebook engineering team distinguished itself - it was awarded the Most Influential POPL Paper Award . Among machine learning spe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>How Project Infer from Facebook helps to find bugs in mobile apps before deploying</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/f6e/807/35d/f6e80735d6b3135f8f771a1ee93b136e.png"><br><br>  A few days ago, the Facebook engineering team distinguished itself - it was awarded the <a href="https://www.sigplan.org/Awards/POPL/">Most Influential POPL Paper Award</a> .  Among machine learning specialists, this is very honorable.  The award was presented for the work of <a href="http://www0.cs.ucl.ac.uk/staff/p.ohearn/papers/popl09.pdf" rel="noopener">Compositional Shape Analysis by Means of Bi-abduction</a> , which reveals the nuances of Project Infer.  The project itself is designed to detect and eliminate bugs in the code of the mobile application before it deploem. <br><br>  Bugs in mobile software are very expensive for developers and users alike.  As for the former, detecting a problem in an application already placed in directories is a nightmare for any specialist.  Of course, the software is being tested, the work of the programs is checked against certain templates.  But more often, developers can not foresee everything, and bugs in the application are detected after deployment. <br><a name="habracut"></a><br><blockquote>  <b>We remind:</b> <i>for all readers of "Habr" - a discount of 10,000 rubles when recording for any Skillbox course on the promotional code "Habr".</i> <br><br>  <b>Skillbox recommends:</b> Online course <a href="https://skillbox.ru/python-data/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DPTNANA%26utm_content%3Darticles%26utm_term%3Dprojectinfer">"Data Analyst in Python"</a> . <br></blockquote>  Project Infer scans the code of mobile applications and allows you to find all sorts of problems, the patterns of which are stored in the database (and it is updated all the time).  The project itself was submitted three years ago.  Almost immediately after the announcement, Facebook opened the code, after which it was used in companies such as Amazon Web Services, Spotify and Uber. <br><br><h3>  How it works? </h3><br>  Project Infer uses a specialized set of algorithms for analyzing code performance.  In the source code of any large application, there may be millions of combinations that lead to errors.  Traditional code analysis procedures cannot help discover everything.  Infer from Facebook, self-learning, expands its base, so the project allows you to detect a lot of problems in the code. <br><br>  In a general sense, the Facebook Infer process can be divided into two stages: data collection and analysis.  The life cycle (lifecycle) is also divided into two parts: global and differential. <br><br>  During the data collection phase, Infer translates the source code into its own language.  The analysis phase is devoted to the study of the smallest details of the structure of a code that can potentially lead to an error.  If Infer encounters a familiar combination of factors, identified as an error pattern, the analysis is stopped for a particular method or function, but other methods and functions continue to be analyzed.  Here is an example of how Infer works. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ff7/8a9/d80/ff78a9d808a842843a8c3fec578d6a0b.gif"><br><br>  From the point of view of execution, Infer can work in two modalities - Global and Differential, as mentioned above.  In the first case, Infer analyzes all files.  For a project that is compiled using Gradle, the launch of Infer is done by the command <br><br><pre><code class="plaintext hljs">infer run -- gradle build</code> </pre> <br>  The differential process is used in incremental build systems specific to mobile applications.  In this case, you must first start collecting Infer data to get all the compilation commands, and then analyze only the changes.  To do this, use the following set of commands: <br><br><pre> <code class="plaintext hljs">gradle clean infer capture -- gradle build edit some/File.java # make some changes to some/File.java infer run --reactive -- gradle build</code> </pre> <br>  Infer reports can be viewed using the InferTraceBugs command. <br><br><pre> <code class="plaintext hljs">infer run -- gradle build inferTraceBugs</code> </pre> <br><h3>  Basis of Project Infer </h3><br>  Facebook's Infer is based on two new mathematical methods: <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25BE%25D0%25B3%25D0%25B8%25D0%25BA%25D0%25B0_%25D1%2580%25D0%25B0%25D0%25B7%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F">separation logic</a> and <a href="https://fbinfer.com/docs/separation-logic-and-bi-abduction.html">Bi-abduction</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/176/822/e72/176822e721005c058b02fb189c668a08.png"><br><br>  A key feature of the separation logic is the possibility of local reasoning.  It appeared due to the presence of spatial connectives in the assertions (spatial connectives) between the parts of the heap.  In this case, there is no need to take into account the entire amount of memory at each of the stages. <br><br>  The main element of the separation logic is the * operator (and separately), which is called a separating connection.  The formula X‚Ü¶Y ‚àó Y‚Ü¶X can be read as ‚ÄúX points to Y, and separately Y points to X‚Äù, which is very similar to how memory pointers work. <br><br>  In the context, Infer Bi-abduction can be viewed as an inference method that allows the platform to detect properties related to the behavior of independent parts of the application code.  Bi-abduction jointly displays anti-frames (missing parts of the state) and frames (those parts that are not affected by the operation).  Mathematically, the problem of Bi-abduction is expressed using the following syntax: A ‚àó?  Antiframe‚ä¢B ‚àó?  Frame. <br><br>  In Facebook's Infer method, it is possible to deduce pre / post specifications from clean code, provided we know the specifications for primitives at the basic code level. <br><br>  The creation of FI was made possible by analyzing the work of machine learning specialists, which was carried out for many years.  In the course of work on Infer, the following key articles were published for the whole sphere: <br><br><ul><li>  <a href="http://www0.cs.ucl.ac.uk/staff/p.ohearn/papers/popl09.pdf" rel="noopener"><strong>Compositional Shape Analysis by Bi-abduction</strong></a> .  It was for this work that the prize mentioned above was received.  The work introduces the reader to the compositional analysis of the form.  This is an addition to the traditional shape analysis (shape analysis), which makes it possible to apply the method to analyze the source code of applications. </li><li>  <a href="https://link.springer.com/chapter/10.1007%252F11691372_19" rel="noopener"><strong>A Local Shape Analysis Based on Separation Logic</strong></a> <strong>:</strong> This article describes the separation logic as a mechanism for analyzing the source code of applications.  The authors show the possibility of studying individual cells in a heap of memory, without studying the entire heap entirely.  Thus, certain cells make a linked list without complete analysis. </li><li>  <strong><a href="https://link.springer.com/chapter/10.1007/11804192_6">Smallfoot: Modular Automatic Assertion Checking with Separation Logic</a></strong> : this paper describes the predecessor of Facebook Infer, which is called Smallfoot. </li><li>  <strong><a href="https://code.fb.com/developer-tools/al-a-new-declarative-language-for-detecting-bugs-with-infer/">AL: A new declarative language for detecting bugs with Infer</a></strong> : AL allows any developer to design new checkers without a full understanding of the internal Infer kitchen.  AL is a declarative language. </li><li>  <strong><a href="https://research.fb.com/publications/moving-fast-with-software-verification/">Moving Fast with Software Verification</a></strong> : Finally, an article that reveals how Facebook uses Project Infer for its own needs.  The document describes how Facebook developers have integrated Infer into their development process to provide static analysis for mobile applications such as Instagram, Facebook Messenger, and Facebook applications for Android and iOS. </li></ul><br>  So far, Infer can only be used for mobile applications.  But some of its principles apply to general-purpose applications.  Possibly, in the future, the possibilities of Infer will become wider, and with its help, developers will be able to analyze desktop or server applications. <br><br><blockquote>  <b>Skillbox recommends:</b> <br><br><ul><li>  Practical course <a href="https://skillbox.ru/agima/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DAGIMA%26utm_content%3Darticles%26utm_term%3Dprojectinfer">"Mobile Developer PRO"</a> . </li><li>  Online course <a href="https://skillbox.ru/frontend-developer/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DFRENDEV%26utm_content%3Darticles%26utm_term%3Dprojectinfer">"Profession Frontend-developer"</a> . </li><li>  Practical annual course <a href="https://skillbox.ru/php/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DPHPDEV%26utm_content%3Darticles%26utm_term%3Dprojectinfer">"PHP developer from 0 to PRO"</a> . </li></ul></blockquote></div><p>Source: <a href="https://habr.com/ru/post/440536/">https://habr.com/ru/post/440536/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>