<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Data transfer between scenes in Unity - the use of multi-value in the development of simple games</title>
  <meta name="description" content="This article will be useful for novice game developers. In it, I will talk about my own experience in implementing multiscended interaction and the pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Data transfer between scenes in Unity - the use of multi-value in the development of simple games</h1><div class="post__text post__text-html js-mediator-article">  This article will be useful for novice game developers.  In it, I will talk about my own experience in implementing multiscended interaction and the problems that I have encountered. <br><br>  Let's talk about static classes for data storage, various ways of loading scenes with the Unity engine, and also let's take a look at how Admob connects to the project.  Information provided by official documentation and friendly developer community. <br><a name="habracut"></a><br><h2>  Situation </h2><br>  My game consists of two scenes - the main menu, which can be seen immediately upon loading and, directly, a game scene with mechanics, into which, depending on the option selected, the object prefab is loaded.  I couldn‚Äôt combine them into a single scene, since several rather complex objects are tied to the menu, and it‚Äôs more convenient to separate the entities. <br><br>  Previously, I would simply use a certain controller object to store data, but with the unloading of the scene, it ceases to exist. <br><br><h2>  Data transfer (static class) </h2><br>  It turned out that Unity perfectly knows how to work with code, even if it peacefully lies in a file in the scripts folder and is not attached by a component to an object on the scene (it was not obvious to a beginner).  For example, such a file could be a static class of the following type: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataHolder</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> GameObject prefabName; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> GameObject Prefab { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prefabName; } <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> { prefabName = value; } } }</code> </pre> <br><br>  Thus, I managed to keep the user's choice even after unloading the scene and loading a new one.  Initially, everything worked exactly with hard scene switching. <br><br>  Using this mechanism, you can also transfer settings from the menu to other scenes, for example, the localization language, sound and music settings, and much more. <br><br><h2>  SceneManagement </h2><br>  Everything was fine with me, and so, until the task was received to connect to the Admob project (advertising), so that the video was shown right at the beginning of the game scene.  As it turned out, there are subtleties here: the request for a movie takes substantial time, and it simply does not have time to come when switching scenes.  We didn‚Äôt want to sculpt additional delays in the project, especially since we have a lot of time until the player ‚Äústicks‚Äù in the menu.  Then I learned that there is no need to switch scenes "hard", because there is a wonderful option of additive loading (without unloading the previous scene). <br><br>  I load the game scene with the menu controller (the scene with the menu and the object of the advertisement remains loaded too): <br><br><pre> <code class="cpp hljs">SceneManager.LoadScene(<span class="hljs-number"><span class="hljs-number">1</span></span>,LoadSceneMode.Additive);</code> </pre><br>  Upon completion of the level, I unload the game scene with the game controller (so that it does not hang in memory): <br><br><pre> <code class="cpp hljs">SceneManager.LoadScene(<span class="hljs-number"><span class="hljs-number">0</span></span>,LoadSceneMode.Single);</code> </pre><br>  With the use of such a scheme, advertising is loaded immediately at the start of the application, and you can trigger the display of the commercial at any desired moment.  Similarly, you can deal with any objects you need. <br><br><h2>  Problems </h2><br>  Unfortunately, even with additive loading of scenes, it will not be possible to delve into the objects of one scene from another.  References to objects will have to be passed through a certain ‚Äúmediator‚Äù (in my case, that same static class was used). <br><br>  Be careful when instantiating prefabs, if several scenes are active - for me they all decided to push into the wrong scene (about this another time). <br><br><div class="spoiler">  <b class="spoiler_title">Documentation Links</b> <div class="spoiler_text">  <a href="https://docs.unity3d.com/ScriptReference/SceneManagement.LoadSceneMode.html">Scene management</a> <br>  <a href="https://docs.unity3d.com/Manual/UnityAnalyticsRemoteSettingsScripting.html">Static class</a> <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/440718/">https://habr.com/ru/post/440718/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>