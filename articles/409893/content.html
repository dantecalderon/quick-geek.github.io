<div class="post__text post__text-html js-mediator-article">  Happy New Year!  Before the new year, I assembled color music for the house on WS2812 LED tape.  The project turned out to be easy to repeat and not expensive. <br><br>  The formation of color-musical programs is carried out by the Arduino nano controller on the basis of the data received from the CMU.EXE program.  The program “CMU.EXE” for a personal computer serves as a 20-band spectrum analyzer and program control panel. <br><br>  This organization will allow everyone to simply collect color music.  Fans of programming can, without delving into the intricacies of digital processing of audio signals, create their own color musical programs in a simple Arduino IDE. <br><a name="habracut"></a><br>  → Sketches for Arduino and the program "CMU.EXE" are presented on <a href="https://github.com/juraspb/MusicToColor">GitHub</a> <br><br>  The project provides two types of connection to a personal computer. <br><br>  <i>The first option</i> is a direct connection to a USB PC, a COMtoLed sketch. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j2/ds/na/j2dsnacytdcq8ykt2rwoojismne.jpeg"></div><br>  <i>The second option</i> is to connect via a radio bridge built on nRF24L01, sketches COMtoRF and RFtoLed. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/u9/xg/mv/u9xgmvltfxlxrfum_ec5f4eff88.jpeg"></div><br>  You can use the color musical and dynamic subroutines in the sketch or replace them with your own.  All color organ programs in the sketch are made in the form of separate subroutines, this will facilitate the understanding of the presented source code and the writing of its subroutines. <br><br>  For the Arduino controller to work, you will need <br><br>  <b>1.</b> Install the Arduino IDE library: Adafruit_Neopixels, IRremote, RF24 (if using the wireless option) <br><br>  <b>2.</b> Set in the sketch: <br><br>  - The number of LEDs in your tape: <br><br><pre><code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> stripLed 120 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// количество светодиодов в ленте</span></span></span></span></code> </pre> <br>  - The numbers of outputs to which your tape and IR receiver are connected: <br><br><pre> <code class="hljs cs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> stripPin 2 // выход управления светодиодной лентой #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> irPin 3 // вход IR</span></span></code> </pre><br>  - Contact numbers for controlling the radio module (if used): <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-function">RF24 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">radio</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Объект radio для работы с nRF24, номера выводов nRF24L01+ (CE, CSN)</span></span></code> </pre><br>  At the moment, 7 color-music programs and more than 70 variants of running lights are implemented in the sketch (according to Chinese calculation, another color = another program). <br><br>  The program “CMU.EXE” for a personal computer is quite complex and is offered as an executable module without source code. <br><br>  The color organ program “CMU.EXE” can receive an audio stream from any recording audio device of a personal computer.  For example: mixer, line-in, microphone or any virtual audio cable. <br><br>  Using a mixer or a virtual audio cable, you can get an audio stream from any audio player.  For example: ITUNES, AIMP, VLC or any other. <br><br>  Appearance of the program: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jp/9q/g7/jp9qg7op8oz211aqhjw7jebmajg.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/af/vr/go/afvrgouyb6xt8602ayrveynlnx8.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nm/xq/g8/nmxqg8kk9_sddiurphoibkugzcs.jpeg"></div><br>  Connect to ITUNES using a virtual audio cable and playing via AIRPlay: <br><br><img src="https://habrastorage.org/webt/ms/cy/95/mscy958yhudbpgwobdrp_sql2cw.jpeg"><br><br>  The video of the color musical work is presented on youtube: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/H6T8ywU3Iu8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/zZWn22kSqRA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/8kNg5bGA1jw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/sFQip-zjMoY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Thanks for attention! </div>