<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IDA Portabelization</title>
  <meta name="description" content="Just a small message. 

 For a number of personal reasons, I like to carry my toolkit on a flash drive or external hard drive. One tool is IDA 6.8. 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>IDA Portabelization</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/5m/6b/p7/5m6bp7ili800mrldo3mhhpy_a7o.gif"><br><br>  Just a small message. <br><br>  For a number of personal reasons, I like to carry my toolkit on a flash drive or external hard drive.  One tool is IDA 6.8. <br><br>  After working with systems, I do not like when there are any tails in the registry or in the form of files.  And unfortunately, IDA and its modules (in particular, BinnDiff) are sinful. <br><br>  Well, there was a desire to get a fully portable complex. <br><a name="habracut"></a><br>  Well, to the best of my modest knowledge and understanding of the problem, three solutions were visible: <br><br><ol><li>  Wrap everything up in ThinApp or TurboStudio.  The result was large, cumbersome, with limited ability to update plug-ins, etc.  It did not fit. </li><li>  Write a resident who tracks changes and rolls them back after completing an IDA session.  The result was quite voluminous (several megabytes), or required the presence of libraries in the system to run.  When the nature of the "tails" changed, it was necessary to rewrite and compile the code.  Not that. </li><li>  Get by with the built-in Windows tools.  About this - more. </li></ol><br>  In fact, it is quite possible to eliminate tails as files and residues in the registry in a simple Windows command file, even without Powershell.  The code in my case came out like this: <br><br><pre><code class="plaintext hljs">@ECHO Off rem –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã rem –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é IDA –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å —Ç–∞–∫–æ–π –∂–µ —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å—é set xOS=x64&amp; If "%PROCESSOR_ARCHITECTURE%"=="x86" (If Not Defined PROCESSOR_ARCHITEW6432 Set xOS=x86) rem –¢–∞–∫–∂–µ —Å—á–∏—Ç—ã–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä —Å—Ç—Ä–æ–∫–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ set param=%~1 rem –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –±–µ–∫–∞–ø–∏–º —Ñ–∞–π–ª—ã —Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ - –≤–¥—Ä—É–≥ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–æ–∂–µ –µ—Å—Ç—å IDA? xcopy /E /I /C /Y /Q /H /R "%appdata%\zynamics" ".\Backup\zynamics" xcopy /E /I /C /Y /Q /H /R "%appdata%\Hex-Rays" ".\Backup\Hex-Rays" xcopy /E /I /C /Y /Q /H /R "%appdata%\IDA Pro" ".\Backup\IDA Pro" rem –ß–∏—Å—Ç–∏–º –ø–∞–ø–∫–∏, –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ–ø–∏—Å–∞–Ω–∞ –Ω–∏–∂–µ call :removedir "%appdata%\zynamics" call :removedir "%appdata%\Hex-Rays" call :removedir "%appdata%\IDA Pro" rem –ö–æ–ø–∏—Ä—É–µ–º –≤ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ xcopy /E /I /C /Y /Q /H /R ".\BinDiff\INI" "%appdata%\" xcopy /E /I /C /Y /Q /H /R ".\Hex-Rays" "%appdata%\" xcopy /E /I /C /Y /Q /H /R ".\Hex-Rays\IDA Pro" "%appdata%\IDA Pro" rem –ë–µ–∫–∞–ø–∏–º –≤–µ—Ç–∫—É —Ä–µ–µ—Å—Ç—Ä–∞ IDA reg export HKEY_CURRENT_USER\Software\Hex-Rays backup.reg /y rem ... –∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Å–≤–æ–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ reg import settings.reg rem –¢–µ–ø–µ—Ä—å –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞–Ω—ã –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ rem –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å IDA –≤ –¥—Ä—É–≥–æ–π —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä —Ö32 –≤ Windows x64 if "%param%"=="32" goto x32 if "%param%"=="64" goto x64 if "%param:~1%"=="32" goto x32 if "%param:~1%"=="64" goto x64 if "%xOS%"=="x64" goto x64 if "%xOS%"=="x32" goto x32 rem –ó–∞–ø—É—Å–∫–∞–µ–º IDA x32 –∏ –≤–∏—Å–∏–º –≤ –≤–∏–¥–µ —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞, –æ–∂–∏–¥–∞—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã :x32 start /wait idaq.exe goto end rem –ó–∞–ø—É—Å–∫–∞–µ–º IDA x64 –∏ –≤–∏—Å–∏–º –≤ –≤–∏–¥–µ —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞, –æ–∂–∏–¥–∞—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã :x64 start /wait idaq64.exe goto end rem –¢—É—Ç –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–∞–ø–æ–∫ :removedir del /F /Q /S %1 &gt; nul rmdir /s /q %1 exit /b rem –ò –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã :end rem –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ –≤ —Ñ–∞–π–ª reg export HKEY_CURRENT_USER\Software\Hex-Rays settings.reg /y rem ... –∞ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ–ø–∏—Ä—É–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã xcopy /E /I /C /Y /Q /H /R "%appdata%\zynamics\*" ".\BinDiff\INI\zynamics" xcopy /E /I /C /Y /Q /H /R "%appdata%\Hex-Rays\*" ".\Hex-Rays" xcopy /E /I /C /Y /Q /H /R "%appdata%\IDA Pro" ".\Hex-Rays\IDA Pro" rem –ß–∏—Å—Ç–∏–º –≤–µ—Ç–∫—É —Ä–µ–µ—Å—Ç—Ä–∞ reg delete HKEY_CURRENT_USER\Software\Hex-Rays /f rem ... –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–æ, —á—Ç–æ —Ç–∞–º –±—ã–ª–æ –¥–æ –Ω–∞—Å reg import backup.reg rem –ß–∏—Å—Ç–∏–º –≤—Å–µ —Ö–≤–æ—Å—Ç—ã del /F /Q backup.reg call :removedir "%appdata%\zynamics" call :removedir "%appdata%\Hex-Rays" call :removedir "%appdata%\IDA Pro" rem –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞–ø–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –¥–æ –∑–∞–ø—É—Å–∫–∞ xcopy /E /I /C /Y /Q /H /R ".\Backup\*" "%appdata%\" rem ... –∏ —É–¥–∞–ª—è–µ–º —ç—Ç–æ—Ç –±–µ–∫–∞–ø call :removedir Backup</code> </pre> <br>  A side effect of such a batch file is the black window that hangs during the IDA.  Therefore, I collected it all in <a href="https://www.abyssmedia.com/quickbfc/">Quick Batch Compiler</a> , as a result, the program became completely "invisible." <br><br>  Thus, it turned out to portabelize the program using the minimum file size without the need for additional libraries, exclusively with the built-in Windows tools that have been part of the operating system for more than 10 years out of the box.  At the same time, the ability to change plug-ins, scripts and settings of the IDA itself is not limited. <br><br>  This ‚Äúproject‚Äù (very loudly) is on the <a href="https://github.com/gjf/StartIDA">githab,</a> in the same place - the collected file.  Accepted criticism and additions. <br><br>  PS: I know that since IDA 7.0, the paths and affected files have changed.  But I use 6.8 due to the fact that some plugins are not rewritten under 7.0, and indeed I didn‚Äôt like 7.0.  Nevertheless, the proposed concept easily adapts to new versions of IDA. </div><p>Source: <a href="https://habr.com/ru/post/438652/">https://habr.com/ru/post/438652/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>