<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Setting up IPTV from Rostelecom on MikroTik routers</title>
  <meta name="description" content="At one time, when I bought the MikroTik router, in addition to the basic Internet settings, I had the task of ensuring the operation of IPTV, until th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Setting up IPTV from Rostelecom on MikroTik routers</h1><div class="post__text post__text-html js-mediator-article">  At one time, when I bought the MikroTik router, in addition to the basic Internet settings, I had the task of ensuring the operation of IPTV, until that moment I had D-link installed by Rostelecom.  The very basic setting of Ineta on microtic took about 10 minutes, but I had to tinker with IPTV.  All manuals read by me then did not take into account many points, to which I reached by picking up the settings of the long-suffering D-link, and without which it would not normally work in this circuit.  In this article I want to indicate the universal instructions I received in this situation. <br><a name="habracut"></a><br><br>  First of all, we will update the firmware to the latest.  Connect to our router via Winbox, go to [System] -&gt; [Packages] -&gt; [Check for updates].  If a newer version of Routeros is installed than you have installed on your device, click Download &amp; Install and the new version will be downloaded and the router will reboot. <br><br><img width="500" height="1020" src="https://habrastorage.org/webt/qk/d8/zc/qkd8zclahba6a9vcw2lyjae6exe.png" alt="image"><br><br>  After completing these steps, go <a href="https://mikrotik.com/download">here</a> and select the packages that need to be downloaded for your device, in my case this is the haP series and I select the extra packages for the current version (6.43.4 at the time of this writing). <br><br><img src="https://habrastorage.org/webt/wu/0w/af/wu0waf863ycrg4qncv0hwrnr0aq.png" alt="image"><br><br>  The archive will be downloaded from which you will need to unpack the multicast file, open the files item in the winbox and drag the file we have unpacked right there.  After that, you need to restart our router (go to [System] -&gt; [Reboot]). <br><br><img src="https://habrastorage.org/webt/ko/tt/2g/kott2g0edwigbpqwqpxiueiapkq.png" alt="image"><br><br>  After rebooting, the IGMP Proxy item should appear in the Routing section, if this did not happen, check the previous steps - whether we installed the required package (for the device we downloaded, the firmware versions).  If successful, go ahead. <br><br><img src="https://habrastorage.org/webt/ha/vo/aa/havoaaj9uhahsc5fjhtbuzgpmw4.png" alt="image"><br><br>  In the IGMP Proxy, on the first tab, click the [+] sign to create the so-called Upstream.  In the interface item, we select the port where the cord from the provider is inserted, even if you are using a PPPoE connection, we choose the physical port, this is a very important point.  We tick the Upstream checkbox and in the Alternative Subnets set 0.0.0.0/0 and click OK.  Create a second rule for downstream.  In the interface, select All, do not put a check mark upstream, no further action is required here, just click ok and that's it. <br><br>  The next step is to configure the firewall.  Go to [IP] -&gt; [Firewall] and [+], create a new rule Chain-&gt; forward, protocol-&gt; udp, In interface-&gt; ether1 (the port to which the provider cable is connected).  Action-&gt; accept. <br><br><img width="500" height="1100" src="https://habrastorage.org/webt/zn/bx/9u/znbx9ujyy9jkljangmuofsmvjby.png" alt="image"><br><br>  Create a second rule for IGMP.  The chain also remains forward, protocol-&gt; igmp, In interface-&gt; ether1, Action-&gt; accept.  We drag the created rules above forbidding. <br><br>  Next, you need to block the passage of multicast traffic to the wireless network.  Go to the [Bridge] -&gt; Filters tab -&gt; [+].  Select the chain Output, out.  Interface -&gt; wlan1 that is our desired wireless network.  On the Advanced tab in the packet type, select multicast and on the Action tab, assign the action to drop, that is, a ban.  Do not forget to click OK to save the settings. <br><br><img src="https://habrastorage.org/webt/cj/xa/6u/cjxa6ubhyk1y_-wjq4qe5xnlzoi.png" alt="image"><br><br><img src="https://habrastorage.org/webt/je/cs/uo/jecsuoumdssmuzokwzf-zyfzfmk.png" alt="image"><br><br><img src="https://habrastorage.org/webt/tr/yq/xr/tryqxrjt6fo7ohthczrxdopgydg.png" alt="image"><br><br>  And then perhaps the most important moment comes, if you have an Internet connection via PPPoE, then you need to add an 1.0.0.1 IP address with a 30-bit mask to the physical interface where the cable from the provider is connected.  By the way, this was the problem when I first set up the Mikrotik, without this IP address, nothing worked, but I found out that it was him who needed to drive it by opening the D-link settings.  Go to [IP] -&gt; [Adresses] and [+] and add the following settings.  If a direct connection is used without raising any tunnels (called IPoE), then the previous actions will suffice and skip this item. <br><br><img src="https://habrastorage.org/webt/43/3n/lf/433nlffmfkmjayev7qz3xduqewe.png" alt="image"><br><br>  I draw attention to a very important point, after all the actions that have been taken, it is necessary to restart the prefix if it was turned on and only then check the result of the settings.  In case of problems, first of all I advise you to check the rules in the firewall. <br><br>  The operator can also use a scheme using VLAN, in this case, you need to create a sub-interface with a vlan-th transmitting iptv on the port to which you have the cord from the provider, you can try to find out its number through technical support.  We go to [interfaces] -&gt; [VLAN] and press [+] to create a new one, specify its name, it is not essential and we need for convenience of administration, the VLAN ID needs to specify the one that the provider gives, for example, take 234 and in the interface port in which the provider cable is connected.  Click OK. <br><br><img src="https://habrastorage.org/webt/vg/to/bc/vgtobcufcgwnoqooxzniysyfiuu.png" alt="image"><br><br>  Then we create a new bridge and add the created VLAN and the port to which your set-top box is connected, you must first remove this port from another bridge if it is connected to any other bridge. <br><br><img src="https://habrastorage.org/webt/bs/af/d6/bsafd6xvn0w02g1kelpedcwcj8e.png" alt="image"><br><br><img src="https://habrastorage.org/webt/mq/v-/jk/mqv-jkw7tdi_ab090_c4odfv0sc.png" alt="image"><br><br>  In the properties of the bridge itself, I recommend setting STP to none if problems arise. <br><br>  In principle, I described quite detailed instructions on this topic.  That's all.  If you have any questions and comments, write to the comments, ready to answer. <br><br><cut></cut></div><p>Source: <a href="https://habr.com/ru/post/437734/">https://habr.com/ru/post/437734/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>