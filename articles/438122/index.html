<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Numerology on MS SQL - an entertaining experiment</title>
  <meta name="description" content="People since ancient times love to play numbers. Prove that the ratio of the length of the pyramid of Cheops to the height is equal to ... I do not re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Numerology on MS SQL - an entertaining experiment</h1><div class="post__text post__text-html js-mediator-article">  People since ancient times love to play numbers.  Prove that the ratio of the length of the pyramid of Cheops to the height is equal to ... I do not remember what.  Physicists are also not alien to this, for example, there <a href="http://en.wikipedia.org/wiki/Koide_formula">is Koid√©‚Äôs mystical formula</a> , which relates the masses of an electron, a muon, and a tau particle.  There is a <a href="https://en.wikipedia.org/wiki/Fine-structure_constant">formula for the constant fine structure</a> - unlike the Koid√© formula, which seems very artificial.  How justified are these formulas?  I did an experiment. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/oa/oy/kc/oaoykcyt_ze-q8wl9xegbyzemje.jpeg"></div><a name="habracut"></a><br>  Take N numbers: A, B, C ... In my experiment I limited myself to three numbers.  For each number we can apply a unary function: SIN, COS, EXP, LN (I limited myself to four).  This gives 4 * 3 = 12 new numbers, which together with the original gives 15 numbers.  Further, we apply binary operations to their combination +, -, *, /.  (You can also consider others, for example, exponentiation, but again I limited myself to four).  Here, the new combinations are 15 * 15 * 4 (actually less, since some operations are prohibited, such as dividing by 0, and for + and * the number of combinations is less because of their symmetry). <br><br>  Then we can repeat these steps again and again.  Already at the second step, 34'513'800 formulas (now you understand why I limited the number of operations?) Which gave me for A = 1, B = 2, C = 3 whole 2'776'355 different numbers. <br><br>  The graph above shows the concentration (number of different numbers) for subranges of length 1 from -60 to +60.  The Y scale is logarithmic.  Visible concentration of numbers about 0. <br><br><img src="https://habrastorage.org/webt/2y/kg/do/2ykgdojkna4cs_3awuhpecqm-c8.png"><br><br>  Make a zoom for the range -2..2: <br><br><img src="https://habrastorage.org/webt/hq/fw/yh/hqfwyhvpf-mbpes1ubpag6tlmyg.png"><br><br>  Here the Y scale is normal.  Peaks near 0 and 1. <br><br>  We make the maximum zoom to see the ‚Äúthin structure‚Äù of the distribution of numbers: <br><br><img src="https://habrastorage.org/webt/lq/jo/gb/lqjogbeur_zcsj5rkogrdksicm0.png"><br><br>  I wonder how accurately we can express an arbitrary number, say 1.23456789?  This is determined by (half) the maximum length of the segment between two adjacent points (if we are unlucky).  Below, these calculations are shown in the form of a graph, and further from zero the accuracy of the approximation falls: <br><br><img src="https://habrastorage.org/webt/el/7c/tf/el7ctf36gblk8bkh_enmatwgana.png"><br><br>  Thus, as a rule, we can express any number with an accuracy from E-6 to E-5.  For example, the number 1.23456789 is located between <br><br>  cos (ln (3) / cos (3)) + sin (1 / ln (3)) = 1.23456481266341 (0.0002%) <br>  ln (exp (1) * sin (2)) + exp (ln (3) / cos (3)) = 1.23456894186555 (0.000085%) <br><br><img src="https://habrastorage.org/webt/4c/ch/lf/4cchlfqovitxg7whbofc3rdule0.jpeg"><br><br>  Finally, it is interesting what will happen if, instead of A = 1, B = 2, C = 3, take other numbers, for example, A = sqrt (2), B = e, C = pi.  Comparison of the density of numbers in the first (123) and second (2epi) you see in the picture: <br><br><img src="https://habrastorage.org/webt/k8/md/4e/k8md4ezknwk_e-tb4pnb0frx2d0.png"><br><br>  As you can see, by and large, there is no difference.  In conclusion, I want to tell you what does MS SQL do with it.  The task is reborn, and it just suggests a solution with a cross join that implements Cartesian products of all the available numbers for binary operations.  You can see a small piece of code at the end. <br><br>  The full code is not published, because I want to modify it to automatically generate the texts of conspiracy theories based on numerology. <br><br><pre><code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- step 3 insert into Formula (step,path,Value) select 3,path+' '+op, case when op='COS' then COS(Value) when op='SIN' then SIN(Value) when op='EXP' then case when Value&lt;100 then EXP(Value) else NULL end when Value&lt;=0 then NULL when op='LN' then LOG(Value) end from Formula, Unary -- step 4 select L.path+' '+R.path+' '+'+' as path,L.value+R.value as value into p1 from Formula L, Formula R where Ln&lt;=Rn select L.path+' '+R.path+' '+'+' as path,L.value+R.value as value into p2 from Formula L, Formula R where Ln&lt;=Rn select L.path+' '+R.path+' '+'+' as path,L.value+R.value as value into p3 from Formula L, Formula R select L.path+' '+R.path+' '+'+' as path,L.value+R.value as value into p4 from Formula L, Formula R where R.value&lt;&gt;0</span></span></code> </pre> </div><p>Source: <a href="https://habr.com/ru/post/438122/">https://habr.com/ru/post/438122/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>