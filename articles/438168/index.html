<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to hack an expensive camera so that your wife won't kill you</title>
  <meta name="description" content="–î–∏—Å–∫–ª–µ–π–º–µ—Ä: –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª–æ—Å—å –≤ 2013 –≥–æ–¥—É, —Ç–∞–∫ —á—Ç–æ –µ—Å–ª–∏ —Å—á–∏—Ç–∞–µ—Ç–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç–æ–¥—ã –≥–ª—É–ø—ã–º–∏ –∏ –æ–ø–∞—Å–Ω—ã–º–∏ ‚Äî –≤—ã –ø—Ä–∞–≤—ã, —Ç–∞–∫ –∏ –±—ã–ª–æ. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, —è –º–Ω–æ–≥–æ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>How to hack an expensive camera so that your wife won't kill you</h1><div class="post__text post__text-html js-mediator-article"><i>–î–∏—Å–∫–ª–µ–π–º–µ—Ä: –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª–æ—Å—å –≤ 2013 –≥–æ–¥—É, —Ç–∞–∫ —á—Ç–æ –µ—Å–ª–∏ —Å—á–∏—Ç–∞–µ—Ç–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç–æ–¥—ã –≥–ª—É–ø—ã–º–∏ –∏ –æ–ø–∞—Å–Ω—ã–º–∏ ‚Äî –≤—ã –ø—Ä–∞–≤—ã, —Ç–∞–∫ –∏ –±—ã–ª–æ. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, —è –º–Ω–æ–≥–æ–º—É –Ω–∞—É—á–∏–ª—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ.</i> <br>
<br>
<b>–í—Å—Ç—É–ø–ª–µ–Ω–∏–µ</b><br>
–í—Å—ë –Ω–∞—á–∞–ª–æ—Å—å –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤ –¥–æ —Ä–æ–∂–¥–µ–Ω–∏—è –º–æ–µ–≥–æ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞. –ú—ã —Å –∂–µ–Ω–æ–π –≤—Å–µ–≥–¥–∞ —Ö–æ—Ç–µ–ª–∏ –∫—É–ø–∏—Ç—å –∫—Ä—É—Ç–æ–π —Ñ–æ—Ç–æ–∞–ø–ø–∞—Ä–∞—Ç Leica –∏ –≤–¥—Ä—É–≥ –ø–æ–Ω—è–ª–∏, —á—Ç–æ –µ—Å–ª–∏ –Ω–µ –∫—É–ø–∏–º —Å–µ–π—á–∞—Å, —Ç–æ —É–∂–µ –¥–æ–ª–≥–æ –Ω–µ —Å–º–æ–∂–µ–º —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å. –ü–æ—ç—Ç–æ–º—É –º—ã –∑–∞–∫–∞–∑–∞–ª–∏ –∫–∞–º–µ—Ä—É M240 –∏‚Ä¶ –±—É–º, –Ω–∞—Å –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –ø–æ–ª–≥–æ–¥–∞. –í—Å–∫–æ—Ä–µ –º–Ω–µ –Ω–∞–¥–æ–µ–ª–æ –∂–¥–∞—Ç—å, –∏ —è –Ω–∞—á–∞–ª –∏–∑—É—á–∞—Ç—å –∏—Ö —Å–∞–π—Ç. –ú–æ—ë –≤–Ω–∏–º–∞–Ω–∏–µ —Å—Ä–∞–∑—É –ø—Ä–∏–≤–ª—ë–∫ —Ä–∞–∑–¥–µ–ª —Å —Ñ–∞–π–ª–∞–º–∏. –ù—É, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–≥–∞–¥–∞—Ç—å—Å—è, –ø–æ—á–µ–º—É‚Ä¶ –ü—Ä–æ—à–∏–≤–∫–∏!<br>
<br>
–Ø —É–≤–∏–¥–µ–ª –Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ –Ω–µ—Å–∂–∞—Ç—ã–π —Ñ–∞–π–ª (<code>m8-2_005.upd</code>), –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å <a href="https://github.com/alexhude/LeicaHacks/tree/master/Tools/pwadsplit">–º–∞–≥–∏–∏ PWAD</a>. –£–∑–Ω–∞—ë—Ç–µ? –î–∞, –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —ç—Ç–æ —Ñ–æ—Ä–º–∞—Ç Doom Patch WAD. –ö–∞–∂–µ—Ç—Å—è, —Ä–µ–±—è—Ç–∞ –ª—é–±—è—Ç –∫–ª–∞—Å—Å–∏–∫—É. –§–æ—Ä–º–∞—Ç <a href="http://doom.wikia.com/wiki/WAD">–æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω</a>, —Ç–∞–∫ —á—Ç–æ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –µ–≥–æ –æ–∫–∞–∑–∞–ª–æ—Å—å —Å–æ–≤—Å–µ–º –Ω–µ—Å–ª–æ–∂–Ω–æ.<br>
<a name="habracut"></a><br>
<h1>–§–∞–π–ª—ã –ø—Ä–æ—à–∏–≤–∫–∏ Leica</h1><br>
<h3>–ü—Ä–æ—à–∏–≤–∫–∞ Leica M8</h3><br>
–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ –æ—á–µ–Ω—å —Å–º–µ—à–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–æ–≥–¥–∞ –ø–æ–∑–∂–µ —è –∏–∑—É—á–∞–ª —Å–∂–∞—Ç—ã–π —Ñ–∞–π–ª –ø—Ä–æ—à–∏–≤–∫–∏ Leica T&nbsp;‚Äî —Ç–æ –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —Ä–µ—à–∏–ª –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–æ–¥—ã —Å–∂–∞—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤ –ø—Ä–æ—à–ª–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ id Software.<br>
<br>
–í–∏–∫–∏–ø–µ–¥–∏—è –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ <a href="https://en.wikipedia.org/wiki/LHA_(file_format)">—Ñ–æ—Ä–º–∞—Ç LHA</a>, –∫–æ—Ç–æ—Ä—ã–π –ø–æ —Å—É—Ç–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π LZW. –ù–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–µ–∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä—ã LZW –Ω–µ –ø–æ–¥–æ—à–ª–∏, –ø–æ—ç—Ç–æ–º—É —è –Ω–∞—á–∞–ª –∏—Å–∫–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è id&nbsp;‚Äî –∏ –≤—É–∞–ª—è, –Ω–∞—à—ë–ª –≤ <a href="">–∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö Catacomb Armageddon</a>. –î–æ–ª–∂–µ–Ω –ø—Ä–∏–∑–Ω–∞—Ç—å, –ø–æ–≤–µ–∑–ª–æ.<br>
<br>
–í –ª—é–±–æ–º —Å–ª—É—á–∞–µ, –≤–µ—Ä–Ω—ë–º—Å—è –∫ M8. –í–æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—à–∏–≤–∫–∏:<br>
<br>
<pre>RULES:      0x0000008C (    3036:0x00000BDC) - –æ–ø–∏—Å–∞–Ω–∏–µ XML
LUTS:       0x00000C68 (  183274:0x0002CBEA)
 GAMMA:     0x0000007C (   31760:0x00007C10)
 GAIN:      0x00007C8C (   50344:0x0000C4A8)
 LEICA:     0x00014134 (    7000:0x00001B58)
 BLEMISH:   0x00015C8C (     250:0x000000FA)
 WREF:      0x00015D88 (   82480:0x00014230)
 OBJ:       0x00029FB8 (   11268:0x00002C04)
 VERSION:   0x0002CBBC (      46:0x0000002E)
PXA:        0x0002D854 (  858384:0x000D1910)
BF:         0x000FF164 (  134522:0x00020D7A) - —Å–µ–º–µ–π—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ Analog Devices Blackfin
GUI:        0x0011FEE0 ( 3574180:0x003689A4)
 TRANS:     0x0000005C (   59988:0x0000EA54) - –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
 IMAGES:    0x0000EAB0 (  267433:0x000414A9)
  21_1PRT:  0x000000CC (   18411:0x000047EB) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  21_2GRP:  0x000048B8 (   23172:0x00005A84) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  21_3PAN:  0x0000A33C (   23034:0x000059FA) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  24_1PRT:  0x0000FD38 (   18489:0x00004839) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  24_2GRP:  0x00014574 (   23230:0x00005ABE) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  24_3PAN:  0x0001A034 (   22998:0x000059D6) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  28_1PRT:  0x0001FA0C (   22605:0x0000584D) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  28_2GRP:  0x0002525C (   23081:0x00005A29) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  28_3PAN:  0x0002AC88 (   23282:0x00005AF2) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  35_1PRT:  0x0003077C (   22496:0x000057E0) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  35_2GRP:  0x00035F5C (   23532:0x00005BEC) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  35_3PAN:  0x0003BB48 (   22881:0x00005961) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
 FONT1:     0x0004FF5C ( 1522988:0x00173D2C)
 FONT2:     0x001C3C88 ( 1723676:0x001A4D1C)
 VERSION:   0x003689A4 (       0:0x00000000)
M16C:       0x00488884 (  130406:0x0001FD66) - —Å–µ–º–µ–π—Å—Ç–≤–æ Renesas M16C (Motorola S-record)
FPGA:       0x004A85EC (  131604:0x00020214) - Xilinx Spartan 3
FSL:        0x004C8800 (     814:0x0000032E) - –∑–∞–≥—Ä—É–∑—á–∏–∫ –ø–µ—Ä–≤–æ–π —Å—Ç–∞–¥–∏–∏</pre> <br>
IDA –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã Blackfin, –Ω–æ –µ—Å—Ç—å <a href="https://github.com/krater/Blackfin-IDA-Pro-Plugin">—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –ø–ª–∞–≥–∏–Ω</a>.<br>
<br>
<h3>–ü—Ä–æ—à–∏–≤–∫–∞ Leica M9</h3><br>
–§–∞–π–ª –ø—Ä–æ—à–∏–≤–∫–∏ Leica M9 (<code>m9-1_196.upd</code>) –≤—ã–≥–ª—è–¥–∏—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º: –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–∫–æ–ª–æ 0,45%.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ac1/6fc/17d/ac16fc17df9bfb0c9c63bdefaecc83d9.png"><br>
<br>
–ö–æ–Ω–µ—Ü –∏—Å—Ç–æ—Ä–∏–∏? –ú–æ–∂–µ—Ç –∏ –Ω–µ—Ç. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ Leica –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–∞–±—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –≤ –∫–∞–º–µ—Ä–∞—Ö, –∞ –≤ —Ç–æ –≤—Ä–µ–º—è –≤ –±—ã—Ç–æ–≤–æ–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–µ —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è–ª–æ—Å—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ XOR, –ø–æ—ç—Ç–æ–º—É —è —Ä–µ—à–∏–ª –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–∏ XOR, —á—Ç–æ–±—ã —Å—Ä–∞–≤–Ω–∏—Ç—å –ø—Ä–æ—à–∏–≤–∫—É —Å —Å–æ–±–æ–π –∏ –ø–æ—Å—á–∏—Ç–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.<br>
<br>
–î–ª–∏–Ω–∞ –∫–ª—é—á–∞ –æ–ø—Ä–µ–¥–µ–ª—è–ª–∞—Å—å –ø—É—Ç—ë–º –ø–æ–∏—Å–∫–∞ —Å–∞–º–æ–≥–æ –¥–ª–∏–Ω–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è —à–∞–±–ª–æ–Ω–∞. –≠—Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, —Ç–∞–∫ –∫–∞–∫ –ª—é–±–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ –æ–±—ã—á–Ω–æ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –±–æ–ª—å—à–∏–µ –±–ª–æ–∫–∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ –Ω–∞–±–∏–≤–∫–∞ 0x00/0xFF –∏–ª–∏ –≥—Ä–∞—Ñ–∏–∫–∞ —Å –ø–∏–∫—Å–µ–ª—è–º–∏ LUT. –°–∞–º –∫–ª—é—á –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç–∏ –±–∞–π—Ç–æ–≤ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –¥–ª–∏–Ω—ã –∫–ª—é—á–∞, –≥–¥–µ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏–π—Å—è –±–∞–π—Ç –∏–¥—ë—Ç –≤ –±—É—Ñ–µ—Ä –∫–ª—é—á–∞. –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–ª –Ω–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ XOR. –ó–∞—Ç–µ–º –ø—Ä–∏—à–ª–æ—Å—å –Ω–µ–º–Ω–æ–≥–æ <a href="https://github.com/alexhude/LeicaHacks/tree/master/Tools/xortool">–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</a>, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –∫–ª—é—á –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∫–æ–¥. –≠—Ç–æ –æ–ø—è—Ç—å –æ–∫–∞–∑–∞–ª—Å—è —Ñ–∞–π–ª PWAD.<br>
<br>
–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ PWAD –≤—ã—è–≤–∏–ª–æ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:<br>
<br>
<pre>RULES:      0x0000007C (    2788:0x00000AE4) - –æ–ø–∏—Å–∞–Ω–∏–µ XML
LUTS:       0x00000B60 ( 4060616:0x003DF5C8)
 PROCESS:   0x0000004C ( 3900572:0x003B849C)
  CREATE:   0x0000004C (      20:0x00000014) - –º–µ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
  LUTS:     0x00000060 (  427744:0x000686E0)
  GAINMAP:  0x00068740 (   20008:0x00004E28)
  LENS:     0x0006D568 ( 3452724:0x0034AF34)
 CCD:       0x003B84E8 (  148662:0x000244B6)
  CREATE:   0x0000004C (      20:0x00000014) - –º–µ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
  BLEMISH:  0x00000060 (    1092:0x00000444)
  WREF:     0x000004A4 (  147452:0x00023FFC)
  LIN:      0x000244A0 (      22:0x00000016)
 ICCPROF:   0x003DC9A0 (    4304:0x000010D0)
  ECI-RGB:  0x0000003C (     540:0x0000021C)
  sRGB:     0x00000258 (    3144:0x00000C48)
  A-RGB:    0x00000EA0 (     560:0x00000230)
 WBPARAM:   0x003DDA70 (    7000:0x00001B58)
BF561:      0x003E0128 (  289128:0x00046968) - Analog Devices Blackfin Processor family
 bf0:       0x0000004C (  117846:0x0001CC56) - –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
 bf1:       0x0001CCA4 (  117826:0x0001CC42) - –ø—Ä–æ—à–∏–≤–∫–∞ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
 bf0.map:   0x000398E8 (   27072:0x000069C0) - –∫–∞—Ä—Ç–∞ –ø—Ä–æ—à–∏–≤–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —Å —Å–∏–º–≤–æ–ª–∞–º–∏ :D
 bf1.map:   0x000402A8 (   26304:0x000066C0) - –∫–∞—Ä—Ç–∞ –ø—Ä–æ—à–∏–≤–∫–∏ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —Å —Å–∏–º–≤–æ–ª–∞–º–∏ :D
BODY:       0x00426A90 (  143280:0x00022FB0) - —Å–µ–º–µ–π—Å—Ç–≤–æ Renesas M16C (Motorola S-record)
GUI:        0x00449A40 ( 3647624:0x0037A888)
 TRANS:     0x0000005C (  131656:0x00020248) - –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
 IMAGES:    0x000202A4 (  267433:0x000414A9)
  21_1PRT:  0x000000CC (   18411:0x000047EB) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  21_2GRP:  0x000048B8 (   23172:0x00005A84) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  21_3PAN:  0x0000A33C (   23034:0x000059FA) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  24_1PRT:  0x0000FD38 (   18489:0x00004839) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  24_2GRP:  0x00014574 (   23230:0x00005ABE) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  24_3PAN:  0x0001A034 (   22998:0x000059D6) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  28_1PRT:  0x0001FA0C (   22605:0x0000584D) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  28_2GRP:  0x0002525C (   23081:0x00005A29) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  28_3PAN:  0x0002AC88 (   23282:0x00005AF2) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  35_1PRT:  0x0003077C (   22496:0x000057E0) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  35_2GRP:  0x00035F5C (   23532:0x00005BEC) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
  35_3PAN:  0x0003BB48 (   22881:0x00005961) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
 FONT1:     0x00061750 ( 1522988:0x00173D2C)
 USBLOGO:   0x001D547C (    1775:0x000006EF) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JFIF
 FONT2:     0x001D5B6C ( 1723676:0x001A4D1C)
FPGA:       0x007C42C8 (  150176:0x00024AA0) - Xilinx Spartan 3A
BF547:      0x007E8D68 (  937576:0x000E4E68) - —Å–µ–º–µ–π—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ Analog Devices Blackfin (FSL?)</pre> <br>
<br>
<h3>–ü—Ä–æ—à–∏–≤–∫–∞ Leica M240</h3><br>
–£ –º–µ–Ω—è –≤–æ—à–ª–æ –≤ –ø—Ä–∏–≤—ã—á–∫—É –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–≥—Ä—É–∑–∫–∏ —Å –ø—Ä–æ—à–∏–≤–∫–∞–º–∏ Leica. –°–∫–æ—Ä–æ —Ç–∞–º –ø–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π —Ñ–∞–π–ª: <b>FW_M240_1_1_0_2.FW</b>.<br>
<br>
–û–Ω –Ω–µ –≤—ã–≥–ª—è–¥–µ–ª –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º, –Ω–æ –±—ã–ª —Å–∂–∞—Ç‚Ä¶<br>
<br>
<h4>–°–∂–∞—Ç–∏–µ</h4><br>
–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–≥—Ä–æ–º–Ω—ã–π –≤—Å–ø–ª–µ—Å–∫ –Ω–∞ 0x9D.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6cb/025/ef7/6cb025ef734f60b1d4104b7301798cad.png"><br>
<br>
–í–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ –∫–∞–∫–∞—è-—Ç–æ –º–∞–≥–∏—è —Å–∂–∞—Ç–∏—è. –ü–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ [9D+compression] –Ω–∏—á–µ–≥–æ –Ω–µ –¥–∞–ª, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, —á—Ç–æ 0x1F9D <a href="https://en.wikipedia.org/wiki/List_of_file_signatures">–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–¥–ø–∏—Å–∏ —Å–∂–∞—Ç–∏—è LZW</a>. –ï—Å–ª–∏ —á—Ç–æ, —è —Ä–∞–∑–±–∏—Ä–∞—é—Å—å –≤ —Ç–∏–ø–∞—Ö —Å–∂–∞—Ç–∏—è LZ –∏ —Ä–µ—à–∏–ª –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –±–∞–π—Ç—ã –ø–æ—Å–ª–µ 0x9D. –ò —É–≤–∏–¥–µ–ª —á–µ—Ç—ã—Ä–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞:<br>
<br>
<ol>
<li><code>9D 70 C4</code> <br>
</li>
<li><code>9D 00</code> <br>
</li>
<li><code>9D XX YY</code> <br>
</li>
<li><code>9D XX 8Y YY</code></li>
</ol><br>
–ß—Ç–æ –µ—â—ë —É–¥–∞–ª–æ—Å—å –ø–æ–¥–º–µ—Ç–∏—Ç—å:<br>
<br>
<ul>
<li>–ø–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –≤—Å–ø–ª—ã–≤–∞–µ—Ç –ª–∏—à—å –æ–¥–Ω–∞–∂–¥—ã –ø–æ –∞–¥—Ä–µ—Å—É 0x30: –≤–µ—Ä–æ—è—Ç–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å–∂–∞—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö;<br>
</li>
<li>XX –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 0x7F;<br>
</li>
<li>–ø–æ—Å–ª–µ–¥–Ω–∏–π –±–∞–π—Ç YY –≤ —Ç—Ä–µ—Ç—å–µ–º –∏ —á–µ—Ç–≤—ë—Ä—Ç–æ–º —Å–ª—É—á–∞—è—Ö –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 0x7F</li>
</ul><br>
–ò–∑ —Ç–æ–≥–æ, —á—Ç–æ —è –∑–Ω–∞—é –æ LZ, —ç—Ç–æ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–µ –Ω–∞ LZ77 –∏–ª–∏ LZSS, –≥–¥–µ YY&nbsp;‚Äî —à–∞–≥ –æ—Ç—Å—Ç—É–ø–∞, –∞ XX&nbsp;‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è. –ò –≤—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç&nbsp;‚Äî —á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π –≤—ã–¥–∞—á–∏ 0x9D. –Ø –Ω–∞–ø–∏—Å–∞–ª –ø—Ä–æ—Å—Ç—É—é —Ñ—É–Ω–∫—Ü–∏—é –Ω–∞ C, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–∞–ª–∏–∑—É–µ—Ç —ç—Ç—É –ª–æ–≥–∏–∫—É. –û–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∞, —á—Ç–æ –º—ã –¥–≤–∏–∂–µ–º—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏, –Ω–æ —á–µ—Ç–≤—ë—Ä—Ç—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ –≤–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Å—Ö–µ–º—É.<br>
<br>
–Ø –≤—Å—è—á–µ—Å–∫–∏ –ø—ã—Ç–∞–ª—Å—è –µ–≥–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å, –Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å. –ü–æ—ç—Ç–æ–º—É —è –æ–±—Ä–∞—Ç–∏–ª—Å—è –∑–∞ —Å–æ–≤–µ—Ç–æ–º –∫ —Ç–æ–≤–∞—Ä–∏—â–∞–º. –û–¥–∏–Ω –ø–∞—Ä–µ–Ω—å –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ —Å–æ–≥–ª–∞—Å–Ω–æ –º–æ–∏–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –Ω–∞–±–ª—é–¥–µ–Ω–∏—è–º, —á–µ—Ç–≤—ë—Ä—Ç—ã–π –±–∞–π—Ç YY –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Å–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π –±–∏—Ç 0x8Y: —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —à–∞–≥–∞ –æ—Ç—Å—Ç—É–ø–∞. –ú–Ω–µ –±—ã–ª–æ —Å—Ç—ã–¥–Ω–æ, –≤—Å—ë –æ–∫–∞–∑–∞–ª–æ—Å—å –Ω–∞—Å—Ç–æ–ª—å–∫–æ –æ—á–µ–≤–∏–¥–Ω–æ‚Ä¶ <br>
<br>
–ù–∞–∫–æ–Ω–µ—Ü, –¥–µ–∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–∞—á–∞–ª –≤—ã–¥–∞–≤–∞—Ç—å –≤–∞–ª–∏–¥–Ω—ã–π –ø–æ—Ç–æ–∫‚Ä¶ –ø–æ–∫–∞ –Ω–µ –∑–∞—Å—Ç—Ä—è–ª –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ —Ñ–∞–π–ª–∞. –≠—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∏–∑-–∑–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π –¥–ª–∏–Ω—ã —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ –æ–∫–Ω–∞. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –∏ —Ç–µ—Å—Ç—ã –∏—Å–ø—Ä–∞–≤–∏–ª–∏ —Å–∏—Ç—É–∞—Ü–∏—é.<br>
<br>
–¢–∞–∫ –ø–æ—è–≤–∏–ª—Å—è <a href="https://github.com/alexhude/LeicaHacks/tree/master/Tools/M240FwTool">–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–æ—à–∏–≤–∫–∏ M240</a>.<br>
<br>
<h4>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—à–∏–≤–∫–∏</h4><br>
–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º —è –Ω–µ –ø—Ä–∏–¥—É–º–∞–ª –Ω–∏—á–µ–≥–æ –ª—É—á—à–µ, —á–µ–º –∏–∑–º–µ—Ä–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–º–µ—â–µ–Ω–∏—è –∏ —Ä–∞–∑–º–µ—Ä—ã —É—á–∞—Å—Ç–∫–æ–≤ –∫–æ–¥–∞&nbsp;‚Äî –∏ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –Ω–∞–π—Ç–∏ —Å–∞–º—ã–µ –±–ª–∏–∑–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ —Ñ–∞–π–ª–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, —ç—Ç–æ—Ç –±–ª–æ–∫:<br>
<br>
<code>0x00: 1E 1C AF 2E 01 01 00 02 07 E1 EA 5E 00 5C 1A B1<br>
0x10: 01 29 1A 7E AE 38 73 65 9C 3D 75 B4 34 2F 44 6E<br>
0x20: 13 17 8E 6B 00 00 00 01 00 00 00 30 E1 E3 50 D1</code> <br>
<br>
–≤ –∏—Ç–æ–≥–µ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª—Å—è –≤:<br>
<br>
<code>1E1CAF2E ‚Äî –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ "LEICA FILE"<br>
01010002 - 1.1.0.2<br>
005C1AB1 ‚Äî —Ä–∞–∑–º–µ—Ä —Å–∂–∞—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ (big endian)<br>
01291A7E ‚Äî —Ä–∞–∑–º–µ—Ä –Ω–µ—Å–∂–∞—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ (big endian)<br>
AE3873659C3D75B4342F446E13178E6B ‚Äî —Ö—ç—à MD5<br>
00000001 ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫<br>
00000030 ‚Äî —Å–º–µ—â–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–π –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏</code> <br>
<br>
–ü–æ –º–µ—Ä–µ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –ø—Ä–æ—à–∏–≤–∫–∏ —è —É–ª—É—á—à–∞–ª —Å–≤–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∏ –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –æ–Ω –≤—ã–¥–∞–≤–∞–ª —Ç–∞–∫–æ–µ:<br>
<br>
<code>Running with options:<br>
 + firmware folder: M240_FIRMWARE<br>
 + verbose enabled<br>
<br>
Open firmware file: FW_M240_1_1_0_2.FW<br>
 File size: 6036193 | 0x005C1AE1<br>
<br>
Parse container header:<br>
 version: 1.1.0.2<br>
 packed size: 6036145 | 0x005C1AB1<br>
 unpacked size: 19470974 | 0x01291A7E<br>
 body blocks: 1 | 0x00000001<br>
 body offset: 48 | 0x00000030<br>
 MD5: AE387365 9C3D75B4 342F446E 13178E6B<br>
 MD5 check: PASSED<br>
<br>
Uncompress container body: <br>
 6036145 -&gt; 19470974<br>
 Uncompression: DONE<br>
<br>
Split container:<br>
 Number of sections: 9 | 0x00000009<br>
 Section table size: 612 | 0x00000264<br>
 Section table offset: 36 | 0x00000024<br>
 Section 1<br>
 Section Name: "[A]IMG_LOKI-212"<br>
 Section offset: 0 | 0x00000000<br>
 Section size: 7340032 | 0x00700000<br>
 Section base: 1048576 | 0x00100000<br>
 MD5: A8D55AA2 B0ACDB14 0673AD79 707674F3<br>
 MD5 check: PASSED<br>
 Create file: M240_FIRMWARE/IMG_LOKI-212.bin<br>
<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
Section 9<br>
 Section Name: "[A]IMG-LENSDATA-213"<br>
 Section offset: 19214844 | 0x012531FC<br>
 Section size: 255478 | 0x0003E5F6<br>
 Section base: 16252928 | 0x00F80000<br>
 MD5: 39C2BEC0 27ED23F6 2C1C8513 EEE697B9<br>
 MD5 check: PASSED<br>
 Create file: M240_FIRMWARE/IMG-LENSDATA-213.bin<br>
 Splitting container: DONE<br>
Extraction COMPLETE!</code> <br>
<br>
–ü—Ä–æ—à–∏–≤–∫–∞ –ú240 –≤–∫–ª—é—á–∞–µ—Ç –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –¥–µ–≤—è—Ç—å—é —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏:<br>
<br>
<code>IMG_LOKI-212.bin - –ø—Ä–æ—à–∏–≤–∫–∞ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞<br>
IMG_LOKI-213.bin - –ø—Ä–æ—à–∏–≤–∫–∞ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞<br>
CTRL_SYS-11.bin - –ø—Ä–æ—à–∏–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞<br>
IMG-FPGA-212.bin - –ø—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Å–µ–Ω—Å–æ—Ä)<br>
IMG-FPGA-213.bin - –ø—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Å–µ–Ω—Å–æ—Ä)<br>
IMG-DSP-212.bin - –ø—Ä–æ—à–∏–≤–∫–∞ DSP<br>
IMG-DSP-213.bin - –ø—Ä–æ—à–∏–≤–∫–∞ DSP<br>
IMG-LENSDATA-212.bin - –¥–∞–Ω–Ω—ã–µ –ø–æ –æ–ø—Ç–∏–∫–µ<br>
IMG-LENSDATA-213.bin - –¥–∞–Ω–Ω—ã–µ –ø–æ –æ–ø—Ç–∏–∫–µ</code> <br>
<br>
–ö–∞–∫ –≤–∏–¥–∏–º, –≤ –æ–¥–Ω–æ–π –ø—Ä–æ—à–∏–≤–∫–µ –¥–≤–∞ –Ω–∞–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤. –ü–æ–∑–∂–µ —è —É–∑–Ω–∞–ª, —á—Ç–æ 212 ‚Äî —ç—Ç–æ –≤–µ—Ä—Å–∏—è –º–∏–∫—Ä—Å—Ö–µ–º—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∞ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –ø–æ—à–ª–æ –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ Leica M240. –î–∞–Ω–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –≤–µ—Ä—Å–∏–∏ 212.<br>
<br>
<h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π: CTRL_SYS-11.bin</h1><br>
–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –æ–±—â–∞—è —á–∞—Å—Ç—å&nbsp;‚Äî –ø—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è —á–∏–ø–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π. –≠—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –±–æ–ª—å—à–æ–π –±–∏–Ω–∞—Ä–Ω–∏–∫, –∏ –ø–æ –∫–æ–¥—É –Ω–µ—Ç—Ä—É–¥–Ω–æ –¥–æ–≥–∞–¥–∞—Ç—å—Å—è, –¥–ª—è —á–µ–≥–æ –æ–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω.<br>
<br>
<code>$ strings CTRL_SYS-11.bin | rg SH<br>
-&gt; Test SH7216 data flash driver<br>
-&gt; Test SH7216 SCI driver<br>
-&gt; Test SH7216 I2C driver<br>
-&gt; Test SH7216 MTU2 driver<br>
-&gt; Test SH7216 ADC functions<br>
-&gt; Test SH7216 CMT driver</code><br>
<br>
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø–µ—Ä–µ–¥ –Ω–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä Renesas SH7216 (SH-2A), –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–∞–Ω–Ω—é—é —Å—Ç–∞–¥–∏—é –∑–∞–≥—Ä—É–∑–∫–∏, —Ç–µ—Å—Ç—ã –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏. IDA –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç —Ç–∏–ø –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞. –û—Å—Ç–∞–≤–∞–ª–æ—Å—å –ª–∏—à—å –Ω–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –±–∞–∑–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏, –∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é —Ä–∞–∑–¥–µ–ª–æ–≤ –ø—Ä–æ—à–∏–≤–∫–∏: —ç—Ç–æ <code>0x0</code>.<br>
<br>
<code>Section Name: "[A]CTRL_SYS-11"<br>
Section offset: 14680064 | 0x00E00000<br>
Section size: 917277 | 0x000DFF1D<br>
Section base: 0 | 0x00000000</code><br>
<br>
–Ø –∑–∞–≥—Ä—É–∑–∏–ª –µ–≥–æ –≤ IDA –∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–æ –Ω–µ –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –Ω—ë–º –Ω–µ –∫–æ–ø–∞–ª—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∞–º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ –ø—Ä–æ—à–∏–≤–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.<br>
<br>
–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –µ—â—ë –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ UART —ç—Ç–æ–≥–æ —á–∏–ø–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –ø–æ—Ä—Ç, –∫—É–¥–∞ –≤—ã–¥–∞—ë—Ç –∂—É—Ä–Ω–∞–ª –∑–∞–≥—Ä—É–∑–∫–∏. –ú—ã –≤–µ—Ä–Ω—ë–º—Å—è –∫ —ç—Ç–æ–º—É –ø–æ–∑–∂–µ.<br>
<br>
<h1>–û—Å–Ω–æ–≤–Ω–æ–π —á–∏–ø: IMG_LOKI-212.bin</h1><br>
–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–µ–≤–µ—Ä—Å-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥ –¥–∞–Ω–Ω–æ–π –ø—Ä–æ—à–∏–≤–∫–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤:<br>
<br>
<ol>
<li>–∫–∞–∫–æ–π —Ç–∏–ø –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞<br>
</li>
<li>–∫–∞–∫–æ–≤ –∞–¥—Ä–µ—Å –±–∞–∑–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏<br>
</li>
<li>–Ω–∞ –∫–∞–∫–æ–π –û–° –æ–Ω –æ—Å–Ω–æ–≤–∞–Ω, –µ—Å–ª–∏ —Ç–∞–∫–æ–≤–∞—è –∏–º–µ–µ—Ç—Å—è</li>
</ol><br>
–ë–ª–∞–≥–æ–¥–∞—Ä—è –Ω–∞—à–µ–º—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É –º—ã —É–∂–µ –∑–Ω–∞–µ–º –∞–¥—Ä–µ—Å –±–∞–∑–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏: —ç—Ç–æ <code>0x100000</code>.<br>
<br>
<code>Section Name: "[A]IMG_LOKI-212"<br>
Section offset: 0 | 0x00000000<br>
Section size: 7340032 | 0x00700000<br>
Section base: 1048576 | 0x00100000</code><br>
<br>
–û—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø—Ä–æ—à–∏–≤–∫–∞ —Ö—Ä–∞–Ω–∏—Ç –≤ —É–¥–æ–±–æ—á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞:<br>
<br>
<code>$ strings ./IMG_LOKI-212.bin | rg Softune<br>
6Softune REALOS/FR is Realtime OS for FR Family, based on micro-ITRON COPYRIGHT(C) FUJITSU LIMITED 1994-1999<br>
...</code><br>
<br>
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º—ã –∏–º–µ–µ–º –¥–µ–ª–æ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º <b>Fujitsu FR</b> (Leica –Ω–∞–∑—ã–≤–∞–µ—Ç –µ–≥–æ <b>Maestro</b>) –∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–∫–æ–π <b>Softune REALOS</b>. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, —ç—Ç–æ –Ω–∞–º–Ω–æ–≥–æ –ª—É—á—à–µ, —á–µ–º Blackfin, –ø–æ—Ç–æ–º—É —á—Ç–æ IDA –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç FR.<br>
<br>
<h2>–ú–æ–¥—É–ª—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ FR</h2><br>
–†–µ–∞–ª—å–Ω–æ—Å—Ç—å –æ–∫–∞–∑–∞–ª–∞—Å—å –Ω–µ —Ç–∞–∫–æ–π —è—Ä–∫–æ–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ –ø—Ä–æ—à–∏–≤–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ IDA –Ω–µ –ø–æ–∫–∞–∑–∞–ª–∞ –Ω–∏–∫–∞–∫–∏—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –≤–Ω–µ—à–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ –∏ —Ç.&nbsp;–¥.<br>
<br>
–Ø —Ä–µ—à–∏–ª –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ, –Ω–æ –≤ –∏—Ç–æ–≥–µ –ø—Ä–∏—à–ª–æ—Å—å <a href="https://github.com/alexhude/LeicaHacks/tree/master/Tools/fr">–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–∏ –ø—Ä–æ—à–∏–≤–∫–∏</a>. –í–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç:<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9f3/728/c76/9f3728c769d29aa02e2f405c08d8bb9a.png"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a08/2ea/81d/a082ea81d9056b07935398a19d4df294.png"><br>
<br>
–ö—Ä–æ–º–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤ <code>ana</code>, <code>ins</code> –∏ <code>out</code>, —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–æ–≤—ã–π –∫–æ–¥ <code>emu</code> —É–º–µ–µ—Ç:<br>
<br>
<ul>
<li>—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –∫–æ–¥–∞ –∏ –≤–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–∞–Ω–Ω—ã–µ;<br>
</li>
<li>—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã switch;<br>
</li>
<li>–≤—ã–ø–æ–ª–Ω—è—Ç—å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É —Å—Ç–µ–∫–∞;<br>
</li>
<li>—Ä–∞–∑–¥–µ–ª—è—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Å—Ç–µ–∫–∞ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ;<br>
</li>
<li>–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏.</li>
</ul><br>
–ù–æ —Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ, –∫–∞–∫ –≤—ã –∑–∞–º–µ—Ç–∏–ª–∏, ‚Äî —ç—Ç–æ –ø—Ä–æ–ø–∏—Å–Ω—ã–µ –±—É–∫–≤—ã –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π :)<br>
<br>
–•–æ—Ç–∏—Ç–µ —É–≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π? –í–æ—Ç –æ–Ω:<br>
<br>
<pre>ADD      OR       BTSTH    LSR     MOV     BN       LDRES     EXTSH   
ADD2     ORH      MUL      LSR2    JMP     BP       STRES     EXTUH   
ADDC     ORB      MULU     ASR     CALL    BV       COPOP     SRCH0   
ADDN     EOR      MULH     ASR2    RET     BNV      COPLD     SRCH1   
ADDN2    EORH     MULUH    LDI     INT     BLT      COPST     SRCHC   
SUB      EORB     DIV0S    LDI     INTE    BGE      COPSV     LDM0    
SUBC     BANDL    DIV0U    LDI     RETI    BLE      NOP       LDM1    
SUBN     BANDH    DIV1     LD      BRA     BGT      ANDCCR    STM0    
CMP      BORL     DIV2     LDUH    BNO     BLS      ORCCR     STM1    
CMP2     BORH     DIV3     LDUB    BEQ     BHI      STILM     ENTER   
AND      BEORL    DIV4S    ST      BNE     DMOV     ADDSP     LEAVE   
ANDH     BEORH    LSL      STH     BC      DMOVH    EXTSB     XCHB    
ANDB     BTSTL    LSL2     STB     BNC     DMOVB    EXTUB      </pre> <br>
–í–æ—Ç —Ç–∞–∫, –ø—Ä–æ—Å—Ç–æ –∏ –∫—Ä–∞—Å–∏–≤–æ.<br>
<br>
–ö—Å—Ç–∞—Ç–∏, –≤—ã –º–æ–≥–ª–∏ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–µ –≤—ã—Ä–æ–≤–Ω–µ–Ω—ã:<br>
<br>
<pre>   BRA:D    loc_xxx
    LDI:8   #0x64, R5</pre><br>
–≠—Ç–æ –Ω–µ –æ—à–∏–±–∫–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–º –º–æ–¥—É–ª–µ, –∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å —Å–µ–º–µ–π—Å—Ç–≤–∞ Fujitsu FR. –û–Ω–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è <a href="https://en.wikipedia.org/wiki/Delay_slot">—Å–ª–æ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏</a> –∏ –¥–æ–≤–æ–ª—å–Ω–æ —Ç–∏–ø–∏—á–Ω–∞ –¥–ª—è RISC-–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤.<br>
<br>
–ò–∑ <a href="https://edevice.fujitsu.com/fj/MANUAL/MANUALp/en-pdf/CM71-10158-1E.pdf">—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—É FR80</a> (–ø—Ä–∏–º–µ—á–∞–Ω–∏–µ: —Å—Å—ã–ª–∫–∞ –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç):<br>
<br>
<blockquote>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤–µ—Ç–≤–ª–µ–Ω–∏—è (–µ—ë —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´—Å–ª–æ—Ç–æ–º –∑–∞–¥–µ—Ä–∂–∫–∏¬ª), –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –≤–µ—Ç–≤–ª–µ–Ω–∏–µ–º, –∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ü–µ–ª–µ–≤–æ–º—É –∞–¥—Ä–µ—Å—É –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤–µ—Ç–≤–ª–µ–Ω–∏—è. –ü–æ—Å–∫–æ–ª—å–∫—É –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ —Å–ª–æ—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏–µ–π –≤–µ—Ç–≤–ª–µ–Ω–∏—è, –≤–∏–¥–∏–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 1 —Ü–∏–∫–ª.</blockquote><br>
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —ç—Ç–æ, –ø–æ —Å—É—Ç–∏, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω–≤–µ–π–µ—Ä–∞, –∏ –ª—É—á—à–µ –ø–æ–º–Ω–∏—Ç—å –æ –Ω–µ–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–æ–≤—Å—é–¥—É –≤ –ø—Ä–æ—à–∏–≤–∫–µ Leica.<br>
<br>
<h2>Softune REALOS</h2><br>
<a href="https://en.wikipedia.org/wiki/Softune">–ò–∑ –≤–∏–∫–∏</a>:<br>
<br>
<blockquote>Softune ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Fujitsu –¥–ª—è —Å–µ–º–µ–π—Å—Ç–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ Fujitsu FR, FR-V –∏ F2MC. –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —è–¥—Ä–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ REALOS ¬µITRON. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –∑–µ—Ä–∫–∞–ª—å–Ω—ã—Ö –∫–∞–º–µ—Ä–∞—Ö Nikon (—Å–º. Nikon EXPEED) –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–∞–º–µ—Ä–∞—Ö Pentax —Å –±–∞–π–æ–Ω–µ—Ç–æ–º K.</blockquote><br>
–¢–∞–∫ —á—Ç–æ —ç—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ –ø–æ–ø—É–ª—è—Ä–Ω–∞—è –ø—Ä–∏–ª–∏—á–Ω–∞—è RTOS —Å –∑–∞–¥–∞—á–∞–º–∏, —Å–µ–º–∞—Ñ–æ—Ä–∞–º–∏ –∏ –¥—Ä—É–≥–∏–º–∏ –≤–∫—É—Å–Ω–æ—Å—Ç—è–º–∏. –ú–Ω–µ –±—ã–ª–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –º–æ–∂–Ω–æ –ª–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –≤ –ø—Ä–æ—à–∏–≤–∫–µ Leica –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.<br>
<br>
–î–æ–ª–∂–µ–Ω –Ω–∞–∑–≤–∞—Ç—å –ø–µ—Ä–≤—É—é —á–∞—Å—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–æ–π –Ω–∞–ø—Ä–∞—Å–Ω–æ–π —Ç—Ä–∞—Ç–æ–π –≤—Ä–µ–º–µ–Ω–∏, –∏ –≤–æ—Ç –ø–æ—á–µ–º—É.<br>
<br>
Softune IDE –æ–∫–∞–∑–∞–ª–æ—Å—å –æ—á–µ–Ω—å —Ç—Ä—É–¥–Ω–æ –Ω–∞–π—Ç–∏, –Ω–æ –≤ –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤ –º–Ω–µ —É–¥–∞–ª–æ—Å—å –∫–æ–µ-—á—Ç–æ –¥–æ—Å—Ç–∞—Ç—å. –ö–∞–∫ –∏ –æ–∂–∏–¥–∞–ª–æ—Å—å, IDE –≤–∫–ª—é—á–∞–ª–∞ –≤ —Å–µ–±—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –¢–∞–º –±—ã–ª–æ —á–µ—Ç—ã—Ä–µ –¥–≤–æ–∏—á–Ω—ã—Ö —Ñ–∞–π–ª–∞:<br>
<br>
<ul>
<li>lib911.lib<br>
</li>
<li>lib911e.lib<br>
</li>
<li>lib911if.lib<br>
</li>
<li>lib911p.lib</li>
</ul><br>
–ù–µ –∑–Ω–∞—é –ø–æ—á–µ–º—É, –º–æ–∂–µ—Ç –ø–æ –∏–Ω–µ—Ä—Ü–∏–∏, –∫–∞–∫ —è –≤–∑–ª–∞–º—ã–≤–∞–ª –≤—Å—ë —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å Leica, —è –æ–ø—è—Ç—å –Ω–∞—á–∞–ª —Ä–µ–≤–µ—Ä—Å-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥ —Ñ–æ—Ä–º–∞—Ç–∞. –î–∞, –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ <a href="https://en.wikipedia.org/wiki/Relocatable_Object_Module_Format">Object Module Format</a>. –ò –¥–∞, –∫–æ–Ω–µ—á–Ω–æ, —è <a href="https://github.com/alexhude/LeicaHacks/tree/master/Tools/FRLibTool">–Ω–∞–ø–∏—Å–∞–ª –¥–ª—è —ç—Ç–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</a>:<br>
<br>
<code>Fujitsu RISC Library Tool v1.0<br>
Usage: FRLibTool [-s start] [-i imagebase] [-o output] [-f index] [-dv] FIRMWARE.BIN LIBRARY.LIB<br>
<br>
This tool will help you to find Softune REALOS library functions in FR (Fujitsu RISC) firmware.<br>
Use following arguments:<br>
 -f Specify firmware image file<br>
 -s Specify firmware image scan offset<br>
 -b Specify firmware imagebase<br>
 -o Specify output type (exclusively)<br>
 list - list of functions<br>
 idc - IDC script<br>
 py - IDA python script<br>
 pat - FLAIR pattern file<br>
 -i xxx Specify index of particular function<br>
 -d Dump library<br>
 -v Be verbose</code><br>
<br>
–° –µ–≥–æ –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã <code>*.pat</code> –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ <b>IDA FLAIR</b> –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ <a href="https://github.com/alexhude/LeicaHacks/tree/master/IDA/signatures/">—Ñ–∞–π–ª–æ–≤ —Å–∏–≥–Ω–∞—Ç—É—Ä</a>.<br>
<br>
<code>$ FRLibTool -o pat lib911.lib<br>
$ FRLibTool -o pat lib911e.lib<br>
$ FRLibTool -o pat lib911if.lib<br>
$ FRLibTool -o pat lib911p.lib<br>
...<br>
$ sigmake -n "SOFTUNE C/C++ Library" lib911.pat lib911e.pat lib911if.pat lib911p.pat softune.sig</code><br>
<br>
–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —ç—Ç–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —è –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ —Å —Ä–∞–¥–æ—Å—Ç—å—é —É–≤–∏–¥–µ–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ <b>IMG_LOKI-212.idb</b>. <br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/189/618/145/189618145ab302edfff51fa222ed89b3.png"><br>
<br>
<h4>–ú–∞–∫–µ—Ç</h4><br>
–°—Ä–∞–∑—É –æ–±—Ä–∞—â–∞–µ—Ç –Ω–∞ —Å–µ–±—è –≤–Ω–∏–º–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ –ø—Ä–æ—à–∏–≤–∫–µ. –ú–Ω–æ–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ–Ω—É—é—Ç—Å—è –ø–æ —Å–≤–æ–µ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏. –≠—Ç–æ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –æ–±—â–∏–π —à–∞–±–ª–æ–Ω.<br>
<br>
–¢–∞–∫–∂–µ –≤–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–∏ —Ñ–∞–π–ª–∞ –ø—Ä–æ—à–∏–≤–∫–∏ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–æ–π –∞–¥—Ä–µ—Å –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Å–±—Ä–æ—Å–∞ (reset handler). –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤—ã—à–µ –ø–æ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏.<br>
<br>
–ü—Ä–∏—à–ª–æ—Å—å –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã, –≤ –∏—Ç–æ–≥–µ –ø–æ–ª—É—á–∏–ª—Å—è —Ç–∞–∫–æ–π –º–∞–∫–µ—Ç:<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/70f/d9d/ca3/70fd9dca36e610c7dea2e1c2fd29090c.png"><br>
<br>
<h4>–ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è</h4><br>
–¢–∞–±–ª–∏—Ü—É –≤–µ–∫—Ç–æ—Ä–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø–æ –¥–æ—Å—Ç—É–ø—É –∫ TBR (Table Base Register):<br>
<br>
<code> LDI:32 #int_table, R0<br>
 MOV R0, TBR</code><br>
<br>
–û–±—ã—á–Ω–æ –æ–Ω –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Å–±—Ä–æ—Å–∞ –≤–µ–∫—Ç–æ—Ä–∞ –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏.<br>
<br>
–ê–¥—Ä–µ—Å–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –ø–æ —Ñ–æ—Ä–º—É–ª–µ <code>TBR + (0x3FC - 4 √ó inum)</code>, —Ç–∞–∫ —á—Ç–æ –≤–µ–∫—Ç–æ—Ä —Å–±—Ä–æ—Å–∞ –≤ –∫–æ–Ω—Ü–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ —Å–º–µ—â–µ–Ω–∏–µ–º <code>0x3FC</code>.<br>
<br>
–Ø –Ω–∞—à—ë–ª –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –∏–∑ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ FR –∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–ª, —á—Ç–æ —É Leica Maestro –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –∫–æ–º–ø–æ–Ω–æ–≤–∫–∞. –ó–∞—Ç–µ–º –≤–∑—è–ª –∫–∞–∂–¥—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏ –ø–æ–ø—ã—Ç–∞–ª—Å—è –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –Ω–∞–º—ë–∫, —Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–π —Ü–µ–ª—å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è.<br>
<br>
–í –∏—Ç–æ–≥–µ —Å–æ—Å—Ç–∞–≤–∏–ª —Ç–∞–∫–æ–π —Å–ø–∏—Å–æ–∫:<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/bd7/eb8/c29/bd7eb8c291d5368d44576466400cb34b.png"><br>
<br>
–ú–Ω–æ–≥–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –≤–ø–æ–ª–Ω–µ –æ–∂–∏–¥–∞–µ–º—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ AUDIO/SDIO/VIDEO/JPEG/RAW, –Ω–æ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–∞–º–æ–µ –∑–∞–≥–∞–¥–æ—á–Ω–æ–µ –∏–∑ –Ω–∏—Ö? –Ø –≥–æ–≤–æ—Ä—é –æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏ <code>int_uart_in</code>. –ü–æ—Ö–æ–∂–µ, —á—Ç–æ –∫–∞–º–µ—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫–æ–π-—Ç–æ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º UART CLI.<br>
<br>
<h4>–°–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã</h4><br>
–ö–∞–∫ –ø–æ—á—Ç–∏ –ª—é–±–∞—è –û–°, Softline REALOS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã. –í –∞—Å—Å–µ–º–±–ª–µ—Ä–µ –æ–Ω–∏ –≤—ã–≥–ª—è–¥—è—Ç —Ç–∞–∫:<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/22f/a92/9e3/22fa929e311af81f43be57bf0bbbbc74.png"><br>
<br>
–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º. –ù–∞—á–Ω—ë–º —Å –ø–æ–∏—Å–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è <code>INT #0x40</code>. –í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—ã—à–µ —ç—Ç–æ<br>
<br>
<code>(0x3FC - 4 √ó inum) = (0x3FC - 4 √ó 0x40) = 0x2FC = int_realos_syscall</code> <br>
<br>
–í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–∏–∂–Ω—é—é —á–∞—Å—Ç—å —Ç–∞–±–ª–∏—Ü—ã —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ —Å 16-–±–∏—Ç–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏. –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ <code>syscall_table_bottom + (num * 2)</code>:<br>
<br>
<code>[syscall_table_bottom + (-23 * 2)] = [syscall_table_bottom - 0x2E] = [0x1012EA] = 0xE68</code> <br>
<br>
–≠—Ç–æ –Ω–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ –∞–¥—Ä–µ—Å, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∫–∞–∫ <code>syscall_table_bottom + offset</code>. –í–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–∫–∞–∑–∞–Ω –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c5a/240/2bb/c5a2402bb00a171532dabf9ef9aa45ea.png"><br>
<br>
–í—Å–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∏ –∏—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞–Ω—ã –≤ <a href="https://www.fujitsu.com/downloads/MICRO/fma/pdfmcu/resofrke-cm71-00321-3e.pdf">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –ø–æ —è–¥—Ä—É Softline REALOS/FR</a>, –ø–æ—ç—Ç–æ–º—É –º–Ω–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –∏ –µ—â—ë –Ω–µ–º–Ω–æ–≥–æ —É–ª—É—á—à–∏—Ç—å IDB.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c6a/b81/57a/c6ab8157a83a3e00613b4a000de45e54.png"><br>
<br>
–ö–æ–Ω–µ—á–Ω–æ, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–æ–¥ –µ—â—ë –∫—Ä–∞—Å–∏–≤–µ–µ, –æ–ø—Ä–µ–¥–µ–ª–∏–≤ —Ç–∏–ø—ã —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –≤ IDA.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1e0/75c/099/1e075c099f1bdcb70388427705dd25c0.png"><br>
<br>
–Ø –Ω–∞–ø–∏—Å–∞–ª <a href="https://github.com/alexhude/LeicaHacks/tree/master/IDA/scripts/softune.py">—Å–∫—Ä–∏–ø—Ç –Ω–∞ Python</a> –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ —ç—Ç–∏—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –∏ –ø—Ä–æ—á–µ–≥–æ.<br>
<br>
<h4>–ó–∞–¥–∞—á–∏</h4><br>
–í —Å–∏—Å—Ç–µ–º–Ω–æ–º –≤—ã–∑–æ–≤–µ <code>sta_tsk</code> —è –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –Ω–µ –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∞ pid. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –∏—Å–∫–∞—Ç—å –±–æ–ª—å—à–æ–π –º–∞—Å—Å–∏–≤ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ –∑–∞–¥–∞—á. –ò –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –Ω–∞—á–∞—Ç—å —Å —Å–∞–º–æ–≥–æ <code>sta_tsk</code>.<br>
<br>
<pre>ROM:102180 sys_sta_tsk:
ROM:102180                 ST      RP, @-R15
ROM:102182                 LDUB    @(R14, 0x4F), R3
ROM:102184                 LDI:32  #word_100B80, R14</pre><br>
–í —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ –º—ã –≤–∏–¥–∏–º –∫–∞–∫–∏–µ-—Ç–æ —Å—Å—ã–ª–∫–∏. –ü—Ä–∏—à–ª–æ—Å—å –Ω–µ–º–Ω–æ–≥–æ –ø–æ–≤–æ–∑–∏—Ç—å—Å—è —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –≤ –∏—Ç–æ–≥–µ —á–∞—Å—Ç–∏ —Å–æ–±—Ä–∞–ª–∏—Å—å –≤–º–µ—Å—Ç–µ:<br>
<br>
<pre>ROM:100B80 word_100B80:    .word 0xF           ; number of tasks
ROM:100B82                 .word 0x1C          ; task descriptor size

ROM:100B84                 .long 0x82A09F5C    ; task 1 descriptor
ROM:100B88                 .long 0x1000D
ROM:100B8C                 .long 0
ROM:100B90                 .long 0x40000000
ROM:100B94                 .long sub_1A7DB2    ; task main
ROM:100B98                 .long 0x8286EEC0
ROM:100B9C                 .long 0

ROM:100BA0                 .long 0x82A09F88    ; task 2 descriptor
ROM:100BA4                 .long 0x20010
ROM:100BA8                 .long 0
ROM:100BAC                 .long 0x40000000
ROM:100BB0                 .long sub_1A6BD2    ; task main
ROM:100BB4                 .long 0x8287EEC0
ROM:100BB8                 .long 0
...</pre><br>
–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ. –í—Å–µ–≥–æ 15 –∑–∞–¥–∞—á. –ë—ã–ª–æ –≤–æ–ø—Ä–æ—Å–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥–ª—è–Ω—É—Ç—å –≤ –∫–∞–∂–¥—É—é –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–º—è –∏ —Ü–µ–ª—å –∑–∞–¥–∞—á–∏ (–∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π). –í–æ—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫:<br>
<br>
<ol>
<li><b>SubCPU</b><br>
–≠—Ç–∞ –∑–∞–¥–∞—á–∞, –ø–æ-–≤–∏–¥–∏–º–æ–º—É, –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞—Ö–≤–∞—Ç–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è, –≤–∏–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —ç–∫—Ä–∞–Ω—É –∏ —Ç.&nbsp;–¥.<br>
</li>
<li><b>KeyManager</b><br>
–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —ç—Ç–∞ –∑–∞–¥–∞—á–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏.<br>
</li>
<li><b>GuiManager</b><br>
–î–æ–≤–æ–ª—å–Ω–æ –±–æ–ª—å—à–∞—è –∑–∞–¥–∞—á–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –º–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π UI –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.<br>
</li>
<li><b>DebugManager</b><br>
–î–∞, –µ—Å—Ç—å –∫–æ–µ-—á—Ç–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏. –ù—è–º-–Ω—è–º.<br>
</li>
<li><b>FileManager</b><br>
–≠—Ç–∞ –∑–∞–¥–∞—á–∞ ‚Äî –≤—Å—ë –æ —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.<br>
</li>
<li><b>FamManager</b><br>
–Ø –±—ã —Å–∫–∞–∑–∞–ª, —á—Ç–æ –∑–∞–¥–∞—á–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ñ–∞–π–ª—ã –∏ –ø–∞–º—è—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–¥–∞—á —Ñ–∞–π–ª–æ–≤–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–∞–º—è—Ç–∏.<br>
</li>
<li><b>MemoryManager</b><br>
–ù–∏–∫–∞–∫–∏—Ö —Å—é—Ä–ø—Ä–∏–∑–æ–≤: –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–∞–º—è—Ç—å—é, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É–ª–æ–º –∏ —Ç.&nbsp;–¥.<br>
</li>
<li><b>ImageManager</b><br>
–≠—Ç–∞ –∑–∞–¥–∞—á–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è/–¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.<br>
</li>
<li><b>UsbManager</b><br>
–¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞&nbsp;‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –ø–æ USB, –∫–æ—Ç–æ—Ä–∞—è –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è MassStorage, PTP –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª Leica.<br>
</li>
<li><b>IOManager</b><br>
–ü–æ—Ö–æ–∂–µ, —ç—Ç–∞ –∑–∞–¥–∞—á–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ SD –∏ CF-–∫–∞—Ä—Ç—ã (—á—Ç–æ? –∫–∞–∫–∏–µ –µ—â—ë CF? –º–æ–∂–µ—Ç, —ç—Ç–æ –∏–∑ –º–æ–¥–µ–ª–∏ 213).<br>
</li>
<li><b>Systemmanager</b><br>
–†–∞–∑–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤—Ä–æ–¥–µ –æ–±—â–∏—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏–µ–º –∏ —Ç.&nbsp;–¥.<br>
</li>
<li><b>SettingsManager</b><br>
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–º–µ—Ä—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.<br>
</li>
<li><b>MonitorManager</b><br>
–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞–º–µ—Ä—ã –∏ –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ –∑–∞–¥–∞—á–∏.<br>
</li>
<li><b>PeripheralManager</b><br>
–≠—Ç–∞ –∑–∞–¥–∞—á–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç GPS, —è—Ä–∫–æ—Å—Ç—å –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–µ —Å–µ–Ω—Å–æ—Ä—ã.<br>
</li>
<li><b>–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ</b><br>
–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –¥–ª—è –Ω–µ—ë —è –Ω–µ –Ω–∞—à–µ–ª –Ω–∏—á–µ–≥–æ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ.</li>
</ol><br>
–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –ø–æ—Å–ª–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ –µ—Å—Ç—å –µ—â—ë –æ–¥–∏–Ω –≤—ã–¥–∞—é—â–∏–π—Å—è –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä.<br>
<br>
<code>ROM:100D28 dword_100D28: .long 0x82A0A1F0<br>
ROM:100D2C .long 0x21<br>
ROM:100D30 .long 0<br>
ROM:100D34 .long 0x80000000<br>
ROM:100D38 .long tid16_task<br>
ROM:100D3C .long 0x8285EEC0<br>
ROM:100D40 .long 0</code><br>
<br>
–ê —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–¥–∞—á–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ –≤–µ—Ç–≤–ª–µ–Ω–∏–µ —Å–∞–º–æ–π —Å–µ–±—è.<br>
<br>
<code>ROM:101494 sub_101494:<br>
ROM:101494 BRA sub_101494 ; CODE XREF: sub_101494</code><br>
<br>
–ù–∞ —ç—Ç–æ—Ç –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–æ–∏—Ç —Å—Å—ã–ª–∫–∞ –≤ –∫–æ–Ω—Ü–µ —Ñ—É–Ω–∫—Ü–∏–∏ <code>start</code>, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—á –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –ü–û. –¢–∞–∫ —á—Ç–æ —ç—Ç–æ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –∑–∞–¥–∞—á–∞ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è —Å–∏—Å—Ç–µ–º—ã.<br>
<br>
<h4>–ú–æ–¥—É–ª–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è</h4><br>
–ü–æ–º–∏–º–æ –∑–∞–¥–∞—á, –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ IO –∏ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã–µ –º–æ–¥—É–ª–∏. –ú–æ–¥—É–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ –≤–∏–¥–µ –≥—Ä—É–ø–ø—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –∏–∑ –∑–∞–¥–∞—á.<br>
<br>
–ì—Ä—É–ø–ø–∞ IO, –∫–∞–∂–µ—Ç—Å—è, –≤–∫–ª—é—á–∞–µ—Ç:<br>
<br>
<ul>
<li>–ú–µ–Ω–µ–¥–∂–µ—Ä IO</li>
<li>–ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä</li>
<li>–ú–µ–Ω–µ–¥–∂–µ—Ä USB</li>
<li>USB PTP</li>
<li>–ü—Ä–æ—Ç–æ–∫–æ–ª USB Leica</li>
<li>USB Mass Storage</li>
<li>–ú–µ–Ω–µ–¥–∂–µ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∞–º–∏</li>
<li>–ú–µ–Ω–µ–¥–∂–µ—Ä –æ—Ç–ª–∞–¥–∫–∏</li>
<li>–ú–µ–Ω–µ–¥–∂–µ—Ä –æ–±—ä–µ–∫—Ç–∏–≤–∞</li>
</ul><br>
–ê –≤ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω–æ–π –≥—Ä—É–ø–ø–µ:<br>
<br>
<ul>
<li>–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏</li>
<li>–î–∞—Ç—á–∏–∫ –æ—Å–≤–µ—â—ë–Ω–Ω–æ—Å—Ç–∏</li>
<li>–°–≤–µ—Ç–æ–¥–∏–æ–¥—ã</li>
<li>–î–∏–Ω–∞–º–∏–∫</li>
<li>–î–∞—Ç—á–∏–∫ —É–≥–ª–∞ –Ω–∞–∫–ª–æ–Ω–∞</li>
<li>–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è –∫—Ä—ã—à–∫–∏</li>
<li>–ú–æ–¥—É–ª—å GPS</li>
<li>–ú–æ–¥—É–ª—å 3DAxis</li>
</ul><br>
–°–∞–º–∞ —Å–∏—Å—Ç–µ–º–∞ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã SOFTUNE:<br>
<br>
<pre><code class="plaintext hljs">struct RealOS_MsgPayload
{
  uint32_t msgID;   // +0x0
  uint32_t data[];  // +0x4
}

struct RealOS_Message
{
  uint32_t            os_reserved1; // +0x0
  uint32_t            os_reserved2; // +0x4
  
  uint32_t            to;           // +0x8
  uint32_t            from;         // +0xC
  RealOS_MsgPayload*  payload;      // +0x10
}</code></pre><br>
–ö–∞–∫ –∏ –æ–∂–∏–¥–∞–ª–æ—Å—å, –≤ IPC —Ç–æ–∂–µ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø —Å–æ–æ–±—â–µ–Ω–∏–π. –ü–æ—Å–∫–æ–ª—å–∫—É –º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –∑–∞–¥–∞—á–∞—Ö –∏ –º–æ–¥—É–ª—è—Ö, —è —Å–º–æ–≥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ —ç—Ç–∏—Ö –≥—Ä—É–ø–ø:<br>
<br>
<pre>0x1101xxxx - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
             0x11010002 = SYS_UPDATE_BOOTLOADER –∏–ª–∏
             0x11010005 = SYS_ERASE_SETTINGS
0x1102xxxx - —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∑–∞—Ö–≤–∞—Ç–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
             0x11020001 = CMD_CAP_CAPTURE –∏–ª–∏
             0x11020008 = IMAGE_STATUS_CHANGED  
0x1104xxxx - —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º:  
             0x11040002 = PLY_DISABLE_PLAY_MODE –∏–ª–∏
             0x11040004 = PLY_IMAGE_READY  
0x1108xxxx - —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ PTP –∏ –¥—Ä.:
             0x11080002 = DBG_CHANGE_LEVEL –∏–ª–∏
             0x11080012 = DBG_WRITE_ROM_DUMP_SD  
0x2201xxxx - —Å–æ–æ–±—â–µ–Ω–∏—è USB PTP
             0x22010108 = –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–∞–º–µ—Ä—ã –∏–ª–∏
             0x22010118 = –∑–∞–ø—Ä–æ—Å DebugObject  
0x2202xxxx - –¥–æ–≤–æ–ª—å–Ω–æ –±–æ–ª—å—à–∞—è –≥—Ä—É–ø–ø–∞ —Å–æ–æ–±—â–µ–Ω–∏–π SUBCPU:
             0x22020002 = E_SUBCPU_REQUEST_M_EXPOSURE_REQUEST  
             0x22020015 = E_IO_SUBCPU_COMMAND_CLEANING_SENSOR  
0x2203xxxx - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ª–∞–¥–∫–∏:
             0x22030001 = –∫–æ–º–∞–Ω–¥–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
0x2204xxxx - —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è IO:
             0x2204000C = –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ Mass Storage –∏–ª–∏
             0x22040012 = –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞  
0x330000xx - –¥—Ä—É–≥–∞—è –≥—Ä—É–ø–ø–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è UI:
             0x33000001 = –Ω–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à
             0x33000007 = –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∏–≤–∞
0x440000xx - –∑–¥–µ—Å—å –º–∞–ª–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –Ω–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
             0x44000013 = E_IMG_CMD_CHANGE_PINFO  
0x55xxxxxx ‚Äî –≥—Ä—É–ø–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π FAM:  
             0x558800xx = —Ñ–∞–π–ª-–º–µ–Ω–µ–¥–∂–µ—Ä FAM –∏–ª–∏
             0x558888xx = –ø–µ—Ä–≤–∞—è –≥—Ä—É–ø–ø–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–µ–Ω—é FAM
0x6602xxxx ‚Äî –ø–æ—Ö–æ–∂–µ –Ω–∞ —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è LED, –Ω–∞–ø—Ä–∏–º–µ—Ä:
             0x66020001 - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ LED —Å X –ì—Ü
             0x66020002 = –≤–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ LED  
0x6604xxxx - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–ø–µ—Ä–æ–º:
             0x66040001 = —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–ø–µ—Ä–∞
             0x66040007 = –ø–∏—Å–∫ –æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –∫–∞—Ä—Ç–µ
0x6611xxxx - —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ª–∞–¥–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø–∞–º—è—Ç—å—é
0x6622xxxx - —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø–∞–º—è—Ç—å—é
0x6660xxxx - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø–∞–º—è—å—Ç—é:
             0x66600006 = HISTOGRAM  
             0x66600011 = RAWCOMP  
0x771100xx and 0x77AA00xx - —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º —Ä–µ–∂–∏–º–æ–≤ –∫–∞–º–µ—Ä—ã</pre><br>
–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –º–Ω–æ–≥–æ –¥—Ä—É–≥–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏.<br>
<br>
<h4>GUI</h4><br>
–í —Ñ–∞–π–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º –µ—â—ë –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ —Ä–∞–∑–¥–µ–ª—ã: <b>CTRL_SYS-11</b>, <b>IMG-LOKI-212</b>, <b>IMG-DSP-212</b>, <b>IMG-FPGA-212</b> –∏ <b>IMG-LENSDATA-212</b>.<br>
<br>
–ß—Ç–æ –º–µ–Ω—è —É–¥–∏–≤–∏–ª–æ, —Ç–∞–∫ —ç—Ç–æ –ø–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ GUI. –ù–æ –æ–Ω–∏ –≥–¥–µ-—Ç–æ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ <b>IMG-LOKI-212</b>.<br>
<br>
–û–¥–∏–Ω –∏–∑ –º–æ–∏—Ö –æ–±—ã—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –∫ –æ–±—Ä–∞—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–æ—à–∏–≤–∫–∏&nbsp;‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–µ—Ä–µ–∫—Ä—ë—Å—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏. –ù–µ —Ç–æ–ª—å–∫–æ –≤ –∫–æ–¥–µ, –Ω–æ –∏ –≤ —Ä–∞–∑–¥–µ–ª–µ –¥–∞–Ω–Ω—ã—Ö. –ó–∞—Ç–µ–º —è –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—é –∏—Ö, –ø—ã—Ç–∞—è—Å—å –Ω–∞–π—Ç–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —à–∞–±–ª–æ–Ω—ã –∏–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —á–∞—Å—Ç–∏ –∫–æ–¥–∞.<br>
<br>
–ü—Ä–æ—à–∏–≤–∫–∞ Leica –Ω–µ —Å—Ç–∞–ª–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º. –¢–∞–º –º–Ω–æ–≥–æ –ø–æ—Ö–æ–∂–∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –¥–∞–Ω–Ω—ã—Ö —Å –∞–¥—Ä–µ—Å–∞–º–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –¥–∞–ª—å—à–µ –∏ —Ç.&nbsp;–¥. –ü–æ–¥–Ω–∏–º–∞—è—Å—å –ø–æ –∏–µ—Ä–∞—Ä—Ö–∏–∏ —Å—Å—ã–ª–æ–∫, —è –≤ –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤ —É–≤–∏–¥–µ–ª –∑–Ω–∞–∫–æ–º—É—é —Ñ—É–Ω–∫—Ü–∏—é.<br>
<br>
–ù–∞–ø—Ä–∏–º–µ—Ä, —è –Ω–∞—à—ë–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ —Å—Å—ã–ª–æ–∫:<br>
<br>
<pre><code class="plaintext hljs">g_data = { ... }</code></pre><br>
–ö –Ω–µ–π –æ–±—Ä–∞—â–∞–ª–∞—Å—å –¥—Ä—É–≥–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:<br>
<br>
<pre><code class="plaintext hljs">g_data_struct1 = { ... , &amp;g_data }</code></pre><br>
–ö –∫–æ—Ç–æ—Ä–æ–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –µ—â—ë –æ–¥–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:<br>
<br>
<pre><code class="plaintext hljs">g_data_struct2 = { &amp;g_data, ... }</code></pre><br>
–ù–∞ —ç—Ç—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞ –∏–∑ –∫–æ–¥–∞, –∏ –µ—ë –ø–µ—Ä–µ–¥–∞—é—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥—Ä—É–≥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:<br>
<br>
<pre><code class="plaintext hljs">func1()
‚ï∞ func2(..., &amp;g_data_struct2, ...)</code></pre><br>
–û–¥–Ω–∞–∫–æ <code>func1()</code> –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –¥—Ä—É–≥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –Ω–µ–∫–æ—Ç–æ—Ä–æ–º –º–∞—Å—Å–∏–≤–µ:<br>
<br>
<pre><code class="plaintext hljs">g_func_list1[] = { ..., func1(), ... }</code></pre><br>
–ü–æ—Å–º–æ—Ç—Ä–µ–≤ –≤—ã—à–µ, —è –Ω–∞—à–µ–ª –≤ –∫–æ–¥–µ –≤—ã–∑–æ–≤ <code>g_func_list1</code>:<br>
<br>
<pre><code class="plaintext hljs">func3() {
    g_func_list1[x]
}</code></pre><br>
–ò —Å–Ω–æ–≤–∞ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –º–∞—Å—Å–∏–≤–µ:<br>
<br>
<pre><code class="plaintext hljs">g_func_list2[] = { ..., func3(), ... }</code></pre><br>
–ö —Å–∞–º–æ–º—É –º–∞—Å—Å–∏–≤—É –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π –∫–æ–¥:<br>
<br>
<pre><code class="plaintext hljs">func4() {
    g_func_list2[x]
}</code></pre><br>
–ö —Å—á–∞—Å—Ç—å—é, –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑–≤–∞–Ω–∞ –∏–∑ –¥—Ä—É–≥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∏ —Ç–∞–∫ –¥–æ <code>gui_MADE_ApplicationRun</code>.<br>
<br>
<pre><code class="plaintext hljs">gui_Statemachine_DoStateChange()
‚ï∞ gui_MADE_ApplicationRun()
  ‚ï∞ func5()
    ‚ï∞ func4()</code></pre><br>
–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç—Ä–æ–∫–∞—Ö —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞ GUI –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚ÄúMADE‚Äù, –∞ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å—Ç—Ä–∞–Ω–∏—Ü –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é <code>MADE_GetSysTri</code>, —á—Ç–æ –±—ã —ç—Ç–æ –Ω–∏ –∑–Ω–∞—á–∏–ª–æ. –ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π GUI, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ <code>gui_Statemachine_DoStateChange</code>. –ü–æ—Å–ª–µ —Å–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ GUI —Å–ª–æ–∂–∏–ª–∞—Å—å –æ–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∞:<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/4d4/33e/3cf/4d433e3cf679dba11141d58d080daf5b.png"><br>
<br>
–ö–∞–∫ –≤–∏–¥–∏—Ç–µ, –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤ GUI&nbsp;‚Äî <code>gui_CopyImageDesc</code> (—Ö–æ—Ç—è —ç—Ç–æ –Ω–µ –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è). –£ –Ω–µ—ë —Å–ª–µ–¥—É—é—â–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã:<br>
<br>
<pre><code class="plaintext hljs">gui_CopyImageDesc(
    uint32_t			dstAddress;		// R4 - destination address
    UIDescType			type;			// R5 - description type
    UITarget			target;			// R6 - rendering target
    uint32_t			descAddress;	    	// R7 - description address
    uint8_t			always0;        	// (SP + 0x0) - always 0
    uint8_t			index1;			// (SP + 0x4) - index 1
    uint8_t			index2;			// (SP + 0x8) - index 2
    uint16_t			x_offset;		// (SP + 0xC) - x offset
    uint16_t			y_offset;		// (SP + 0x10) - y offset
    uint16_t			unknown2;		// (SP + 0x14) -
    uint32_t			language1;		// (SP + 0x18) - language id 1
    uint32_t			language2;		// (SP + 0x1C) - language id 2
    uint32_t			funcAddress;		// (SP + 0x20) - function address
)</code></pre><br>
–ï—Å—Ç—å —á–µ—Ç—ã—Ä–µ —Ç–∏–ø–∞ –æ–ø–∏—Å–∞–Ω–∏–π —Ä–µ—Å—É—Ä—Å–æ–≤:<br>
<br>
<pre><code class="plaintext hljs">struct UIDescType0Header         struct UIDescType1Header         struct UIDescType2                struct UIDescType3       
{                                {                                {                                 {                        
    uint32_t    address;             uint32_t    address;             uint32_t    reg;                  uint16_t    x_offset;
    uint16_t    entries;             uint16_t    entries;             uint32_t    address;              uint16_t    y_offset;
    uint16_t    unknown;             uint16_t    unknown;             uint16_t    unknown1;             uint32_t    address; 
}                                }                                    uint16_t    unknown2;         }                        
                                                                      uint16_t    unknown3;                                        
struct UIDescType0Entry          struct UIDescType1Entry              uint16_t    tableoff;                                        
{                                {                                }                                                                
    uint16_t    x_offset;            uint16_t    x_offset;                   
    uint16_t    y_offset;            uint16_t    y_offset;                   
    uint32_t    address;             uint32_t    address;                    
}                                    uint16_t    objects;                    
                                     uint16_t    total_w; 
                                     uint16_t    total_h;                    
                                     uint16_t    unknown;                    
                                 }    </code></pre><br>
–£ –ø–µ—Ä–≤–æ–≥–æ —Ç–∏–ø–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –º–∞—Å—Å–∏–≤ –∑–∞–ø–∏—Å–µ–π. –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –∏–º–µ–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –∞–¥—Ä–µ—Å –ø–∏–∫—Å–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –¢–µ–∫—É—â–∏–π —Ç–∏–ø, –ø–æ—Ö–æ–∂–µ, –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º—ã–µ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ –∑–Ω–∞—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–µ—Ä—ã–º–∏ –∏–ª–∏ –∏—Å—á–µ–∑–∞—Ç—å –∏–∑ UI.<br>
<br>
–í—Ç–æ—Ä–æ–π —Ç–∏–ø —Ç–æ–∂–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏, –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ç—Ä–æ–∫ –∏–ª–∏ –±–ª–æ–∫–æ–≤ —Ç–µ–∫—Å—Ç–∞.<br>
<br>
–¢—Ä–µ—Ç–∏–π —Ç–∏–ø –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤.<br>
<br>
–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ç–∏–ø –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—Å–µ –¥—Ä—É–≥–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ñ–æ–Ω—ã –∏ —Ç.&nbsp;–¥.<br>
<br>
–¢–µ–ø–µ—Ä—å –≤–∑–≥–ª—è–Ω–µ–º –Ω–∞ —Å–∞–º–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.<br>
<br>
<code>+0x00: 00 08 00 14 00 01 A2 FF 0A 04 05 FF 0C 04 03 FF<br>
+0x10: 0D 04 03 FF 0E 04 02 FF 0E 04 02 FF 04 04 06 FF<br>
+0x20: 04 04 02 FF 04 04 06 FF 04 04 02 FF 04 04 06 FF<br>
+0x30: 04 04 02 FF 04 04 06 FF 04 04 02 FF 04 04 06 FF<br>
+0x40: 04 04 02 FF 04 04 06 FF 04 04 02 FF 04 04 06 FF<br>
+0x50: 04 04 02 FF 04 04 06 FF 04 04 02 FF 0E 04 02 FF<br>
+0x60: 0E 04 02 FF 0D 04 03 FF 0D 04 03 FF 0C 04 04 FF<br>
+0x70: 04 04 0C FF 04 04 0C FF 04 04 0C FF 04 04 0C FF<br>
+0x80: 04 04 0C FF 04 04 0C FF 04 04 0C FF 04 04 0C FF<br>
+0x90: 04 04 0D FF 02 04 2D FF 00 06 00 14 00 01 79 FF</code><br>
<br>
–ü–µ—Ä–≤—ã–µ —à–µ—Å—Ç—å –±–∞–π—Ç –≤—ã–≥–ª—è–¥—è—Ç –∫–∞–∫ –º–∞–ª–µ–Ω—å–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º —Å–ª–µ–¥—É–µ—Ç –∫–∞–∫–æ–π-—Ç–æ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è —à–∞–±–ª–æ–Ω, –≥–¥–µ –∫–∞–∂–¥—ã–π –≤—Ç–æ—Ä–æ–π –±–∞–π—Ç —è–≤–ª—è–µ—Ç—Å—è –ª–∏–±–æ <code>0xFF</code>, –ª–∏–±–æ <code>0x04</code>. –õ–æ–≥–∏—á–Ω–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ <code>0x0008</code> –∏ <code>0x0014</code>&nbsp;‚Äî —à–∏—Ä–∏–Ω–∞ –∏ –≤—ã—Å–æ—Ç–∞ –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ —Å –ø—Ä—è–º—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤ (big endian). –í –∫–æ–Ω—Ü–µ —ç—Ç–æ–≥–æ –¥–∞–º–ø–∞ –º—ã –≤–∏–¥–∏–º –Ω–∞—á–∞–ª–æ –¥—Ä—É–≥–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ <code>00 06 00 14 00 01</code>. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —ç—Ç–æ —Å–ª–µ–¥—É—é—â–∏–π —Ä–µ—Å—É—Ä—Å (—á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ –Ω–µ–≥–æ). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ä–∞–∑–º–µ—Ä —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 146 –±–∞–π—Ç. –ù–æ —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 0x8 * 0x14 = 0xA0 = 160. –Ø—Å–Ω–æ, —á—Ç–æ –≤ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —á–∏—Å—Ç–æ –ø–∏–∫—Å–µ–ª–∏ –∏ –¥–∞–∂–µ –Ω–µ 8-–±–∏—Ç–Ω–∞—è LUT, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –Ω–∞ 14 –±–∞–π—Ç –º–µ–Ω—å—à–µ. –¢–æ–≥–¥–∞ —á—Ç–æ? –í–µ—Ä–æ—è—Ç–Ω–æ, –∫–∞–∫–æ–µ-—Ç–æ —Å–∂–∞—Ç–∏–µ.<br>
<br>
–ì–ª—è–¥—è –Ω–∞ —ç—Ç–æ—Ç —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–π –¥–∞–º–ø, —Ç—Ä—É–¥–Ω–æ –ø–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫–∞—è-—Ç–æ —Å–ª–æ–∂–Ω–∞—è —Å—Ö–µ–º–∞. GUI —É Leica –Ω–µ –æ—á–µ–Ω—å –∫—Ä–∞—Å–æ—á–Ω—ã–π, —Ç–∞–∫ —á—Ç–æ –ø–æ –º–æ–µ–º—É –æ–ø—ã—Ç—É –∑–¥–µ—Å—å –ª—É—á—à–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É LUT. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Ä–µ—Å—É—Ä—Å—ã UI –±—É–¥—É—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∏–Ω–¥–µ–∫—Å—ã LUT –≤—Ä–æ–¥–µ <code>03 03 03</code> –∏–ª–∏ <code>–ê1 –ê1 –ê1</code>. –û–±—ã—á–Ω–æ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –∑–∞–º–µ–Ω—è—è –∏—Ö —Å—Å—ã–ª–∫–æ–π. –≠—Ç–∏ –º–∞—Å—Å–∏–≤—ã –∏–Ω–¥–µ–∫—Å–æ–≤ –∏–¥–µ–∞–ª—å–Ω—ã –¥–ª—è —Å–∂–∞—Ç–∏—è –¥–∞–∂–µ –ø—Ä–æ—Å—Ç—ã–º –º–µ—Ç–æ–¥–æ–º –≤—Ä–æ–¥–µ RLE <code>[data][number]</code>. –ü—Ä–æ—Å—Ç–∞—è –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø–∏—Å–∞—Ç—å <code>data</code> (–∑–Ω–∞—á–µ–Ω–∏–µ) <code>number</code> —Ä–∞–∑.<br>
<br>
–° —É—á—ë—Ç–æ–º –≤—Å–µ–≥–æ —ç—Ç–æ–≥–æ —è –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–ª, —á—Ç–æ –ø–µ—Ä–µ–¥ –Ω–∞–º–∏, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø—Ä–æ—Å—Ç–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –¥–≤—É–º—è —Ü–≤–µ—Ç–∞–º–∏ LUT (<code>0xFF</code> –∏ <code>0x04</code>), –∞ –±–∞–π—Ç –ø–µ—Ä–µ–¥ —Ü–≤–µ—Ç–æ–º ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏–∫—Å–µ–ª–µ–π –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è.<br>
<br>
¬´–ê –ø–æ—Ç–æ–º —Ç—ã –Ω–∞–ø–∏—Å–∞–ª –µ—â—ë –æ–¥–∏–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç¬ª, ‚Äî –ø–æ–¥—É–º–∞–µ—Ç–µ –≤—ã. –ù–æ –Ω–µ—Ç, —è –≤–∑—è–ª —Ä—É—á–∫—É –∏ –±—É–º–∞–≥—É –∏ –Ω–∞—á–∞–ª –∑–∞–ø–æ–ª–Ω—è—Ç—å –∫–ª–µ—Ç–∫–∏. –ó–∞–±–∞–≤–Ω–æ, —á—Ç–æ —É –º–µ–Ω—è –¥–æ —Å–∏—Ö –ø–æ—Ä —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è —Ç–æ—Ç —Ä–∏—Å—É–Ω–æ–∫.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/743/b4a/1f3/743b4a1f3a65f485760e8a4f0584d2e6.png"><br>
<br>
–ì–¥–µ-—Ç–æ –ø–æ –ø—É—Ç–∏ —è –ø–æ–Ω—è–ª, —á—Ç–æ –¥–ª—è —ç—Ç–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ 160 –ø–∏–∫—Å–µ–ª–µ–π, —Ç–∞–∫ —á—Ç–æ 0x8 –∏ 0x14 –Ω—É–∂–Ω–æ —É–º–Ω–æ–∂–∏—Ç—å –Ω–∞ –¥–≤–∞. –¢—Ä–µ—Ç—å–µ —Å–ª–æ–≤–æ 0x0001 —É–∫–∞–∑—ã–≤–∞–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–º ASCII, —Ç–∞–∫ —á—Ç–æ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ImageAsset –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:<br>
<br>
<pre><code class="plaintext hljs">struct ImageAsset
{
    uint16_t    width;        // —à–∏—Ä–∏–Ω–∞/2 (big endian)
    uint16_t    height;       // –≤—ã—Å–æ—Ç–∞/2 (big endian)
    uint16_t    ascii;        // 1, –µ—Å–ª–∏ —Å–∏–º–≤–æ–ª ASCII
    struct      image_data {
        uint8_t number;       // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏–∫—Å–µ–ª–µ–π –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
        uint8_t color;        // –∏–Ω–¥–µ–∫—Å —Ü–≤–µ—Ç–∞ –ø–∏–∫—Å–µ–ª—è –≤ LUT
    } data[];
}</code></pre><br>
–ù–æ –æ–¥–Ω–∞ —á–∞—Å—Ç—å –≤—Å—ë –µ—â—ë –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç: LUT.<br>
<br>
–ï—ë –±—ã–ª–æ –Ω–µ —Ç–∞–∫ —Å–ª–æ–∂–Ω–æ –Ω–∞–π—Ç–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–Ω–æ–≥–∏–µ —Å—Å—ã–ª–∫–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —É–∂–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Ä—É—á–Ω—É—é, —Ç–∞–∫ —á—Ç–æ —è –º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–ª —Ä–∞–∑–¥–µ–ª—ã –¥–∞–Ω–Ω—ã—Ö, –∏—â–∞ –º–∞—Å—Å–∏–≤ –Ω–∞ 256 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–∑ 16-–±–∏—Ç–Ω—ã—Ö –∏–ª–∏ 32-–±–∏—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –ø–æ–∫–∞ –Ω–µ –Ω–∞—Ç–æ–ª–∫–Ω—É–ª—Å—è –Ω–∞ —ç—Ç–æ:<br>
<br>
<code> .long 0x7008080, 0x72D8080, 0x73C8080, 0x75A8080, 0x79B8080, 0x71DFF6B, 0x7BE8080, 0x7FF8080<br>
 .long 0x77BBD27, 0x75B60E7, 0x7835F4A, 0x7D3089F, 0x7018080, 0x7028080, 0x7038080, 0x7048080<br>
 .long 0x7058080, 0x7068080, 0x7078080, 0x7088080, 0x7098080, 0x70A8080, 0x70B8080, 0x70C8080<br>
 .long 0x70D8080, 0x70E8080, 0x70F8080, 0x7108080, 0x7118080, 0x7128080, 0x7952B15, 0x7138080<br>
 .long 0x7148080, 0x7158080, 0x7168080, 0x7178080, 0x7188080, 0x7198080, 0x71A8080, 0x71C8080<br>
 .long 0x71D8080, 0x71E8080, 0x71F8080, 0x7338080, 0x7208080, 0x7218080, 0x7228080, 0x7238080<br>
 .long 0x7248080, 0x7248080, 0x7268080, 0x7278080, 0x7288080, 0x7298080, 0x72A8080, 0x72B8080<br>
 .long 0x72C8080, 0x75E8080, 0x7608080, 0x7628080, 0x7648080, 0x7678080, 0x7688080, 0x7698080<br>
 .long 0x76B8080, 0x76E8080, 0x7708080, 0x7728080, 0x7758080, 0x7778080, 0x7798080, 0x77C8080<br>
 .long 0x77E8080, 0x7818080, 0x7838080, 0x7868080, 0x7888080, 0x78B8080, 0x78D8080, 0x7908080<br>
 .long 0x7928080, 0x7958080, 0x7978080, 0x7998080, 0x79C8080, 0x79D8080, 0x7668080, 0x79E8080<br>
 .long 0x7A18080, 0x7A28080, 0x7A38080, 0x7A68080, 0x7A78080, 0x7A88080, 0x7AB8080, 0x7AC8080<br>
 .long 0x7AD8080, 0x7B08080, 0x7B28080, 0x7B58080, 0x7B88080, 0x7B98080, 0x7BC8080, 0x7CC8080<br>
 .long 0x7AB3BBB, 0x7E10094, 0x7E4556E, 0x4008080, 0x2922D17, 0x7B2AB00, 0x7C2A262, 0x71DFF6B<br>
 .long 0x768D4A2, 0x769D4EA, 0x7BD88AE, 0x705997B, 0x70BB377, 0x711CC73, 0x717E66F, 0x7238866<br>
 .long 0x729A262, 0x72FBB5E, 0x735D55A, 0x7417751, 0x747914D, 0x74DAA48, 0x753C444, 0x75F663B<br>
 .long 0x76B9933, 0x7998080, 0x771B32F, 0x77D5526, 0x7836F22, 0x789881E, 0x78FA21A, 0x7159095<br>
 .long 0x71AAA91, 0x720C38D, 0x726DD88, 0x7506F6A, 0x7568866, 0x75CA262, 0x762BB5E, 0x76E5E55<br>
 .long 0x7747751, 0x77A914D, 0x780AA48, 0x78C4D3F, 0x792663B, 0x7988037, 0x79E9933, 0x7AA3C2A<br>
 .long 0x7B05526, 0x7B66F22, 0x7BC881E, 0x72488AE, 0x72AA1AA, 0x72FBBA6, 0x735D4A2, 0x7427799<br>
 .long 0x7489095, 0x74DAA91, 0x753C38D, 0x77E556E, 0x7836F6A, 0x7898866, 0x78FA262, 0x79C4459<br>
 .long 0x7A15E55, 0x7A77751, 0x7AD914D, 0x7BF4D3F, 0x7CC8080, 0x7C5663B, 0x7CB8037, 0x7337FC8<br>
 .long 0x73999C4, 0x73FB2C0, 0x745CCBB, 0x7757799, 0x74C54FF, 0x77B9095, 0x780AA91, 0x7AB3C72<br>
 .long 0x7B1556E, 0x7B66F6A, 0x7BC8866, 0x74277E1, 0x74890DD, 0x74EAAD9, 0x754C3D5, 0x76066CC<br>
 .long 0x7667FC8, 0x76C99C4, 0x772B2C0, 0x77E55B7, 0x7846EB3, 0x78A88AE, 0x790A1AA, 0x7526EFB<br>
 .long 0x75787F7, 0x75DA1F3, 0x763BAEE, 0x76F5DE6, 0x77577E1, 0x77B90DD, 0x781AAD9, 0x78D4CD0<br>
 .long 0x79366CC, 0x79F99C4, 0x7E10094, 0x7CF44A1, 0x7DB7799, 0x7E71A90, 0x7ED338C, 0x7FF8080<br>
 .long 0x7328080, 0x7DC8080, 0x7C88080, 0x7508080, 0x775CD2C, 0x76944EA, 0x7808080, 0x71A61FF<br>
 .long 0x7244D40, 0x7242C15, 0xFFF8080, 0xF338080, 0xF668080, 0xF998080, 0xFCC8080, 0xF008080<br>
 .long 0xF4C54FF, 0xFAB3BBB, 0xFE10094, 0xFE4556E, 0xF952B15, 0xFDA7751, 0xFB2AB00, 0xFC2A262<br>
 .long 0xF1DFF6B, 0xF68D4A2, 0xF69D4EA, 0xFBD88AE, 0xA922D17, 0xC6E4130, 0xE286963, 0x74C55FF<br>
 .long 0x768D536, 0x7FF8080, 0x7FF8080, 0x7FF8080, 0x2922D17, 0x46E4130, 0x6286963, 0x8080</code><br>
<br>
–û–ø—è—Ç—å –∂–µ, –±–ª–∞–≥–æ–¥–∞—Ä—è –º–æ–µ–π —Ä–∞–±–æ—Ç–µ —Å Blackmagic Design —è —Å—Ä–∞–∑—É —Ä–∞—Å–ø–æ–∑–Ω–∞–ª –ø–∏–∫—Å–µ–ª–∏ YUV (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å —Ü–∏—Ñ—Ä–∞–º–∏ 8080).<br>
<br>
–Ø –Ω–µ –¥—É—Ä–∞–∫, —á—Ç–æ–±—ã –æ–ø—è—Ç—å —Ä–∏—Å–æ–≤–∞—Ç—å –≤–µ—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—Ä—É—á–Ω—É—é –Ω–∞ –±—É–º–∞–≥–µ, —Ç–∞–∫ —á—Ç–æ –¥–∞, —è –Ω–∞–ø–∏—Å–∞–ª –µ—â—ë –æ–¥–∏–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Äî <a href="https://github.com/alexhude/LeicaHacks/tree/master/Tools/M240UITool">M240UITool</a>.<br>
<br>
<code>Leica M (typ 240) UI Tool v1.0<br>
Usage: ./M240UITool [-a address] [-i imagebase] [-s script] [-d dump] [-f folder] [-l LUT] [-rbv] FIRMWARE.BIN<br>
<br>
This tool will help you to find UI resources in firmware.<br>
Use following arguments:<br>
 -a Specify address of the gui_CopyImageDesc function (ex. 0x2F95E0)<br>
 -i Specify firmware imagebase<br>
 -s Specify IDC file name<br>
 -c Specify container file name<br>
 -d Specify dump image format<br>
 png - PNG format<br>
 bmp - BMP (ARGB) format<br>
 -f Specify folder for dumped images<br>
 -l Specify LUT for images (filename of address)<br>
 -b Specify number of bytes to display in verbose mode<br>
 -r Try to recover string characters<br>
 -v Be verbose</code><br>
<br>
–ö—Ä–æ–º–µ —Å–±—Ä–æ—Å–∞ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ —Ñ–∞–π–ª–∞ –º–∏–∫—Ä–æ–ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ BMP/PNG, —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —É–º–µ–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å IDC-—Å–∫—Ä–∏–ø—Ç—ã –≤ IDA –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ UI.<br>
<br>
–ú—ã —É–∂–µ –∑–Ω–∞–µ–º, —á—Ç–æ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é —Å–æ–∑–¥–∞—ë—Ç –æ–¥–Ω—É —Å—Ç—Ä–∞–Ω–∏—Ü—É UI, –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è <code>gui_CopyImageDesc</code>. –Ø –ø–æ–¥—É–º–∞–ª, —á—Ç–æ –±—É–¥–µ—Ç –∑–¥–æ—Ä–æ–≤–æ —Å–¥–µ–ª–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤ UI –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü. –î–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –æ–ø—Ü–∏—è <code>-c</code>&nbsp;‚Äî –æ–Ω–∞ —Å–æ–æ–∑–¥–∞—ë—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ—Å—É—Ä—Å–æ–≤.<br>
<br>
–ò –∫—Ç–æ —Å–∫–∞–∑–∞–ª, —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–µ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –Ω–µ–æ–±—ã—á–Ω–æ?<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/8b6/5f7/6c3/8b65f76c30a4d4a037719e805141573a.png"><br>
<br>
–ë—É–¥—É—á–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º (–ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ), —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–µ–Ω—é EVF/LCD, –Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —ç—Ç–∞–ø—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.<br>
<br>
–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ —ç—Ç–æ–≥–æ —à–µ–¥–µ–≤—Ä–∞ –≥–¥–µ-—Ç–æ –ø–æ—Ç–µ—Ä—è–ª–∏—Å—å, –Ω–æ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –≤—Å—ë –µ—â—ë –≤ –∫–æ–¥–µ M240UITool, –ø–æ—ç—Ç–æ–º—É —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –º–æ–∂–Ω–æ –≤–æ—Å—Å–æ–∑–¥–∞—Ç—å –µ–≥–æ —Å –Ω—É–ª—è.<br>
<br>
<h4>–ú–µ–Ω—é –æ—Ç–ª–∞–¥–∫–∏</h4><br>
–ö–∞–∫—É—é —Å—Ç—Ä–æ–∫—É –º—ã –∏—â–µ–º –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –ø—Ä–∏ —Ä–µ–≤–µ—Ä—Å-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥–µ? –ü–æ-–º–æ–µ–º—É, —ç—Ç–æ —Å–ª–æ–≤–æ <code>debug</code> –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –æ—Ç –Ω–µ–≥–æ.<br>
<br>
–í –ø—Ä–æ—à–∏–≤–∫–µ –±—ã–ª–æ –º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Å—Ç—Ä–æ–∫, –Ω–æ —ç—Ç–∏ –æ—Å–æ–±–µ–Ω–Ω—ã–µ:<br>
<br>
<code>$ strings ./IMG_LOKI-212_1.1.0.2.bin | grep "Debug Mode"<br>
GUI: State: %d! Scanning for Debug Mode successful<br>
GUI: Scanning for Debug Mode: State: %d, Ignore long DEL<br>
GUI: Scanning for Debug Mode: State: %d<br>
GUI: Scanning for Debug Mode: State: %d, Ignore long DEL<br>
GUI: Scanning for Debug Mode: State: %d<br>
GUI: Scanning for Debug Mode: State: %d, Ignore long DEL<br>
GUI: Scanning for Debug Mode: State: %d<br>
GUI: Scanning for Debug Mode: State: %d, Ignore long DEL<br>
GUI: Scanning for Debug Mode: State: %d<br>
GUI: Scanning for Debug Mode: State: %d, Ignore long DEL<br>
GUI: Scanning for Debug Mode: State: %d<br>
...<br>
GUI: ScanningForDebugWithKeyAndJoyStick(): g_GUI_CheckForDebugWithKeyAndJoyStick = %d</code><br>
<br>
–ü–æ—Ö–æ–∂–µ, —á—Ç–æ –≤ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –≤–æ–π—Ç–∏ —Å –ø–æ–º–æ—â—å—é –∫–∞–∫–æ–π-—Ç–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∫–ª–∞–≤–∏—à. –í—Å–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏–∑ –æ–¥–Ω–æ–π –≥–∏–≥–∞–Ω—Ç—Å–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ <code>ScanningForDebugWithKeyAndJoyStick</code>, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–∞—à–∏–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫. –í–æ—Ç –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ IDA:<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e9e/525/cd2/e9e525cd2bc493e7bb8cc4b3710b1334.png"><br>
<br>
–ù–µ –±—É–¥—É –≤—Ä–∞—Ç—å, –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –≤ –ø—Ä–æ—à–∏–≤–∫–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏, –∞ –∑–∞—Ç–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ—á–∏—Å–ª—è–µ–º—ã–µ —Ç–∏–ø—ã –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∏ –¥–∂–æ–π—Å—Ç–∏–∫–∞. –ù–æ –∫–æ–≥–¥–∞ —è –ø–æ–ª—É—á–∏–ª –∫–æ–º–±–∏–Ω–∞—Ü–∏—é, —Ç–æ —Å –æ–≥–æ—Ä—á–µ–Ω–∏–µ–º –≤—ã—è—Å–Ω–∏–ª, —á—Ç–æ –æ–Ω–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç. –í–µ—Ä–æ—è—Ç–Ω–æ, –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –∫–∞–∫–æ–π-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã GUI. –ï—â–µ –ø–∞—Ä–∞ –≤–µ—á–µ—Ä–æ–≤ —Ä—É—á–Ω–æ–π —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π GUI&nbsp;‚Äî –∏ –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞, –∞ —Ç–∞–∫–∂–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –º–µ–Ω—é Reset.<br>
<br>
–ù–∞–∫–æ–Ω–µ—Ü, –¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/526/74d/068/52674d068ae127cc7b90b5b1172de325.png"><br>
<br>
–Ø –º–Ω–æ–≥–æ –¥—É–º–∞–ª, –æ–≥–ª–∞—Å–∏—Ç—å –ª–∏ —ç—Ç—É –∫–æ–º–±–∏–Ω–∞—Ü–∏—é, –Ω–æ —Ä–µ—à–∏–ª –≤–æ–∑–¥–µ—Ä–∂–∞—Ç—å—Å—è. –Ø —É–≤–∞–∂–∞—é —Ç—è–∂—ë–ª—É—é —Ä–∞–±–æ—Ç—É, –∫–æ—Ç–æ—Ä—É—é –¥–µ–ª–∞–µ—Ç Leica, –≤—ã–ø—É—Å–∫–∞—è —Å–≤–æ–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã, –∏ –Ω–µ —Ö–æ—á—É –æ—Ç–≤–µ—á–∞—Ç—å –∑–∞ —Ç–æ, —á—Ç–æ –∏—Ö —Å–µ—Ä–≤–∏—Å–Ω—ã–µ —Ü–µ–Ω—Ç—Ä—ã –∑–∞–ø–æ–ª–Ω—è—Ç —Å–ª–æ–º–∞–Ω–Ω—ã–µ —Ç—É—à–∫–∏ –∫–∞–º–µ—Ä –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –±–µ–∑–¥—É–º–Ω–æ–≥–æ –ª—é–±–æ–ø—ã—Ç—Å—Ç–≤–∞.<br>
<br>
–ù–æ –≤—Å—ë-—Ç–∞–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ—á–∏—Å–ª—è–µ–º—ã–µ —Ç–∏–ø—ã, —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –≥–æ—Ç–æ–≤ –∏–¥—Ç–∏ –ø–æ —ç—Ç–æ–º—É –ø—É—Ç–∏.<br>
<br>
<pre><code class="plaintext hljs">enum ControlActionType {
    kControlAction_Idle,        // 0
    kControlAction_Push,        // 1
    kControlAction_Release,     // 2
    kControlAction_LongPush     // 3
};

enum ControlBtnType {
    kControlBtn_LV,             // 0
    kControlBtn_PLAY,           // 1
    kControlBtn_DEL,            // 2
    kControlBtn_ISO,            // 3
    kControlBtn_MENU,           // 4
    kControlBtn_SET             // 5
};

enum ControlJoystickType {
    kControlJoy_INFO,           // 0
    kControlJoy_Up,             // 1
    kControlJoy_Down,           // 2
    kControlJoy_Left,           // 3
    kControlJoy_Right           // 4
};</code></pre><br>
<h4>PTP</h4><br>
–î—É–º–∞—è –Ω–∞–¥ –∑–∞–¥–∞—á–µ–π USB, —è –æ–ø—Ä–µ–¥–µ–ª–∏–ª —Ç—Ä–∏ —Ä–µ–∂–∏–º–∞ (—á—Ç–æ —Ç–∞–∫–∂–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è –≤ –º–µ–Ω—é –æ—Ç–ª–∞–¥–∫–∏):<br>
<br>
<ul>
<li>PTP<br>
</li>
<li>MSC (Mass Storage Class)<br>
</li>
<li>Leica Custom</li>
</ul><br>
PTP –Ω–∞–∏–±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω —Ö–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–∞–º–µ—Ä–æ–π.<br>
<br>
–í –ø—Ä–æ—à–∏–≤–∫–µ –¥–æ–≤–æ–ª—å–Ω–æ –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ PTP, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏–∑ —ç—Ç–æ–≥–æ –∫–æ–¥–∞ –º–Ω–æ–≥–æ –≤—ã–∑–æ–≤–æ–≤. –í—Å–µ –≤—ã–∑–æ–≤—ã PTP –¥–µ–ª—è—Ç—Å—è –Ω–∞ —Ç—Ä–∏ –≥—Ä—É–ø–ø—ã: <b>Legacy</b>, <b>Leica Extended (LE)</b> –∏ <b>Production</b>.<br>
<br>
–û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–º–æ–≥–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ—á—Ç–∏ –¥–ª—è –≤—Å–µ–≥–æ –∫–æ–¥–∞.<br>
<br>
<pre>Legacy:                            Leica Extented:                          Production:                           
0x1001 - GetDeviceInfo             0x9001 - Set Camera Settings             0x9100 - Open Production Session      
0x1002 - OpenSession               0x9002 - Get Camera Settings             0x9101 - Close Production Session     
0x1003 - CloseSession              0x9003 - Get Lens Parameter              0x9102 - UpdateFirmware               
0x1004 - Get Storage ID            0x9004 - Release Stage                   0x9103 - Open OSD Session             
0x1005 - Get Storage Info          0x9005 - Open LE Session                 0x9104 - Close OSD Session            
0x1006 - GetNumObjects             0x9006 - Close LE Session                0x9105 - Get OSD Data                 
0x1007 - GetObjectHandles          0x9007 - RequestObjectTransferReady      0x9106 - GetFirmwareStruct            
0x1008 - GetObjectInfo             0x9008 - GetGeoTackingData               0x910B - GetDebugMenu                 
0x1009 - GetObject                 0x900A - Open Debug Session              0x910C - SetDebugMenu                 
0x100A - Get Thumb                 0x900B - Close Debug Session             0x910D - ODIN Message                 
0x100B - Delete Object             0x900C - Get Debug Buffer                0x910E - GetDebugObjectHandles        
0x100E - Initiate Capture          0x900D - Debug Command String            0x910F - GetDebugObject               
0x1014 - GetDevicePropDesc         0x900E - Get Debug Route                 0x9110 - DeleteDebugObject            
0x1015 - GetDevicePropV            0x900F - SetIPTCData                     0x9111 - GetDebugObjectInfo           
0x101C - Initiate Open Capture     0x9010 - GetIPTCData                     0x9112 - WriteDebugObject             
                                   0x9020 - Get3DAxisData                   0x9113 - CreateDebugObject            
                                   0x9030 - OpenLiveViewSession             0x9114 - Calibrate 3Daxis             
                                   0x9031 - CloseLiveViewSession            0x9115 - Magnetic calibration         
                                   0x9033 - Unknown                         0x9116 - Get Viewfinder Data          </pre><br>
–°–∞–º–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ PTP –∫–∞–∂–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π, –æ–¥–Ω–∞–∫–æ —É –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–º–∞–Ω–¥ –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —è –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –æ–ø—É—Å–∫–∞—é –∑–¥–µ—Å—å.<br>
<br>
–í –ª—é–±–æ–º —Å–ª—É—á–∞–µ, –≤—Å—ë –≤—ã—à–µ—Å–∫–∞–∑–∞–Ω–Ω–æ–µ –¥–æ–≤–æ–ª—å–Ω–æ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ. –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥—É–º–∞—Ç—å: ¬´–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∫–ª—é—á–∏–º –∫–∞–º–µ—Ä—É –ø–æ USB –∏ –Ω–∞—á–Ω—ë–º –∑–æ–Ω–¥–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é libptp¬ª. –í—Å—ë –≤–µ—Ä–Ω–æ.<br>
<br>
–¢–æ–ª—å–∫–æ –±–ª–∏–Ω‚Ä¶<br>
<br>
–£ Leica M240 –Ω–µ—Ç USB-–ø–æ—Ä—Ç–∞.<br>
<br>
<h2>–ü–æ—Ä—Ç –¥–ª—è —Ä—É–∫–æ—è—Ç–∫–∏</h2><br>
Leica –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤ –¥–ª—è —ç—Ç–æ–π –∫–∞–º–µ—Ä—ã, –Ω–æ –µ—Å—Ç—å –æ–¥–∏–Ω –æ—Å–æ–±–µ–Ω–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π. –†–µ—á—å –∏–¥–µ—Ç –æ <b>–º–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä—É–∫–æ—è—Ç–∫–µ Leica M (14495)</b>. –û–Ω –∑–∞–º–µ–Ω—è–µ—Ç –Ω–∏–∂–Ω–µ–µ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫—É—é —á–∞—Å—Ç—å –∫–æ—Ä–ø—É—Å–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π GPS –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑—ä—ë–º–æ–≤ –≤—Ä–æ–¥–µ USB, —Ç–µ—Ä–º–∏–Ω–∞–ª –≤—Å–ø—ã—à–∫–∏ SCA, DIN/ISO-X –∏ –≥–Ω–µ–∑–¥–æ –¥–ª—è –ø–∏—Ç–∞–Ω–∏—è.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/fab/250/1b6/fab2501b6e69cb6caf3f62528e413bdb.jpg"><br>
<br>
–ò –≤—ã –æ–ø—è—Ç—å —Å–∫–∞–∂–µ—Ç–µ: ¬´–ó–¥–æ—Ä–æ–≤–æ, —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –∫—É–ø–∏–º –µ—ë, –ø—Ä–∏–∫—Ä–µ–ø–∏–º –∫ –∫–∞–º–µ—Ä–µ, –ø–æ–¥–∫–ª—é—á–∏–º –∫–∞–º–µ—Ä—É –ø–æ USB –∏ –Ω–∞—á–Ω—ë–º –∑–æ–Ω–¥–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é libptp¬ª. –í—Å—ë –≤–µ—Ä–Ω–æ.<br>
<br>
–¢–æ–ª—å–∫–æ –±–ª–∏–Ω‚Ä¶<br>
<br>
–û–Ω–∞ —Å—Ç–æ–∏—Ç –ø–æ—á—Ç–∏ 900 –¥–æ–ª–ª–∞—Ä–æ–≤.<br>
<br>
–≠—Ç–æ –ø–æ—á—Ç–∏ –¥–µ–≤—è—Ç—å—Å–æ—Ç –ø—Ä–∏—á–∏–Ω, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π —è –Ω–∞—Å—Ç—Ä–æ–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è eBay –¥–ª—è —ç—Ç–æ–≥–æ –∞–∫—Å–µ—Å—Å—É–∞—Ä–∞.<br>
<br>
<h4>–†–∞–∑—ä—ë–º</h4><br>
–†–∞–∑—ä—ë–º –Ω–∞ –∫–∞–º–µ—Ä–µ –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a29/4f0/388/a294f0388ad2c5ac3d355d0838e01586.png"><br>
<br>
–Ø –ø–æ–ø—ã—Ç–∞–ª—Å—è –Ω–∞–π—Ç–∏ –µ–≥–æ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, –Ω–æ —Å–µ—Ä—å—ë–∑–Ω–æ, –∫–∞–∫ –±—ã –≤—ã –æ–ø–∏—Å–∞–ª–∏ –µ–≥–æ –≤ Google?<br>
<br>
–ù–µ–º–Ω–æ–≥–æ –æ—Ç—á–∞—è–≤—à–∏—Å—å, —è –Ω–∞—á–∞–ª –¥—É–º–∞—Ç—å –æ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—É–º–∞—Å—à–µ–¥—à–∏—Ö –≤–µ—â–∞—Ö, –≤—Ä–æ–¥–µ –ø—Ä–∏–∫–ª–µ–∏—Ç—å —Ñ–æ–ª—å–≥—É –∏–ª–∏ –∏–≥–æ–ª–∫–∏ –∫ —Ä–µ–∑–∏–Ω–æ–≤–æ–º—É –ª–∞—Å—Ç–∏–∫—É. –ù–æ –æ–¥–Ω–∞–∂–¥—ã –Ω–∞ —Ä–∞–±–æ—Ç–µ –≤ Blackmagic Design, –≥–ª—è–¥—è –Ω–∞ –ø–µ—á–∞—Ç–Ω—É—é –ø–ª–∞—Ç—É –∫–∞–º–µ—Ä—ã, —è –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ —É –æ–¥–Ω–æ–≥–æ —Ä–∞–∑—ä—ë–º–∞ –æ—á–µ–Ω—å –∑–Ω–∞–∫–æ–º–∞—è —Ñ–æ—Ä–º–∞. –ù–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å —è –ø—Ä–∏–≤—ë–∑ —Å–≤–æ—é Leica M240 –Ω–∞ —Ä–∞–±–æ—Ç—É&nbsp;‚Äî –∏ –¥–∞, –æ–Ω–∞ –≤—ã–≥–ª—è–¥–µ–ª–∞ –ø–æ—Ö–æ–∂–µ–π, –ø—Ä–æ—Å—Ç–æ –Ω–∞–º–Ω–æ–≥–æ –¥–ª–∏–Ω–Ω–µ–µ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –ø–ª–æ—â–∞–¥–æ–∫.<br>
<br>
–û—Å—Ç–∞–ª–æ—Å—å —Å–ø—Ä–æ—Å–∏—Ç—å –Ω–æ–º–µ—Ä –¥–µ—Ç–∞–ª–∏ —É –Ω–∞—à–µ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º, –∞ –∑–∞—Ç–µ–º –Ω–∞–π—Ç–∏ –µ—ë –≤ –∫–∞—Ç–∞–ª–æ–≥–µ Samtec: <b><a href="https://www.samtec.com/products/erm8-013-05.0-l-dv-tr">ERM8-013-05.0-L-DV-TR</a></b>.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a60/dc3/d36/a60dc3d36d12216f74690577507fc6db.png"><br>
<br>
–ú—ã —Ç–∞–∫–∂–µ —Å–ø—Ä–æ—Å–∏–ª–∏ —É –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π Samtec, –º–æ–∂–Ω–æ –ª–∏ –ø–æ–ª—É—á–∏—Ç—å –æ–±—Ä–∞–∑–µ—Ü, –∏ –æ–Ω–∏ –¥–æ–±—Ä–æ—Å–µ—Ä–¥–µ—á–Ω–æ —Å–æ–≥–ª–∞—Å–∏–ª–∏—Å—å.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/dda/752/0d6/dda7520d6691fc48f3f1aaa026e49635.png"><br>
<br>
–ù–µ–º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç—ã –ø–∞—è–ª—å–Ω–∏–∫–æ–º, –∫–∞—Ä—Ç–æ–Ω–∞ –∏ –∏–∑–æ–ª–µ–Ω—Ç—ã&nbsp;‚Äî –∏ –≥–æ—Ç–æ–≤ –º–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —à—Ç–µ–∫–µ—Ä (–æ–±—Ä–∞–∑–µ—Ü 2013 –≥–æ–¥–∞).<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ddd/243/fe5/ddd243fe596648709c3f9dccb76f15ea.png"><br>
<br>
–°–ø—É—Å—Ç—è –ø—è—Ç—å –ª–µ—Ç, –≤ 2018 –≥–æ–¥—É, —è —Ä–µ—à–∏–ª –ª–∏—á–Ω–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å Samtec –ø—Ä–∏—Å–ª–∞—Ç—å –¥—Ä—É–≥–æ–π –æ–±—Ä–∞–∑–µ—Ü. –ú–Ω–µ —Ö–æ—Ç–µ–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ –ø–æ–ª—É—á—à–µ.<br>
<br>
<b><a href="http://ercd-013-05.00-ttr-ttr-1-d/">ERCD-013-05.00-TTR-TTR-1-D</a></b> <br>
<img src="https://habrastorage.org/getpro/habr/post_images/e1a/56a/995/e1a56a9958b1dda50aca34f0ecac8863.png"><br>
<br>
–û–ø—è—Ç—å –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç—ã –ø–∞—è–ª—å–Ω–∏–∫–æ–º, —Ä—É–≥–∞–Ω–∏, —Ä–µ–∑–∫–∏ –ø—Ä–æ–≤–æ–ª–æ–∫–∏, —Ä—É–≥–∞–Ω–∏, —Å–Ω–æ–≤–∞ —Ä–∞–±–æ—Ç—ã –ø–∞—è–ª—å–Ω–∏–∫–æ–º, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π, –±–æ–ª–µ–µ —Å–∏–º–ø–∞—Ç–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1a5/b78/10d/1a5b7810d3a2ccea73bf4e2d75cad8cd.png"><br>
<br>
<h4>–†–∞—Å–ø–∏–Ω–æ–≤–∫–∞</h4><br>
–í —Ä–∞–∑—ä—ë–º–µ 26 –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤: –ø–æ 13 —Å –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã. –ï—â—ë –¥–æ –ø–∞–π–∫–∏ —Å–≤–æ–µ–π –¥–µ—Ç–∞–ª–∏ —è –ø—Ä–æ–∑–æ–Ω–¥–∏—Ä–æ–≤–∞–ª —Ä–∞–∑—ä—ë–º –∫–∞–º–µ—Ä—ã –º—É–ª—å—Ç–∏–º–µ—Ç—Ä–æ–º –∏ –ª–æ–≥–∏—á–µ—Å–∫–∏–º –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º. –ö—Å—Ç–∞—Ç–∏, –Ω–∞ –¥–∞—Ç—á–∏–∫ –Ω–∏–∂–Ω–µ–π –∫—Ä—ã—à–∫–∏ –Ω—É–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –º–∞–≥–Ω–∏—Ç, —á—Ç–æ–±—ã –∫–∞–º–µ—Ä–∞ —Å—á–∏—Ç–∞–ª–∞, —á—Ç–æ –∫—Ä—ã—à–∫–∞ –Ω–∞ –º–µ—Å—Ç–µ.<br>
<br>
<b>–ó–µ–º–ª—è (–∫–∞–º–µ—Ä–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞, –Ω–µ—Ç –±–∞—Ç–∞—Ä–µ–∏)</b><br>
<br>
–Ø –≤—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞—é —Å –∑–µ–º–ª–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –µ—ë –æ—á–µ–Ω—å –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ead/140/15c/ead14015c97177d6717e198616c9114b.png"><br>
<br>
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —É –Ω–∞—Å –≤–æ—Å–µ–º—å –ª–∏–Ω–∏–π –∑–∞–∑–µ–º–ª–µ–Ω–∏—è (—Ç—ë–º–Ω–æ-—Å–µ—Ä—ã–π).<br>
<br>
<b>–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª (–∫–∞–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞)</b><br>
<br>
–ö–æ–≥–¥–∞ –∫–∞–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞, –º–æ–∂–Ω–æ –∏–∑–º–µ—Ä–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –Ω–∞ –∫–∞–∂–¥–æ–º –∫–æ–Ω—Ç–∞–∫—Ç–µ –∏ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ –ª–æ–≥–∏–∫–µ –∏ —É—Ä–æ–≤–Ω—è—Ö –º–æ—â–Ω–æ—Å—Ç–∏.<br>
<br>
<a href="">alexhude.github.io/assets/2019/2019-01-24-hacking-leica-m240/probe2_potential.png</a><br>
<br>
–ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö 8-9 –∏ 11-13 —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏ –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É —è –æ–ø—Ä–µ–¥–µ–ª–∏–ª –∏—Ö –∫–∞–∫ –ø–∏—Ç–∞–Ω–∏–µ (–∫—Ä–∞—Å–Ω—ã–π).<br>
<br>
<b>–°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ (–∫–∞–º–µ—Ä–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞, –Ω–µ—Ç –±–∞—Ç–∞—Ä–µ–∏)</b><br>
<br>
–ü–æ–ª–µ–∑–Ω–æ –µ—â—ë –∏–∑–º–µ—Ä–∏—Ç—å —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥—ã –∏ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ª–∏–Ω–∏–∏.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/fa7/fde/1a6/fa7fde1a623a5f13d264a5127a3083d2.png"><br>
<br>
<b>–°–≤—è–∑–∞–Ω–Ω—ã–µ –≤—ã—Ö–æ–¥—ã (–∫–∞–º–µ—Ä–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞, –Ω–µ—Ç –±–∞—Ç–∞—Ä–µ–∏)</b><br>
<br>
–ó–∞—Ç–µ–º —è —Ä–µ—à–∏–ª –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –≤–Ω–µ—à–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –ø–ª–æ—â–∞–¥–∫–∏ –Ω–∞ –∫–æ—Ä–ø—É—Å–µ –∫–∞–º–µ—Ä—ã, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–≤—è–∑–∞–Ω—ã –ª–∏ –æ–Ω–∏ —Å —Å–µ—Ä–≤–∏—Å–Ω—ã–º –ø–æ—Ä—Ç–æ–º.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f75/61e/c06/f7561ec060796fa8e39a15d533e3de03.png"><br>
<br>
–°–∏–Ω—Ö—Ä–æ–∫–æ–Ω—Ç–∞–∫—Ç –≤—Å–ø—ã—à–∫–∏ –æ–∫–∞–∑–∞–ª—Å—è –Ω–∞–ø—Ä—è–º—É—é –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –ª–∏–Ω–∏–∏ 10.<br>
<br>
<b>–õ–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä (–∫–∞–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞)</b><br>
<br>
–î–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –≤ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: –≤–∫–ª—é—á–∞–µ–º, –∫–∞–º–µ—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Ä–µ–∂–∏–º–µ LV, –¥–µ–ª–∞–µ–º —Å–Ω–∏–º–æ–∫, –Ω–∞—á–∏–Ω–∞–µ–º –≤–∏–¥–µ–æ–∑–∞–ø–∏—Å—å.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/494/33c/27c/49433c27cf94be5cb9430e4ba518560c.png"><br>
<br>
–î–≤–µ –ª–∏–Ω–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–µ—Ä–µ–¥–∞—á—É –∫–∞–∫–∏—Ö-—Ç–æ –¥–∞–Ω–Ω—ã—Ö: 01 –∏ 21.<br>
<br>
<b>01</b> ‚Äî 115200, –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ 8 –±–∏—Ç, 1 —Å—Ç–æ–ø-–±–∏—Ç, –±–∏—Ç —á—ë—Ç–Ω–æ—Å—Ç–∏, LSB –ø–µ—Ä–≤—ã–π.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/bf7/3a2/fdf/bf73a2fdfbbfeab571c354f2a6d50c9b.png"><br>
<br>
–ö–∞–∂–¥—ã–µ 500 –º—Å, –æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–∫–æ–π-—Ç–æ —Å—á—ë—Ç—á–∏–∫ <code>C3 3C 02 81 00 01 00 82, C3 3C 02 81 01 01 00 83, C3 3C 02 81 02 01 00 80</code>‚Ä¶<br>
<br>
<b>21</b> ‚Äî 115200, –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ 8 –±–∏—Ç, 1 —Å—Ç–æ–ø-–±–∏—Ç, –Ω–µ—Ç –±–∏—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á—ë—Ç–Ω–æ—Å—Ç–∏, LSB –ø–µ—Ä–≤—ã–π.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f00/423/2dd/f004232dd3f1b8c8f0e665fd63f3fa9b.png"><br>
<br>
–û–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ SH7216 (‚ÄúLeica Camera AG‚Äù –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –≤—ã—à–µ).<br>
<br>
–î–∞–≤–∞–π—Ç–µ –ø–æ–º–µ—Ç–∏–º –∏—Ö —Ç—ë–º–Ω–æ-—Å–∏–Ω–∏–º. –î–æ–≤–æ–ª—å–Ω–æ –≥—Ä—É—Å—Ç–Ω–æ, —á—Ç–æ –ª–æ–≥ Maestro –Ω–µ –æ—Ç–¥–∞—ë—Ç—Å—è –Ω–∞—Ä—É–∂—É –¥–∞–∂–µ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –æ—Ç–ª–∞–¥–∫–∏ –≤ –º–µ–Ω—é Debug.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c44/541/bb9/c44541bb98c4388f151bdc3faffa1dfe.png"><br>
<br>
–ù–∞ —ç—Ç–∏—Ö –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –æ–∫–æ–ª–æ 310kOhm.<br>
<br>
–ù–µ –∑–Ω–∞—é –ø–æ—á–µ–º—É, –Ω–æ —è –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–ª, —á—Ç–æ –¥—Ä—É–≥–∏–µ –ª–∏–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–æ–≥—É—Ç –∏–º–µ—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –∏–ª–∏ –±—É–¥—É—Ç –∑–∞–∫—Ä—ã—Ç—ã. –ü–æ—ç—Ç–æ–º—É —è –æ–ø—Ä–µ–¥–µ–ª–∏–ª –ª–∏–Ω–∏–∏ ~300kOhm, ~200kOhm –∏ ~100–∫–û–º —Ç–æ–∂–µ –∫–∞–∫ –ª–∏–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö (–æ—Ç—Ç–µ–Ω–∫–∏ —Å–∏–Ω–µ–≥–æ —Ü–≤–µ—Ç–∞ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ).<br>
<br>
–í —Ü–µ–ª–æ–º –Ω–∞—Ä–∏—Å–æ–≤–∞–ª–∞—Å—å —Å–ª–µ–¥—É—é—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∞.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e7e/31f/f2c/e7e31ff2cc7da6ae304652488ca9db4c.png"><br>
<br>
12 –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞ –ª–∏–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö. –ù–æ –∫–∞–∫ –∏—Ö –ø—Ä–æ–≤–µ—Ä–∏—Ç—å? –ü–æ—Å–ª–µ –Ω–µ–±–æ–ª—å—à–æ–π –±–µ—Å–µ–¥—ã —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏ –ø–æ –∂–µ–ª–µ–∑—É –æ–± —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–π –∑–∞—â–∏—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã—Ö —Å—Ö–µ–º —è –Ω–∞—á–∞–ª —Ç—ã–∫–∞—Ç—å –≤ –∫–æ–Ω—Ç–∞–∫—Ç—ã —á–µ—Ä–µ–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä 4kOhm, —É–º–µ–Ω—å—à–∞—é—â–∏–π —Ç–æ–∫ –¥–æ —É—Ä–æ–≤–Ω—è, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–∂–µ—á—å –≤—Ö–æ–¥—ã.<br>
<br>
<h4>UART</h4><br>
–Ø —Å–¥–µ–ª–∞–ª –µ—â—ë –æ–¥–Ω–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ, —á—Ç–æ –ª–∏–Ω–∏—è RX –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä—è–¥–æ–º —Å –¢–•. –õ–∏–Ω–∏–∏ 02, 03 –∏ 20 –≤—ã–≥–ª—è–¥—è—Ç –∫–∞–∫ —Ö–æ—Ä–æ—à–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –æ–±–µ–∏—Ö –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ 3,3&nbsp;–í –∫–∞–∫ —É TX.<br>
<br>
–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —è –ø—ã—Ç–∞–ª—Å—è –∏–∑—É—á–∏—Ç—å —ç—Ç–∏ –ª–∏–Ω–∏–∏ —Å –ø–æ–º–æ—â—å—é Bus Pirate. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–∫–∞–∑–∞–ª—Å—è –¥–æ–≤–æ–ª—å–Ω–æ –≥—Ä—è–∑–Ω—ã–º. –ó–∞—Ç–µ–º —è –≤–∑—è–ª –∫–∞–±–µ–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ SiLabs –∫–∞–∫ –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω—ã–µ –∏ –Ω–∏ —Å —á–µ–º –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –Ω–∞ macOS.<br>
<br>
–°–Ω–∞—á–∞–ª–∞ —è –ø–æ–¥–∫–ª—é—á–∏–ª –∫–∞–±–µ–ª—å TX –∫ –∫–æ–Ω—Ç–∞–∫—Ç—É 20 –∏ –Ω–∞—á–∞–ª –Ω–∞–±–∏—Ä–∞—Ç—å <code>help</code> –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞. –ö–∞–∫ –∏ –æ–∂–∏–¥–∞–ª–æ—Å—å, –ø–æ—Å–ª–µ –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ –∫–∞–º–µ—Ä–∞ –ø–æ–≤—Ç–æ—Ä–∏–ª–∞ —Å–∏–º–≤–æ–ª—ã.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a16/445/c00/a16445c00b6a22a6b37b74c97fc97ca5.png"><br>
<br>
–ö–æ–Ω—Ç–∞–∫—Ç—ã 02 –∏ 03 –±—ã–ª–∏ —Å–ª–µ–¥—É—é—â–∏–º–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏ –Ω–∞ UART. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ –æ–∫–∞–∑–∞–ª–æ—Å—å –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤, —á—Ç–æ —ç—Ç–∏ –ª–∏–Ω–∏–∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—Ç—Å—è.<br>
<br>
–ù–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ UART –æ–±–æ–∑–Ω–∞—á–µ–Ω—ã –±–æ–ª–µ–µ —Ç—ë–º–Ω—ã–º –æ—Ç—Ç–µ–Ω–∫–æ–º –∑–µ–ª–µ–Ω–æ–≥–æ.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/733/f68/fa1/733f68fa1950518017ad2c09971ac1f8.png"><br>
<br>
<h4>USB</h4><br>
–í—Å—ë –Ω–∞—á–∞–ª–æ—Å—å —Å —Ä–∞–∑—Ä–µ–∑–∞ USB-–∫–∞–±–µ–ª—è –ø–æ–ø–æ–ª–∞–º —Å —Ö–µ–¥–µ—Ä–æ–º –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ –∏ —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞–º–∏ –Ω–∞ 4kOhm –¥–ª—è –∑–æ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏—è. –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–∏–≥–Ω–∞–ª–∞ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –ø–∞—Ä—ã? –ù–µ–∞, —Ç–æ–≥–¥–∞ –º–µ–Ω—è —ç—Ç–æ –Ω–µ –æ—á–µ–Ω—å –≤–æ–ª–Ω–æ–≤–∞–ª–æ. :)<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/891/930/5d3/8919305d35cd2525d420313c2b0e7555.png"><br>
<br>
–ó–∞—Ç–µ–º —è –¥–æ–º–∞ –ø—Ä–æ–∑–æ–Ω–¥–∏—Ä–æ–≤–∞–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –±—ã—Ç–æ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å USB, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ, –∫–∞–∫ –≤—ã–≥–ª—è–¥—è—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –ø–æ —ç—Ç–æ–º—É –ø–æ—Ä—Ç—É.<br>
<br>
<b>–ö–∞–º–µ—Ä–∞ Canon</b><br>
<img src="https://habrastorage.org/getpro/habr/post_images/c49/f85/cf8/c49f85cf89650352531c83c970eb609c.png"><br>
<br>
<b>–ö–∞—Ä–º–∞–Ω–Ω–∞—è –≤–∏–¥–µ–æ–∫–∞–º–µ—Ä–∞ Blackmagic</b><br>
<img src="https://habrastorage.org/getpro/habr/post_images/8b7/7e5/bc8/8b77e5bc8c2fa3387083a8e8ec12c3db.png"><br>
<br>
<b>–í–∏–¥–µ–æ–∫–∞–º–µ—Ä–∞ Canon</b><br>
<img src="https://habrastorage.org/getpro/habr/post_images/17f/dd4/67a/17fdd467a6627a4129f38d6e476d4ffc.png"><br>
<br>
<b>–í–∏–¥–µ–æ–∫–∞–º–µ—Ä–∞ JVC</b><br>
<img src="https://habrastorage.org/getpro/habr/post_images/757/80d/4c8/75780d4c8a85c55c04afe5de9209e09d.png"><br>
<br>
<b>–ë—Ä–µ–ª–æ–∫</b><br>
<img src="https://habrastorage.org/getpro/habr/post_images/ad9/3a6/382/ad93a63828797eaea1f5d906367b792f.png"><br>
<br>
<b>–ö–∞–º–µ—Ä–∞ KidiZoom</b><br>
<img src="https://habrastorage.org/getpro/habr/post_images/32e/d73/13a/32ed7313a12ef1cef1444a87c22f3c77.png"><br>
<br>
–û–Ω–∏ –≤—Å–µ –Ω–µ–º–Ω–æ–≥–æ —Ä–∞–∑–Ω—ã–µ, –Ω–æ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ D- D+ –Ω–∏–∑–∫–æ–µ. –ß—Ç–æ –∂, –±—É–¥–µ–º –∑–Ω–∞—Ç—å, –∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å:<br>
<br>
<ul>
<li><b>22</b> ‚Äî –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ D- D+ —è–≤–ª—è—é—Ç—Å—è –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –ø–∞—Ä–æ–π –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ–≤–æ–ª—å–Ω–æ –±–ª–∏–∑–∫–∏;<br>
</li>
<li><b>04/05</b> ‚Äî –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–∏—Ö —Ä–∞–∑–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ;<br>
</li>
<li><b>14/15</b> ‚Äî –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–∏—Ö —Ä–∞–∑–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ;<br>
</li>
<li><b>15/16</b> ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –±–ª–∏–∑–∫–∏ –∏ –∏–º–µ—é—Ç –ø–æ—Ö–æ–∂–µ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ.</li>
</ul><br>
–ü–æ—ç—Ç–æ–º—É —è –ø–æ–¥—Å–æ–µ–¥–∏–Ω–∏–ª USB D- D+ –∫ –ø–∏–Ω–∞–º 15/16 –∏ –ø–æ–¥–∫–ª—é—á–∏–ª –∫ iMac‚Ä¶<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/777/491/b7f/777491b7f4a3b4b0f8376931db78c6c8.jpg"><br>
<br>
–ù–∞ —ç–∫—Ä–∞–Ω–µ USB PTP, –Ω–æ –∫–∞–º–µ—Ä–∞ –Ω–µ –ø–æ—è–≤–ª—è–ª–∞—Å—å –Ω–∞ —Ö–æ—Å—Ç–µ. –Ø –ø—ã—Ç–∞–ª—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞ –º–∞–∫–µ—Ç–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π —Å—Ö–µ–º—ã, –Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ. Beagle –ø–æ–∫–∞–∑—ã–≤–∞–ª –º–Ω–æ–≥–æ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–æ–∫. –í –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤ —è —Å–¥–∞–ª—Å—è –∏ –≤–µ—Ä–Ω—É–ª—Å—è –∫ –æ–±—Ä–∞—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–æ—à–∏–≤–∫–∏.<br>
<br>
–≠—Ç–æ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏–Ω–æ–≤–∫–∞, USB –æ–±–æ–∑–Ω–∞—á–µ–Ω —Ç—ë–º–Ω–æ-–∑–µ–ª—ë–Ω—ã–º —Ü–≤–µ—Ç–æ–º.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/2ad/07d/289/2ad07d289a684e6db69a02ae9e50c294.png"><br>
<br>
–ö—Ç–æ –±—ã –º–æ–≥ –ø–æ–¥—É–º–∞—Ç—å, —á—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç —Å–ø—É—Å—Ç—è –º–Ω–µ –ø—Ä–∏–¥—ë—Ç —Ç–æ —Å–∞–º–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ eBay –∏ —è –¥–æ–≤–æ–ª—å–Ω–æ –¥—ë—à–µ–≤–æ –∫—É–ø–ª—é –∂–µ–ª–∞–Ω–Ω—ã–π –∞–∫—Å–µ—Å—Å—É–∞—Ä.<br>
<br>
–ù–∞–∫–æ–Ω–µ—Ü, —è –º–æ–≥—É –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ PTP. –ù–æ —Å–Ω–∞—á–∞–ª–∞ –±—ã–ª–æ –æ—á–µ–Ω—å –ª—é–±–æ–ø—ã—Ç–Ω–æ, –∫–∞–∫ –≤–Ω—É—Ç—Ä–∏ –≥–∞–¥–∂–µ—Ç–∞ –≤—ã–≥–ª—è–¥–∏—Ç USB PHY.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/afe/0b1/afc/afe0b1afc09953f7f9c6dbc451c47c56.png"><br>
<br>
–í–Ω—É—Ç—Ä–∏ –æ–∫–∞–∑–∞–ª—Å—è —Ö–∞–± <a href="https://www.microchip.com/wwwproducts/en/USB2512B">SMSC 2512b</a> –ø—Ä—è–º–æ –Ω–∞ –¥–æ—Ä–æ–≥–µ –æ—Ç —Ä–∞–∑—ä—ë–º–∞ —Ä—É–∫–æ—è—Ç–∫–∏ –∫ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—É Mini USB. –ß–∏–ø —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ EEPROM –∏–ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ SCL/SDA. –ü–µ—Ä–≤—ã–π –Ω–∏—Å—Ö–æ–¥—è—â–∏–π –ø–æ—Ä—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ –≥–Ω–µ–∑–¥–æ –∫–æ—Ä–ø—É—Å–∞ –∫–∞–º–µ—Ä—ã, –Ω–æ –≤—Ç–æ—Ä–æ–π –Ω–∏ –∫ —á–µ–º—É –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω.<br>
<br>
–í–µ—Ä–æ—è—Ç–Ω–æ, —è —á—Ç–æ-—Ç–æ —É–ø—É—Å—Ç–∏–ª, –Ω–æ –¥–ª—è –º–µ–Ω—è —Ç–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –Ω–µ –∏–º–µ–µ—Ç –±–æ–ª—å—à–æ–≥–æ —Å–º—ã—Å–ª–∞. –í —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º –ø–∞—Å–ø–æ—Ä—Ç–µ –Ω–∞–ø–∏—Å–∞–Ω–æ, —á—Ç–æ —É —á–∏–ø–∞ ¬´–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ USB-–≤—ã–≤–æ–¥—ã, –∞ —Ç–∞–∫–∂–µ –µ—Å—Ç—å —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –∏ –ø–æ–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è¬ª. –í–æ–∑–º–æ–∂–Ω–æ, –∏–Ω–∂–µ–Ω–µ—Ä—ã Leica —Ä–µ—à–∏–ª–∏ –Ω–µ –≤–Ω–µ–¥—Ä—è—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π USB PHY, –∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ç–æ—Ç —á—Ç–æ –≤ —Ö–∞–±–µ, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ä–æ—à–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –Ω–µ –º–æ–≥—É –∏—Ö –≤–∏–Ω–∏—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ä–∞–Ω—å—à–µ —è –ø—ã—Ç–∞–ª—Å—è —Å–¥–µ–ª–∞—Ç—å –ø–æ–¥–æ–±–Ω–æ–µ, –∏ —ç—Ç–æ –æ–∫–∞–∑–∞–ª–æ—Å—å –Ω–µ–ø—Ä–æ—Å—Ç–æ–π –∑–∞–¥–∞—á–µ–π. –ú–æ–∂–µ—Ç, —ç—Ç–æ —Ñ–∏—á–∞ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏, –∫—Ç–æ –∑–Ω–∞–µ—Ç.<br>
<br>
–í –ª—é–±–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤—ã —Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤ USB PHY –∏ –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –Ω–∞–ø–∏—Å–∞—Ç—å –º–Ω–µ: –¥–æ–ª–∂–Ω–∞ –∂–µ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ USB-–ø–æ—Ä—Ç –±–µ–∑ —ç—Ç–æ–≥–æ —Ñ–∏—Ä–º–µ–Ω–Ω–æ–≥–æ –∞–∫—Å–µ—Å—Å—É–∞—Ä–∞ :)<br>
<br>
<h4>–°–Ω–æ–≤–∞ PTP</h4><br>
–ö–∞–∫ —è —É–∂–µ —Å–∫–∞–∑–∞–ª, –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –ø–æ–∏–≥—Ä–∞—Ç—å—Å—è —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º Leica PTP.<br>
<br>
–ö —Å—á–∞—Å—Ç—å—é, —è –Ω–∞—à—ë–ª –¥–æ–≤–æ–ª—å–Ω–æ –∫–ª–∞—Å—Å–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É C++ –≤–º–µ—Å—Ç–æ libptp ‚Äî —ç—Ç–æ <a href="https://github.com/TrueJournals/libEasyPTP">libEasyPTP</a>. –¢–∞–∫–∂–µ –Ω–µ –∑–∞–Ω—è–ª–æ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–ø–∏—Å–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: —è —É–∂–µ –∑–Ω–∞–ª –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Leica PTP.<br>
<br>
–ò —Ö–æ—Ç—è M240PTPTool –ø–æ—Ä—è–¥–æ—á–Ω–æ –≥–ª—é—á–∏—Ç, –æ–Ω –≤–ø–æ–ª–Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –Ω–∞ —Ä–æ–ª—å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ (<a href="https://github.com/alexhude/LeicaHacks/tree/master/Tools/M240PTPTool">–∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã</a>).<br>
<br>
–ü–æ PTP –∏–¥—ë—Ç —Ç–æ–ª—å–∫–æ –¥–≤–∞ –∑–∞–ø—Ä–æ—Å–∞: <b>GetDebugBuffer (0x900C)</b> –∏ <b>DebugCommandString (0x900D)</b>. –ö—Å—Ç–∞—Ç–∏, —á—Ç–æ–±—ã –º–æ–¥—É–ª–∏ –∑–∞–ø–æ–ª–Ω—è–ª–∏ –∂—É—Ä–Ω–∞–ª –æ—Ç–ª–∞–¥–∫–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ –º–µ–Ω—é —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Debug Level –∫–∞–∫ ‚ÄúDebug‚Äù –∏–ª–∏ ‚ÄúDebug RAW‚Äù.<br>
<br>
–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ M240PTPTool –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø—Ü–∏–π: <br>
<br>
<ul>
<li><b>exit</b> ‚Äî –∑–∞–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç;<br>
</li>
<li><b> flush</b> ‚Äî —Å–ª–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –±—É—Ñ–µ—Ä —Å –∫–∞–º–µ—Ä—ã:</li>
</ul><br>
<code>M240&gt; flush<br>
I:[00:11:468]|01| DATE/TIME CORRECTED by 5921 sec<br>
D:[00:12:079]|00| Send message from TID 0 to TID 1 over MBX 3 - length: 4 - MesgID: 0x22020103<br>
D:[00:12:179]|00| Send message from TID 0 to TID 1 over MBX 3 - length: 4 - MesgID: 0x22020103<br>
D:[00:12:282]|11| Message received from TID 0 for TID 1 over MBX 3<br>
D:[00:12:283]|11| Message received from TID 0 for TID 1 over MBX 3<br>
D:[00:12:301]|00| Send message from TID 0 to TID 1 over MBX 3 - length: 4 - MesgID: 0x22020103<br>
D:[00:12:402]|00| Send message from TID 0 to TID 1 over MBX 3 - length: 4 - MesgID: 0x22020103<br>
D:[00:12:502]|00| Send message from TID 0 to TID 1 over MBX 3 - length: 4 - MesgID: 0x22020103<br>
...</code><br>
<br>
–õ—é–±–æ–π –¥—Ä—É–≥–æ–π —Ç–µ–∫—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫ –∫–∞–º–µ—Ä—É –∫–∞–∫ –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, <code>help</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏:<br>
<br>
<code>M240&gt; help<br>
 ********* debug command description ********<br>
<br>
exposure request<br>
 Description: requests a release from Sub CPU<br>
 Parameter 1: Exposure Time TV<br>
<br>
still request<br>
 Description: simulates the -still request- command flow of Sub CPU<br>
 Parameter: no<br>
 <br>
 ...<br>
<br>
send Message;[Parameter1];[Parameter2];[Parameter2];...;...<br>
 Description: Sending Message to Task<br>
 Parameter 1: Receiver Task ID<br>
 Parameter 2: Command ID<br>
 Parameter 3: Command Data[0] (32 Bit)<br>
 Parameter 4: Command Data[1] (32 Bit)<br>
 Parameter 5: .<br>
 Parameter 6: .<br>
 use maximum 10 Parameter<br>
 <br>
 ...</code><br>
<br>
–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ–≤–æ–ª—å–Ω–æ –±–æ–ª—å—à–æ–π, –Ω–æ —Å–º–æ—Ç—Ä–∏—Ç–µ, –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä—è–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è Softune –¥–ª—è –ª—é–±–æ–π –∑–∞–¥–∞—á–∏! –ß—Ç–æ –±—ã —Ç–∞–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ —Ç—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å‚Ä¶<br>
<br>
–ï—â—ë –æ–¥–Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é —á–∞—Å—Ç–æ –∏—â—É—Ç –≤ –ø—Ä–æ—à–∏–≤–∫–µ ‚Äî <code>dump</code>. –ü–æ—Å–º–æ—Ç—Ä–∏–º, –µ—Å—Ç—å –ª–∏ —É –Ω–∞—Å —Ç–∞–∫–∞—è.<br>
<br>
<code>$ strings IMG_LOKI-212_1.1.0.2.bin | rg -i dump<br>
GUI: HEX DUMP: Address: %x, Length: %d<br>
HSK: DBG_WRITE_ROM_DUMP_SD: File was properly opened, but it seems to be empty.<br>
ROM_DUMP<br>
HSK: DBG_WRITE_ROM_DUMP_SD: Flushing Dump to ROM. Size %d<br>
SD:\ROM_DUMP.bin<br>
HSK: DBG_WRITE_ROM_DUMP_SD Command received!<br>
ROM_DUMP.bin<br>
HSK: DUMP failed, no cards inserted!<br>
HSK: DUMP FlashROM to SD card.<br>
HSK: DUMP FlashROM to CF card.<br>
Dumping files to card</code><br>
<br>
–í–∏–¥–∏–º–æ, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–∞–º–ø –ø—Ä–æ—à–∏–≤–∫–∏ –Ω–∞ SD-–∫–∞—Ä—Ç—É. –ü–æ —Å—Å—ã–ª–∫–µ –Ω–∞ —Å—Ç—Ä–æ–∫—É ‚ÄúDumping files to card‚Äù –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –∫–æ–¥, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ —ç—Ç–æ. –û–Ω —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤ –≥–∏–≥–∞–Ω—Ç—Å–∫–æ–º –±–ª–æ–∫–µ System Task (pid 11, –∫–∞–∫ –º—ã —É–∂–µ –∑–Ω–∞–µ–º) –∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ–º <code>0x11080006</code> –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.<br>
<br>
–ù–∞–±–µ—Ä–∏—Ç–µ <code>send Message;11;0x11080006</code> –≤ <b>M240PTPTool</b>, –Ω–∞–∂–º–∏—Ç–µ Enter –∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/4de/1cc/e2e/4de1cce2e0ee47a67645df790a7e581c.jpg"><br>
<br>
–ó–∞—Ç–µ–º –∏–∑–≤–ª–µ–∫–∏—Ç–µ SD-–∫–∞—Ä—Ç—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–∞ –Ω–µ–π.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/209/2a8/25e/2092a825e23cb93c4845b416ea11b0e4.png"><br>
<br>
–í–æ—Ç –æ–Ω, –ø–æ–ª–Ω—ã–π –¥–∞–º–ø, –≤–∫–ª—é—á–∞—è –ø—Ä–æ—à–∏–≤–∫—É.<br>
<br>
–≠—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫—Ä–æ—à–µ—á–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å MCU, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π USB-—Ö–æ—Å—Ç–∞ –∏ –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π‚Ä¶<br>
<br>
–ê –ø–æ—Ç–æ–º —É –Ω–∞—Å —Ä–æ–¥–∏–ª—Å—è –≤—Ç–æ—Ä–æ–π —Ä–µ–±–µ–Ω–æ–∫. :)<br>
<br>
<h1>–≠–ø–∏–ª–æ–≥</h1><br>
–ï—Å–ª–∏ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ –ª–æ–º–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –æ–±—ã—á–Ω–æ –µ—Å—Ç—å —Å–ø–æ—Å–æ–± –µ–≥–æ –∏–∑—É—á–∏—Ç—å, –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—è –∫–æ—Ä–ø—É—Å –∏–ª–∏ –ø—Ä–∏–ø–∞–∏–≤–∞—è –ø—Ä–æ–≤–æ–¥–∞ –∫ –ø–µ—á–∞—Ç–Ω–æ–π –ø–ª–∞—Ç–µ. –ù–∏–∂–µ –º–æ–∏ —Å–æ–≤–µ—Ç—ã, –µ—Å–ª–∏ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ:<br>
<br>
<ul>
<li>–Ω–∞–π–¥–∏—Ç–µ –≤—Å—é –ø—É–±–ª–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ: —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏—Ö, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–µ–π, <a href="https://youtu.be/p4t-OVIvuy8%3Ft%3D196">–≤–∏–¥–µ–æ —Å –∑–∞–≤–æ–¥–∞</a> ;)<br>
</li>
<li>–µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–æ—à–∏–≤–∫–∞, –ø–æ–∫–æ–ø–∞–π—Ç–µ—Å—å –≤ –Ω–µ–π –∏ –ø–æ–∏—â–∏—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ –≤–Ω–µ—à–Ω–∏—Ö –≤—ã—Ö–æ–¥–∞—Ö;<br>
</li>
<li>–≤—Å–µ–≥–¥–∞ –≥—É–≥–ª–∏—Ç–µ —Ä–∞–∑–Ω—ã–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ –∏ —Å—Ç—Ä–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±–∞–π—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–π–¥—ë—Ç–µ –≤ —Ñ–∞–π–ª–∞—Ö –ø—Ä–æ—à–∏–≤–∫–∏;<br>
</li>
<li>–∏–∑–º–µ—Ä—å—Ç–µ GND/–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª/—Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤, –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∞—Ä—É–∂—É;<br>
</li>
<li>–ø—Ä–æ–∑–æ–Ω–¥–∏—Ä—É–π—Ç–µ —ç—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º –ª–æ–≥–∏–∫–∏;<br>
</li>
<li>–≤—Å–µ–≥–¥–∞ –ø–æ–º–Ω–∏—Ç–µ –æ –º–µ—Ä–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–æ–π;<br>
</li>
<li>–ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–∫–ª—é—á–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –Ω–µ –Ω—É–∂–Ω—ã (–∑–µ–º–ª—è, –ø–∏—Ç–∞–Ω–∏–µ);<br>
</li>
<li>–µ—Å–ª–∏ –Ω–µ –º–æ–∂–µ—Ç–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Å–∏–≥–Ω–∞–ª –ø–æ –∞–Ω–∞–ª–æ–≥–æ–≤–æ–º—É –≤–∏–¥—É, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∏—Å–∫–∞—Ç—å –≤ Google –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ (USB/UART/SPI/I2C/1Wire);<br>
</li>
<li>–µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –∏–¥–µ–∏ –æ –ø—Ä–∏—Ä–æ–¥–µ —Å–∏–≥–Ω–∞–ª–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –ø–æ—Ö–æ–∂–µ–π –±—ã—Ç–æ–≤–æ–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–µ;<br>
</li>
<li>–ø–æ–¥—É–º–∞–π—Ç–µ <s>—Ç—Ä–∏</s> –ø—è—Ç—å —Ä–∞–∑, –ø—Ä–µ–∂–¥–µ —á–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ;<br>
</li>
<li>–∏ –∫–æ–Ω–µ—á–Ω–æ, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å —Å–æ–≤–µ—Ç–∞.</li>
</ul><br>
<img src="https://habrastorage.org/getpro/habr/post_images/18b/006/166/18b006166a4070202c1be3a9b946c3e9.png"><br>
<br>
<a href="http://github.com/alexhude">github.com/alexhude</a><br>
<br>
<b>–£–¥–∞—á–Ω—ã—Ö –≤–∞–º –≤–∑–ª–æ–º–æ–≤!</b></div><p>Source: <a href="https://habr.com/ru/post/438168/">https://habr.com/ru/post/438168/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>