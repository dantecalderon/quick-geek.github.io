<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MPS 2018.3: generation plans, improvements in the assembly and packaging language and in the editor's language, updated interface</title>
  <meta name="description" content="Hi, Habr! We recently released MPS 2018.3 . In this version, many new features that work on projects will be even more efficient. We improved the gene...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>MPS 2018.3: generation plans, improvements in the assembly and packaging language and in the editor's language, updated interface</h1><div class="post__text post__text-html js-mediator-article"><p>  Hi, Habr!  We recently released <a href="https://www.jetbrains.com/mps/download/">MPS 2018.3</a> .  In this version, many new features that work on projects will be even more efficient.  We improved the generation plans and editor description language, added new constructs to the assembly and packaging language, updated the interface elements to easily navigate the inheritance hierarchy and made many other changes for productive work. </p><br><img src="https://habrastorage.org/webt/io/qh/od/ioqhodaveveugmfh37gg4nhwod4.png" alt="image"><a name="habracut"></a><br><h2>  BaseLanguage </h2><br><h3>  Icons for navigating over defined / implemented concepts </h3><br><p>  On the margins of the concepts and interface concepts, there are icons of redefined / implemented concepts that simplify navigation to child concepts. </p><br><img src="https://habrastorage.org/webt/z6/kw/g3/z6kwg3r6txzsx9copsgl949pfjq.png" alt="image"><br><h3>  Customizable packages for BaseLanguage classes </h3><br><p>  In previous versions of MPS, the Java package of the generated classes was uniquely determined by the name of the model in which the original elements were located.  In the new version for BaseLanguage Classifiers, the packageName property has been added, allowing to override the name of the final Java package.  The packageName property only makes sense for top-level BL classifiers, as is the case with Java classifiers. </p><br><img src="https://habrastorage.org/webt/hu/ck/qz/huckqzkttk2djkzaq6oczwse3cm.png" alt="image"><br><h3>  New generator capabilities for BaseLanguage extensions </h3><br><p>  For the BaseLanguage language, extensions are often created.  However, for some extensions, it is not easy to write a suitable generator.  We have added several new concepts to BaseLanguage to simplify the process of writing generators for extensions. </p><br><h3>  Generating Lvalue Expressions </h3><br><p> A lvalue expression is a variable into which you can read or write a value.  In some cases, generating an lvalue expression is difficult, since it may depend on the context in which it is used.  The new auxiliary concept <code>generic lvalue-expression</code> simplifies the generator and makes it context-independent. </p><br><img src="https://habrastorage.org/webt/hi/pd/kw/hipdkw2tsdx-rhm51ebyocwi8ni.png" alt="image"><br><h3>  Convert lvalue expressions to links </h3><br><p>  Some expressions include other Lvalue expressions for more complex operations with variables (for example, plus assignment or increment and get expressions).  It was difficult to introduce constructions with such semantics, because it is not easy for them to write the correct generator. </p><br><p>  In the new version, you can wrap any Lvalue expression with the expression <code>@byRef</code> .  The BaseLanguage generator converts a wrapped expression to an expression of type <code>Reference&lt;T&gt;</code> , which provides get and set methods for the wrapped variable. </p><br><img src="https://habrastorage.org/webt/tf/ur/fx/tfurfxpuya-hqs104t3s2qsndjc.png" alt="image"><br><p>  Read more about new concepts in <a href="https://confluence.jetbrains.com/display/MPSD20183/Implementing%2Bgenerators%2Bfor%2BBaseLanguage%2527s%2Bextensions">this article</a> . </p><br><h3>  Support for default methods </h3><br><p>  In the new version of MPS, you can create default methods in the BaseLanguage interfaces.  The default keyword is implemented by the DefaultModifier concept ‚Äî an extension of the Modifier concept.  DefaultModifier is contained in the language jetbrains.mps.baseLanguage.jdk8, therefore, to create a default-method in the interface, import the jdk8 language. </p><br><img src="https://habrastorage.org/webt/ob/du/h2/obduh2iscqz6fcu8clmfpnf4-vk.png" alt="image"><br><h2>  Generator </h2><br><h3>  Generator language (model transformation language) </h3><br><p>  We removed the $ INCLUDE $ macro, replacing its use with $ CALL $.  Appropriate migration will help update your projects.  The $ INCLUDE $ macro does not support patterns with arguments, and the presence of two macros with similar functionality complicates the language. </p><br><p>  Macro $ WEAVE $ and weaving-rules have now learned to call patterns with arguments.  In addition, we fixed an unpleasant, though not very noticeable, defect that occurs when using compiled and interpreted templates at the same time.  The ‚Äúimplementation‚Äù (weave) of an external template from the interpreted code used to always lead to interpretation, but now the compiled template will work (of course, provided that the use of compiled templates is included in the generator properties).  Similarly, the ‚Äúweave‚Äù of the interpreted external template from the compiled one works. </p><br><p>  QueriesGenerated, a set of compiled model queries for a model with templates, has always relied on the naming convention and the Java reflection mechanism to execute code.  You could see it in the spectra when in the model query from the generator something went wrong.  We finally got rid of this mechanism. </p><br><h2>  UI / UX Elements </h2><br><h3>  MacBook Touchbar Support </h3><br><p>  Owners of MacBooks with a touchbar can now use it to work in MPS: for example, trigger startup actions, build and debug applications from the touchbar, and also quickly select a run / debug configuration or create a new one.  Touchbar controls can be configured on the Settings / Preferences |  Appearance &amp; Behavior |  Menus and Toolbars. </p><br><p>  And of course, the possibilities of the touchbar can be expanded!  Just add the desired action to the appropriate <code>InterfaceGroup</code> . </p><br><img src="https://habrastorage.org/webt/at/fs/xl/atfsxloksn6olp865ag662xrwuc.jpeg" alt="image"><br><h3>  High contrast theme </h3><br><p>  As in the IntelliJ Platform, a new high contrast theme appeared in the MPS.  It can be enabled in Settings / Preferences -&gt; Appearance &amp; Behavior. </p><br><img src="https://habrastorage.org/webt/hd/x7/zg/hdx7zgbhp8qeeecpvvzkq6kf6ig.png" alt="image"><br><h3>  Search tools for deprecated code </h3><br><p>  In the menu Migration |  Deprecated Code collected actions to search for deprecated code and work with its uses.  <strong><em>Find Usages of Deprecated</em></strong> groups the search results by the intended version of the deletion, which helps determine the criticality and choose which uses should be removed first. </p><br><img src="https://habrastorage.org/webt/m_/0r/1r/m_0r1rczfuph5u8z549usbjvmwi.png" alt="image"><br><h3>  Icons for navigating redefined / implemented behavior methods </h3><br><p>  In the fields of the behavior classes, we added icons to navigate through the overridden / implemented behavior methods.  Below is a list of getPresentation () methods that override or implement the selected method.  From the list you can easily go to any of the specified methods. </p><br><img src="https://habrastorage.org/webt/ak/lh/3q/aklh3qv4yxghsugnaxljs5jc8ka.png" alt="image"><br><h3>  Pop-up improvements for navigating redefined items </h3><br><p>  The pop-up windows of redefined / implemented concepts / classes / methods have become asynchronous.  This means that the MPS will add search results to a pop-up window in the background.  In addition, you can now filter the search results by object name. </p><br><img src="https://habrastorage.org/webt/in/kw/py/inkwpythqxmui9iyvj-ad3l_0uq.png" alt="image"><br><h3>  Changes in finders </h3><br><p>  In this version we updated and optimized finders.  To execute the finder asynchronously, use the special OnEachNodeFoundByExpression expression, which is a simple finder call with a callback function for each node found. </p><br><p>  Find Usage Settings for concepts has also changed.  We added the search options Concept Ancestors and Derived Concepts, which give a list of parent and child concepts, respectively.  In addition, search capabilities for behavior methods have been extended with the Overridden Methods and Overriding Methods options. </p><br><img src="https://habrastorage.org/webt/zi/z_/tx/ziz_txzvuknu6rf8rhp-sf3n9qa.png" alt="image"><br><h3>  Ignoring errors </h3><br><p>  MPS can ignore errors on nodes.  This is useful in cases where the error is displayed in the editor, but in a specific context does not make sense (for example, in generator templates).  Previously, the ability to suppress such errors was inflexible.  If the node was annotated with the 'SuppressErrorAnnotation' attribute, then the 'Suppress error for node ...' intensity was called on it.  The use of this intensity suppressed all kinds of errors on this node and all its descendants - thus the actual errors could be ignored. </p><br><p>  Now it is possible to ignore only certain types of errors.  The selected error will be ignored for this node and all its descendants, but all other messages will be displayed.  Read more about the new error management features in the <a href="https://confluence.jetbrains.com/display/MPSD20183/Suppressing%2BErrors">documentation</a> . </p><br><img src="https://habrastorage.org/webt/mv/_-/l9/mv_-l96edwplchrn5wdfgvqc0rs.png" alt="image"><br><h2>  Assembly language and packaging </h2><br><h3>  Tips &amp; Tricks </h3><br><p>  In the RCP (Rich Client Platform) applications, tips and tricks from MPS were added by default.  Now it is possible to override the tips &amp; tricks for your application with the help of the new design tips &amp; tricks in the build script.  As before, you can use tips from the MPS distribution or define them yourself in a catalog or solution module and import them. </p><br><img src="https://habrastorage.org/webt/uy/eg/dy/uyegdyssvjdea7lawke3vc3tnda.png" alt="image"><br><h3>  Tips &amp; Tricks Description Language </h3><br><p>  To import tips &amp; tricks to a build script from a solution module, create a solution and import the languages ‚Äã‚Äãjetbrains.mps.build.tips and jetbrains.mps.core.xml.  Then create an instance of the concept MPSTipsAndTricks and describe your tips in it.  Each tip is an HTML text and can contain no more than one image. </p><br><img src="https://habrastorage.org/webt/47/pf/ih/47pfihjinryxxw0mghru_exu4zk.png" alt="image"><br><h3>  Packaging methods </h3><br><p>  We marked custom packaging in BuildMps_IdeaPlugin as deprecated.  Instead, use the packaging method in the BuildMpsLayout_Plugin construct. </p><br><p>  The Auto packaging build method places all the modules of the type language and solution into the 'languages' folder of the plug-in's root directory, and the Manual packaging option allows the developer to set the structure of the plug-in independently. </p><br><img src="https://habrastorage.org/webt/dt/cl/8f/dtcl8fk-e7rivpawtgh_55cpfjs.png" alt="image"><br><h3>  New design language assembly and packaging </h3><br><p>  We have expanded the capabilities of the test configuration in the language of assembly and packaging.  Now it is possible to specify additional IntelliJ IDEA plugins that must be loaded to perform MPS tests from Ant. </p><br><p>  In some cases, a test requires a specific plugin that the build language could not calculate using the modules containing the tests.  Now you can specify the plugin required to perform the test in the test configuration structure. </p><br><img src="https://habrastorage.org/webt/za/g4/wk/zag4wkddnnnv6mf8d1abpyuqbr0.png" alt="image"><br><h2>  Editor </h2><br><h3>  Reuse cell action maps </h3><br><p>  The elements of the action map from the existing action map can be reused with imports. </p><br><img src="https://habrastorage.org/webt/z5/gm/pa/z5gmpakpmcn9rcx3gu3b-26srrm.png" alt="image"><br><h2>  Other improvements </h2><br><h3>  Fully compiled datatypes </h3><br><p>  Moving in the direction of fully compiled languages, we created fully generated datatypes.  All generated information about datatypes is available through the SModel API. </p><br><h3>  Saving migration data in annotations </h3><br><p>  We have implemented a new way to save data during migrations, which we recommend to use in the future.  The derived node that contains the data should now be attached to any node that is close enough to the place to which the data belongs. </p><br><p>  In a migration script that creates nodes with data, you need to declare the concept of such nodes and use the putData () construct to insert each such annotation into the model: </p><br><img src="https://habrastorage.org/webt/gh/lj/8i/ghlj8iwattcq7tleyko5-oufoau.png" alt="image"><br><p>  Extraction of nodes containing data is performed in the same way as before: </p><br><img src="https://habrastorage.org/webt/zc/0g/qj/zc0gqjnojbzrbgng66av9-t-sqi.png" alt="image"><br><h3>  Changes in the conflict resolution dialog </h3><br><p>  Previously, when a conflict could apply changes only on one side.  But sometimes it is important not to lose other changes. </p><br><p>  This applies to changes in neighboring nodes that are in the same multiple role.  Now, after applying the changes on one side of the conflict, the changes from the other branch will be displayed as an addition.  To complete the resolution of the conflict, this addition must be applied or rejected. </p><br><p>  After applying the changes on the left side of the conflict, you can apply or ignore the line on the right side: </p><br><img src="https://habrastorage.org/webt/pn/7v/37/pn7v37zo4hidk1afzlnpfeac8iu.png" alt="image"><br><p>  Download the new version <a href="https://www.jetbrains.com/mps/download/">here</a> , we hope it will make you happy.  In any case, we will be waiting for your <a href="https://mps-support.jetbrains.com/hc/en-us/requests/new%3Fticket_form_id%3D360000119880">feedback</a> !  A full list of fixes is available <a href="https://youtrack.jetbrains.com/issues%3Fq%3D%2523MPS%2520Fix%2520versions:%2520%257B2018.3%2520Beta%2520(EAP8)%257D,%257B2018.3%2520EAP%257D%2520,%257B2018.3%2520EAP1%257D%2520,%257B2018.3%2520EAP2%257D%2520,%257B2018.3%2520EAP3%257D%2520,%257B2018.3%2520EAP4%257D%2520,%257B2018.3%2520EAP5%257D%2520,%257B2018.3%2520FF%2520(EAP7)%257D%2520,%257B2018.3%2520RC1%257D%2520,%257B2018.3%2520RC2%257D%2520%2520State:%2520Fixed">on this page</a> .  Please report any problems to us in the <a href="https://youtrack.jetbrains.com/issues/MPS">tracker</a> . </p><br><p>  <em>Your JetBrains MPS Team</em> <br>  <em>The Drive to Develop</em> </p></div><p>Source: <a href="https://habr.com/ru/post/436652/">https://habr.com/ru/post/436652/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>