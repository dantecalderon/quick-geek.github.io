<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A brief history of one "smart tape"</title>
  <meta name="description" content="Social networks are one of the most popular Internet products today and one of the main sources of data for analysis. Inside the social networks thems...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>A brief history of one "smart tape"</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/tg/ur/qi/tgurqirmoopbgtlewj9w7drkwlw.png"><br><br>  Social networks are one of the most popular Internet products today and one of the main sources of data for analysis.  Inside the social networks themselves, the most difficult and interesting task in the field of data science is considered to be the formation of the news line.  After all, to meet the ever increasing demands of the user for the quality and relevance of the content, it is necessary to learn to collect information from many sources, calculate the forecast of the user's reaction and balance between dozens of competing metrics in the A / B test.  And large amounts of data, high loads and stringent requirements for response speed make the task even more interesting. <br><a name="habracut"></a><br>  It would seem that the ranking tasks for today have already been studied in and out, but if you look closely, it is not so simple.  The content in the tape is very heterogeneous - this is a photo of friends, and memesiki, viral videos, longrides, and nauchpop.  In order to put everything together, you need knowledge from different areas: computer vision, work with texts, recommendation systems, and, without fail, modern high-loaded storage and data processing facilities.  Finding one person with all the skills is extremely difficult today, so sorting the tape is really a team task. <br><br>  <a href="https://ok.ru/">Odnoklassniki</a> began experimenting with different ranking algorithms as early as 2012, and in 2014 machine learning was connected to this process.  This was made possible primarily due to the progress in data flow technology.  Only by starting to collect object displays and their signs in <a href="https://kafka.apache.org/">Kafka</a> and aggregating logs with the help of <a href="https://samza.apache.org/">Samza</a> , we were able to build datasets for training models and <a href="https://www.youtube.com/watch%3Fv%3Di0ugQhQjAXA">calculate the most ‚Äúpulling‚Äù</a> features: Click Through Rate of the object and forecasts of the recommender system ‚Äúbased on‚Äù the <a href="http://www.cse.lehigh.edu/~brian/pubs/2012/SIGIR/social-update-streams.pdf">work of colleagues from LinkedIn</a> . <br><br><img src="https://habrastorage.org/webt/st/az/op/stazop5twygxr8remun45tcsqai.png"><br><br>  It quickly came to the realization that the workhorse of the logistic regression cannot take out the tape alone, because the user can have a very different reaction: class, comment, click, concealment, etc., while the content can be very different - photo a friend, a group post, or a vidosik faded by a friend.  Each reaction for each type of content has its own specifics and its own business value.  As a result, we came to the concept of ‚Äú <a href="https://www.youtube.com/watch%3Fv%3DAL9Yq9nTfIs">logistic regressions matrix</a> ‚Äù: for each type of content and each reaction a separate model is built, and then their forecasts are multiplied by a matrix of weights, formed by hands based on current business priorities. <br><br><img src="https://habrastorage.org/webt/9y/eo/kk/9yeokkndphff6rhhbdm694flaau.png"><br><br>  This model turned out to be extremely viable and for a long time was the main one.  Over time, it has acquired more and more interesting signs: for objects, for users, for authors, for a user-author relationship, for those who interacted with an object, etc.  As a result, the first attempts to replace the regression with a neural network ended in a sad ‚Äúfeatures we have are too finished, the boost grid does not give.‚Äù <br><br>  At the same time, often the most noticeable boost from the point of view of user activity was given technical, rather than algorithmic improvements: scoop up more candidates for ranking, more accurately track the facts of the show, optimize the response rate of the algorithm, and deepen the viewing history.  Such improvements often gave units, and sometimes even tens of percent of the increase in activity, while updating the model and adding a trait more often gave the tenths of a percent increase. <br><br><img src="https://habrastorage.org/webt/3y/fw/pp/3yfwppnpduocn4eartddqsz0ckm.jpeg"><br><br>  Separate complexity in experiments with updating the model created a rebalance of content - the distribution of forecasts of the "new" model could often significantly differ from its predecessor, which led to the redistribution of traffic and feedback.  As a result, it is difficult to assess the quality of the new model, as you first need to calibrate the balance of content (repeat the process of setting the matrix weights for business purposes).  After studying the <a href="http://quinonero.net/Publications/predicting-clicks-facebook.pdf">experience of colleagues from Facebook</a> , we realized that the model <a href="https://www.cs.cornell.edu/~alexn/papers/calibration.icml05.crc.rev3.pdf">needs to be calibrated</a> , and an isotonic regression attached to the top of the logistic regression :). <br><br>  Often, in the process of preparing new content attributes, we experienced frustration - a simple model using basic collaborative techniques can give 80%, or even 90% of the result, whereas a fashionable neural network that has been studying for a week on super-expensive GPUs will perfectly detect cats and cars, but it gives an increase metrics only in the third sign.  A similar effect can often be seen when introducing thematic models, fastText, and other embeddings.  It was possible to overcome the frustration by looking at validation from the right angle: the performance of collaborative algorithms improves significantly as information about the object is accumulated, while for ‚Äúfresh‚Äù objects the content attributes give a noticeable boost. <br><br>  But, of course, sometime the results of the logistic regression should have been improved, and it was possible to make progress by applying the recently released <a href="https://xgboost.readthedocs.io/en/latest/jvm/xgboost4j_spark_tutorial.html">XGBoost-Spark</a> .  Integration <a href="https://vk.com/video-133150806_456239018">was not easy</a> , but, as a result, the model has finally become fashionable-youth, and the metrics have grown by interest. <br><br><img src="https://habrastorage.org/webt/nm/_v/jd/nm_vjdays997obcjq4yzhktrkze.jpeg"><br><br>  Surely from the data you can extract much more knowledge and bring the ribbon ranking to a new height - and today everyone has the opportunity to try their hand at this nontrivial task at the <a href="http://snahackathon.org/">SNA Hackathon 2019</a> competition.  The competition takes place in two stages: from February 7 to March 15, download the solution to one of three problems.  After March 15, interim results will be announced, and 15 people from the top leaderboard for each of the tasks will receive invitations to the second stage, which will be held from March 30 to April 1 in the Moscow office of Mail.ru Group.  In addition, the invitation to the second stage will be received by three people who are at the top of the rating at the end of February 23. <br><br>  Why are there three tasks?  As part of the online phase, we offer three sets of data, each of which presents only one of the aspects: an image, text, or information about various collaborative features.  And only at the second stage, when experts in different areas come together, a common dataset will be revealed, allowing you to find points for synergy of different methods. <br><br>  Interested in the task?  Join <a href="http://snahackathon.org/">SNA Hackathon</a> :) </div><p>Source: <a href="https://habr.com/ru/post/438392/">https://habr.com/ru/post/438392/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>