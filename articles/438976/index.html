<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The book "Spring. All design patterns ¬ª</title>
  <meta name="description" content="Hi, Habrozhiteli! We have published a book that gives an overview of the Spring 5 framework and design patterns for it. The principle of dependency in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>The book "Spring. All design patterns ¬ª</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habr.com/ru/company/piter/blog/438976/"><img src="https://habrastorage.org/webt/vm/th/di/vmthdimvgwkbajd3j6bctndhqxq.jpeg" align="left" alt="image"></a>  Hi, Habrozhiteli!  We have published a book that gives an overview of the Spring 5 framework and design patterns for it.  The principle of dependency injection, which plays a key role in the creation of loosely coupled code in the Spring framework, is explained.  Then the classic ‚ÄúGangs of Four‚Äù patterns are considered when designing applications for Spring.  In the following parts of the book, the author examines the patterns of aspect-oriented programming (AOP), JDBC templates that allow abstract access to the database.  In the final chapters of the book, the author explores the work with MVC, reactive design patterns and design patterns used in competitive and parallel programming in Spring. <br><br>  We offer you to familiarize yourself with the passage ‚ÄúPattern‚Äú Object of access to data ‚Äù‚Äù <br><a name="habracut"></a><br>  The Data Access Object (DAO) is an extremely popular design pattern for the persistence layer in J2EE applications.  It separates the level of business logic from the level of conservation.  The DAO pattern is based on object-oriented principles of encapsulation and abstraction.  DAO pattern usage context - data access and storage depending on the specific implementation and type of storage, such as an object-oriented database, unstructured files, relational databases, etc. Based on the DAO pattern, you can create a DAO interface and implement it, to abstract and encapsulate all calls to the data source.  Such a DAO implementation manages database resources such as connections to a data source. <br><br>  DAO interfaces are very easy to adapt to all underlying data source mechanisms; they do not need to be replaced with changes in storage technologies at lower levels.  This pattern allows you to implement various data access technologies without in any way affecting the business logic of the enterprise application.  Consider rice.  8.1 to better understand the principles of the DAO pattern. <br><br>  As you can see in the diagram, the following objects participate in the pattern. <br><br>  BusinessObject is a business-level object that is a client for a data access level.  It needs data to model business processes, as well as prepare Java objects for supporting functions or application controllers. <br><br>  DataAccessObject is the main object of the DAO pattern.  Hides from BusinessObject the entire low-level implementation of the underlying database. <br><br>  A DataSource is also an object containing all low-level information about what exactly the underlying database is: RDBMS, unstructured files, or XML. <br><br>  TransferObject is an object used as a storage medium.  Used by a DataAccessObject object to return data to a BusinessObject object. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kd/xu/xb/kdxuxbasui0ofxhehoptufnjgx0.png" alt="image"></div><br>  Consider the following example of a DAO pattern, in which AccountDao is the interface of the DataAccessObject object, and AccountDaoImpl is the class that implements the AccountDao interface: <br><br><pre><code class="plaintext hljs">public interface AccountDao { Integer totalAccountsByBranch(String branchName); } public class AccountDaoImpl extends JdbcDaoSupport implements AccountDao { @Override public Integer totalAccountsByBranch(String branchName) { String sql = "SELECT count(*) FROM Account WHERE branchName = "+branchName; return this.getJdbcTemplate().queryForObject(sql, Integer.class); } }</code> </pre> <br><h3>  Creating DAO objects in Spring using the Factory design pattern </h3><br>  As you know, there are many design patterns involved in the Spring framework.  The ‚ÄúFactory‚Äù pattern is a generating design pattern and is used to create an object without disclosing the underlying logic to the client, as well as assigning it to the caller of a new object using a common interface or an abstract class.  Thanks to the ‚ÄúFactory Method‚Äù and ‚ÄúAbstract Factory‚Äù design patterns, a very high flexibility of the DAO pattern can be achieved. <br><br>  Let us find out where in our example we are implementing a strategy in which the factory produces DAO objects for the implementation of a common database (Fig. 8.2). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5e/8u/an/5e8uan8re9zkfx-cmlcujgnxrdq.png" alt="image"></div><br>  You can see in the previous diagram that AccountDaoFactory produces an AccountDao object, that is, it is a factory for it.  You can replace the underlying database at any time, and you don‚Äôt need to change the business code - the factory takes over the job.  Spring supports storing all DAOs in a component factory, as well as in a DAO factory. <br><br><h3>  Pattern "Display data" </h3><br>  The ORM framework provides the mapping between objects and relational databases, because the objects and tables of relational databases store application data in different ways.  In addition, there are various mechanisms for structuring data in objects and tables.  When using any ORM solution in a Spring application, such as Hibernate, JPA, or JDO, there is no need to worry about the display mechanism between objects and relational databases. <br><br>  Consider rice.  8.3 to better understand the ‚ÄúData Mapper‚Äù pattern. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/44/pf/t1/44pft1zvvhqcywlmrxbfhiq0qto.png" alt="image"></div><br>  On the diagram, the Account object is mapped to a relational database through the AccountMapper interface.  AccountMapper plays the role of an intermediary between the Java object and the underlying database in the application.  Consider another pattern used at the data access level. <br><br><h3>  Pattern "Model domain" </h3><br>  A domain model is an object that has both data and behavior, where behavior defines the business logic of an enterprise application, and data represents information about business results.  The domain model combines data and workflow.  In a corporate application, the data model is located below the business layer and defines the business logic, returning the results of business behavior.  Consider the following diagram for clarity (Fig. 8.4). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ei/_b/p5/ei_bp5wgux8l9kjozgk12366nem.png" alt="image"></div><br>  As you can see in the diagram, the application has two domain models defined in accordance with the business requirements.  The business algorithm for transferring money from one account to another is described in the TransferService class.  The TransferService and AccountService classes are related to the domain model model in a corporate application. <br><br><h3>  Proxy for the pattern "delayed loading" </h3><br>  ‚ÄúDelayed loading‚Äù is a design pattern used by some of the ORM solutions, for example, Hibernate, in corporate applications to postpone the initialization of an object until another object refers to it, that is, the moment it is needed.  The purpose of this design pattern is to optimize the memory in the application.  The Hibernate delayed load design pattern is implemented using a virtual proxy object.  When demonstrating deferred loading, we use a proxy, but it does not belong to the ‚ÄúDeputy‚Äù pattern. <br><br><h3>  Pattern Method Pattern for Spring Hibernate Support </h3><br>  The Spring framework provides a helper class for data access at the DAO level, based on the GoF Template Method Design Pattern.  The HibernateTemplate class of the Spring framework supports database operations such as save, create, delete, and update.  This class ensures that only one Hibernate session is used for each transaction. <br><br><h3>  Hibernate integration with Spring </h3><br>  Hibernate is an open source ORM storage framework that not only displays simple object relationships between Java objects and database tables, but also offers many advanced features to increase application performance and also helps improve resource utilization, such as caching. , deferred loading, immediate data retrieval and distributed caching. <br><br>  Spring provides full support for integration with the Hibernate framework, it has several built-in libraries that allow you to use Hibernate 100%.  To set the Hibernate settings in the application, you can use the dependency injection pattern and the Spring framework IoC container. <br><br>  In the next section, we'll figure out how to properly configure Hibernate in the Spring framework's IoC container. <br><br><h3>  Setting the SessionFactory object of the Hibernate framework in the Spring container </h3><br>  The best approach to customizing Hibernate and other storage technologies in any enterprise application is to separate business objects with hardwired resource directories, such as the DataSource in JDBC or the SessionFactory in Hibernate.  These resources can be described as components in a Spring container.  But to access them, business objects need links to them.  Consider the following DAO class, using the SessionFactory object to retrieve data for an application: <br><br><pre> <code class="plaintext hljs">public class AccountDaoImpl implements AccountDao { private SessionFactory sessionFactory; public void setSessionFactory(SessionFactory sessionFactory) { this.sessionFactory = sessionFactory; } // ... }</code> </pre> <br>  As you can see, the DAO class, AccountDaoImpl, follows the dependency injection pattern.  To access the data, the Hibernate framework's SessionFactory object is embedded in it, and it feels great in the IoC Spring container.  The SessionFactory object of the Hibernate framework is a single object, it generates the main Hibernate interface object of the org.hibernate.Session.  The SessionFactory object manages the Session object, and is also responsible for opening and closing it.  The Session interface contains real data access functionality - saving (save), updating (updating), deleting (deleting) and loading (loading) objects from the database.  In an application, an object of class AccountDaoImpl or any other repository performs all the necessary data storage operations using this Session object. <br><br>  The Spring framework provides built-in Hibernate modules, so you can use the SessionFactory Hibernate components in your applications. <br><br>  The org.springframework.orm.hibernate5.LocalSessionFactoryBean component is an implementation of the Spring framework FactoryBean interface.  LocalSessionFactoryBean is based on the Abstract Factory pattern; it generates a SessionFactory object in the application.  This object can be configured as a component in the context of a Spring application as follows: <br><br><pre> <code class="plaintext hljs">@Bean public LocalSessionFactoryBean sessionFactory(DataSource dataSource) { LocalSessionFactoryBean sfb = new LocalSessionFactoryBean(); sfb.setDataSource(dataSource); sfb.setPackagesToScan(new String[] { "com.packt.patterninspring.chapter8.bankapp.model" }); Properties props = new Properties(); props.setProperty("dialect", "org.hibernate.dialect.H2Dialect"); sfb.setHibernateProperties(props); return sfb; }</code> </pre> <br>  In this code, we configured the SessionFactory object as a component using the Spring framework LocalSessionFactoryBean class.  The method of this component accepts as input an object of the DataSource type as an argument that defines the location and method of connecting to the database.  We also specified which package to view by setting the ‚Äúcom.packt.patterninspring.chapter8.bankapp.model‚Äù value for the setPackagesToScan property of the LocalSessionFactoryBean component, and setting the dialect property of the SessionFactory component using the setHibernateProperties method to specify what type of database we have matter in the application. <br><br>  Now, after configuring the SessionFactory Hibernate component, in the context of the Spring application, let's see how we can implement data access objects for the storage level of our application. <br><br><h3>  about the author </h3><br>  <b>Dinesh Rajput</b> is the chief editor of Dineshonjava, a technical blog dedicated to Java and Spring.  The site contains articles on Java technology.  Dinesh is a blogger, author of books, c 2008 Spring enthusiast, certified specialist of the company Pivotal (Pivotal Certified Spring Professional).  He has more than ten years of design and development experience using Java and Spring.  Specializes in working with the latest version of the Spring Framework, Spring Boot, Spring Security, creating REST API, microservice architecture, reactive programming, aspect-oriented programming using Spring, design patterns, Struts, Hibernate, web services, Spring Batch, Cassandra, MongoDB, web application architecture. <br><br>  Currently, Dinesh works as a technology manager in one of the companies leading in the field of software development.  He was a developer and team leader at Bennett, Coleman &amp; Co.  Ltd, and before that, the lead developer at Paytm.  Dinesh is enthusiastic about the latest Java technology and loves to write about them in technical blogs.  He is an active participant in the Java and Spring communities in various forums.  Dinesh is one of the best specialists in Java and Spring. <br><br><h3>  About Reviewer </h3><br>  <b>Rajiv Kumar Mohan</b> has extensive experience in software development and corporate training.  For 18 years he has worked at such major IT companies as IBM, Pentasoft, Sapient and Deft Infosystems.  He started his career as a programmer, led many projects. <br><br>  He is an expert in the domain of Java, J2EE and related frameworks, Android, UI-technologies.  Sun certified as a Java Programmer (SCJP, Sun Certified Java Programmer) and Java Web Developer (Sun Certified Web Component Developer, SCWCD).  Rajeev has four higher educations: in the field of computer science (Computer Science), applied computer science (Computer Applications), organic chemistry and business administration (MBA).  Recruitment consultant and training expert for HCL, Amdocs, Steria, TCS, Wipro, Oracle University, IBM, CSC, Genpact, Sapient Infosys and Capgemini. <br><br>  Rajeev is the founder of SNS Infotech, located in the city of Greater Noida.  In addition, he worked at the National Institute of Fashion Technology (National Institute of Fashion Technology, NIFT). <br><br>  ¬ªMore information about the book can be found on <a href="https://www.piter.com/collection/new/product/spring-vse-patterny-proektirovaniya%3F_gs_cttl%3D120%26gs_direct_link%3D1%26gsaid%3D82744%26gsmid%3D29789%26gstid%3Dc">the publisher's website.</a> <br>  ¬ª <a href="https://storage.piter.com/upload/contents/978544610935/978544610935_X.pdf">Table of Contents</a> <br>  ¬ª <a href="https://storage.piter.com/upload/contents/978544610935/978544610935_p.pdf">Excerpt</a> <br><br>  For Habrozhiteley a 20% discount on the coupon - <b>Spring</b> </div><p>Source: <a href="https://habr.com/ru/post/438976/">https://habr.com/ru/post/438976/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>