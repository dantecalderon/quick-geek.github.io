<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using All Flash AccelStor arrays in VDI projects</title>
  <meta name="description" content="Virtual desktops (VDI), it would seem, have a huge advantage over the usual personal computers of employees. However, in reality, a very productive an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Using All Flash AccelStor arrays in VDI projects</h1><div class="post__text post__text-html js-mediator-article"><p>  Virtual desktops (VDI), it would seem, have a huge advantage over the usual personal computers of employees.  However, in reality, a very productive and, moreover, expensive ‚Äúiron‚Äù is required in order for the virtual environment to work at an adequate speed and the VDI should not be an irritant in the work activity of the personnel.  One of the bottlenecks in the VDI infrastructure is data storage: it depends on its performance whether it is worth contacting this technology or not. </p><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/8-/dm/qd/8-dmqddfowzapqkkshefod28oe8.jpeg"></div><br><a name="habracut"></a><br><h3>  Why does a company need VDI? </h3><br><p>  VDI technology allows you to significantly simplify and automate the management of IT infrastructure of the workplaces of employees of the organization.  The difference from traditional workstations and laptops is especially noticeable with a large staff.  In addition, VDI is an excellent tool for the safe delivery of employee work tools (the so-called desktop-as-a-service) from any location, which is extremely popular in organizations with high security requirements and / or having an extensive branch network (medicine, banks, education, retail, etc.). </p><br><p>  If the VDI infrastructure is properly deployed, then very soon it will begin to save the company's funds by drastically reducing the cost of maintenance and reducing the points of vulnerability due to the consolidation of IT equipment and software.  At the same time, flexibility will increase when new jobs are added, wherever they are. </p><br><h3>  Problems Deploying VDI </h3><br><p>  Since VDI implies a multitude of users who simultaneously perform their operations in the workplace, the IT infrastructure requires not only high I / O performance, but also ultra-low latency.  If ‚Äúbraking‚Äù occurs somewhere, it is highly likely that this will cause a negative for users, and they will demand a return to traditional workstations.  This means a complete failure of VDI implementation. </p><br><p>  According to IDC reports, the most failed VDI implementations were related to the performance of storage systems that could not provide high-speed I / O for the entire infrastructure.  So the choice of storage systems with the required performance is perhaps the most important task when designing a VDI.  And, it should be noted, one of the most expensive in terms of cost. </p><br><p>  Spindle and hybrid (mechanical disks + flash) storage systems, as practice has shown, are not suitable for large-scale VDI projects, since they are based on the principle of caching I / O requests to reduce delays.  But the cache size is not infinite.  As soon as it is full, delays will increase, users will "rebel" and, consider, the project will be bent.  In fact, the requirements for latency on the part of VDI are so high that even traditional RAID-based All Flash systems with NVMe or NVRAM caching can not cope with the load. </p><br><p>  In such projects, <a href="http://accelstor.ru/">AccelStor</a> All Flash systems that do not have a cache will be <a href="http://accelstor.ru/">most welcome</a> : all data is written to the SSD immediately after some rearrangement performed on the fly (synchronous recording).  Lack of cache means consistency in performance, both in terms of IOPS and throughput, as well as in terms of delays, which, it should be noted, already have very impressive results. </p><br><h3>  Flash optimized architecture </h3><br><p>  RAID technology was developed in the late 80s of the last century exclusively for the use of traditional spindle disks.  And today it is perhaps the most widely and successfully used technology in the field of data storage.  But when building All Flash systems using RAID, there are at least two problems: </p><br><ul><li>  Data is written on the SSD at random locations on the drive. </li><li>  Data is often overwritten. </li></ul><br><p>  All Flash AccelStor systems work in a completely different way, since they are specifically designed for the efficient use of solid-state drives.  The basis is the proprietary technology <a href="http://accelstor.ru/page/flexiremap-technology">FlexiRemap</a> , which does not use cache and RAID.  10 years of research and more than 45 patents reveal the full potential of flash memory.  With the support of the IT giant Toshiba Memory and the best-in-show awards at the Flash Memory Summit 2016, FlexiRemap technology is truly revolutionary. </p><br><h3>  Why FlexiRemap <sup>¬Æ</sup> ? </h3><br><p>  Technology <a href="http://accelstor.ru/page/flexiremap-advantages">FlexiRemap <sup>¬Æ</sup></a> got its name just for the redistribution (remap) of data blocks before recording to SSD.  The data will be rearranged into sequential chains and written to drives multiple of 4KB, i.e.  in the most comfortable SSD mode.  Thanks to this approach, you can achieve a sufficiently high performance (up to 700K IOPS for random write, up to 1.1M IOPS for random read + write) without using a cache. </p><br><p>  Most RAID-based storage systems use expensive SAS SSDs, which are necessary to work with two controllers, and, at the same time, utilize their performance by only 10%.  FlexiRemap¬Æ, in combination with the <a href="http://accelstor.ru/page/modeli-vysokoj-dostupnosti-ha">shared nothing</a> cluster architecture, uses cheaper SATA SSDs and utilizes their performance by 90%, which ultimately means lower cost of ownership (TCO) and faster return on investment (ROI). </p><br><p>  In addition, we note that SSDs have a predictable aging cycle associated with the amount of information recorded on them.  And as opposed to RAID systems that have a huge overhead on write operations, FlexiRemap <sup>¬Æ</sup> technology writes data only once, thereby increasing the service life of the drives and reducing the same TCO. </p><br><p>  So AccelStor's All Flash systems with FlexiRemap¬Æ technology are perfect for projects that use intensive I / O and require extremely low latency.  Such as VDI. </p><br><h3>  Early return on investment for storage system </h3><br><p>  <a href="http://accelstor.ru/">AccelStor</a> provides an unlicensed model for its devices.  Those.  the customer gets access to all technologies (clones, snapshots, replication, deduplication, etc.) immediately and forever.  Moreover, technical support for devices (and of course software) extends over the entire life of the array, and not just within the warranty / warranty extension.  So here, too, the TCO can be significantly reduced. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/zt/8c/4z/zt8c4zjzrs9fvwfqquprpkorwps.jpeg"></div><br><p>  Using the deduplication algorithm (FlexiDedupe) allows you to reduce data storage space.  In application to VDI, we note that for linked clone, the final compression ratio can easily reach 10: 1.  As a result, a fully filled array in combination with deduplication and thin provisioning can provide the cost of one active workplace in the region of 30 USD. </p><br><h3>  Testing </h3><br><p>  All Flash AccelStor NeoSapphireTM systems were tested using the Login VSI package, which is an excellent tool for measuring the performance and scalability of the VDI infrastructure. </p><br><p>  The test used 500 desktops in linked clone mode in VMware Horizon View.  All of them were located on the <a href="http://accelstor.ru/product/neosapphire-p710">NeoSapphire P710 array</a> (24x SSD, 10G iSCSI, single node, 700K IOPS sustained write) on 5 volumes of 2TB each, plus a separate replica volume.  The load was the 8th high density node platform from Supermicro.  A couple of separate servers and All Flash (also from AccelStor) an array of VDI infrastructure and test monitoring systems. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/1b/mr/8k/1bmr8kgrcfij_9lxsbuqalzwza4.jpeg"></div><br>  <i>Test Equipment Infrastructure</i> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/si/cw/ql/sicwqlw8aolrezfhsdntbgeefxe.jpeg"></div><br>  <i>Organization of virtual desktops</i> <br><br><p>  The desktops were virtual machines based on Windows 10 Pro (build 1709) with the configuration: 2x vCPU, 3.5GB RAM (100% reserved), 60GB HDD.  Two load profiles were made.  In terms of Login VSI, they are designated as knowledge and power.  The differences are in the degree of influence on computing resources and requirements for input / output. </p><br><table><tbody><tr><th>  Worker </th><th>  Knowledge </th><th>  Power </th></tr><tr><td>  Description </td><td>  Well balanced stress load with high consumption of CPU, RAM and IO resources </td><td>  Very heavy load with maximum stress for the system, requiring very large CPU, RAM and IO resources </td></tr><tr><td>  Used software </td><td>  Adobe Reader <br>  Freemind / Java <br>  Internet Explorer <br>  MS Excel <br>  MS Outlook <br>  MS PowerPoint <br>  MS Word <br>  Photo Viewer <br>  7-zip <br></td><td>  Adobe Reader <br>  Freemind / Java <br>  Internet Explorer <br>  MS Excel <br>  MS Outlook <br>  MS PowerPoint <br>  MS Word <br>  Photo Viewer <br>  7-zip <br>  Simultaneous installation of multiple applications <br></td></tr><tr><td>  Note </td><td></td><td>  Larger files were used, higher resolution for graphics </td></tr></tbody></table><br><p>  To understand the typical workload in figures, the approximate resource consumption for each profile (percentages relative to the knowledge profile) is also given: </p><br><table><tbody><tr><th>  Worker </th><th>  Apps open </th><th>  CPU usage </th><th>  Disk reads </th><th>  Disk writes </th><th>  Iops </th><th>  Memory </th><th>  vCPU </th></tr><tr><td>  Knowledge </td><td>  5-9 </td><td>  100% </td><td>  100% </td><td>  100% </td><td>  8.5 </td><td>  1.5GB </td><td>  2 vCPU </td></tr><tr><td>  Power </td><td>  8-12 </td><td>  119% </td><td>  133% </td><td>  123% </td><td>  10.8 </td><td>  2GB </td><td>  2 vCPU </td></tr></tbody></table><br><p>  Different modes of operation of the VDI infrastructure were tested, each of which exerted a high load on the All Flash array. </p><br><div class="spoiler">  <b class="spoiler_title">Tests</b> <div class="spoiler_text"><ul><li>  Provisioning - deploying a pool of virtual machines <br><br><div style="text-align:center;"><img width="600" src="https://habrastorage.org/webt/20/hf/eu/20hfeucz75n5pzjs70qhrb-iibe.jpeg"></div></li><li>  Booting - loading virtual machines, emulating the start of the working day (the so-called boot storm <br><br><div style="text-align:center;"><img width="600" src="https://habrastorage.org/webt/c-/gt/iz/c-gtiz5ubdrv7lod6niwryt_qcu.jpeg"></div></li><li>  Login VSI full test (Login) - a gradual increase in load in virtual machines in order to reach a peak, when performance begins to degrade due to lack of resources (in this case, a lot of money).  Peak was not reached, All Flash array is able to provide performance for a greater number of desktops even in a power load configuration <br><br><div style="text-align:center;"><img width="600" src="https://habrastorage.org/webt/tw/_s/qq/tw_sqqmpxutmabidbafysr1t3v8.jpeg"></div><br><div style="text-align:center;"><img width="600" src="https://habrastorage.org/webt/j8/hb/df/j8hbdfanetvo9c5st7afuq0gyv8.jpeg"></div></li><li>  30 minute steady-state - 30 minute stability test with maximum load <br><br><div style="text-align:center;"><img width="600" src="https://habrastorage.org/webt/p5/xq/t0/p5xqt0lxs3vp5cy1zs-igjn2pja.jpeg"></div><br><div style="text-align:center;"><img width="600" src="https://habrastorage.org/webt/vi/dc/uq/vidcuqbyxwmrezevhv2tjd0bbj8.jpeg"></div></li><li>  Power off - turn off the pool of virtual machines </li><li>  Pool Refresh - return the disk from the OS to its original size </li></ul><br></div></div><br><p>  As a result, regardless of the load mode, comfortable response time was maintained inside the virtual machines.  That is, in other words, this means that the user would feel comfortable when working with a similar working environment. </p><br><table><tbody><tr><th>  A pool of 500 desktops in Linked Clone mode </th><th>  lead time </th><th>  Average delay </th></tr><tr><td>  Provisioning </td><td>  ~ 32 min </td><td>  0.59ms </td></tr><tr><td>  Booting </td><td>  ~ 2 min </td><td>  0.68ms </td></tr><tr><td>  Login VSI full test (Login) </td><td>  50 min </td><td>  0.46ms </td></tr><tr><td>  30 minute steady-state </td><td>  30 min </td><td>  0.56ms </td></tr><tr><td>  Power off </td><td>  ~ 7 min </td><td>  0.45ms </td></tr><tr><td>  Pool Refresh </td><td>  ~ 14 min </td><td>  0.27ms </td></tr></tbody></table><br><p>  <i>Full test results are available on the <a href="https://www.loginvsi.com/resources/benchmark-reports">Login VSI</a> and <a href="https://www.accelstor.com/wp-content/uploads/2018/08/AccelStor-WP18001_P710_VDI-horizon-500.pdf">AccelStor website</a> .</i> </p><br><h2>  Conclusion </h2><br><blockquote> When storage performance really matters and the All Flash array runs in the center of the VDI infrastructure, systems based on FlexiRemap¬Æ technology will provide the best price / performance ratio.  Using an enterprise SATA SSD and a built-in algorithm to increase their service life, coupled with the low latency of the device as a whole, is just what was created for use in large-scale VDI projects. </blockquote></div><p>Source: <a href="https://habr.com/ru/post/438792/">https://habr.com/ru/post/438792/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container">Waiting for the list from <a href="../../index.html">here</a>...</nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52319614 = new Ya.Metrika({
                  id:52319614,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52319614" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>