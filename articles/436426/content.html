<div class="post__text post__text-html js-mediator-article">  Under the cut, a short note on how to suspend the execution of your application when the connection to the Internet is broken and continue - when it is restored. <br><a name="habracut"></a><br>  Imagine that your hypothetical application must execute a queue of http requests.  What each next depends on the result of the previous one. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> url = <span class="hljs-string"><span class="hljs-string">' ... '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (url) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> resp = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> fetch(url) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> json = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> resp.json() url = json.url } }</code> </pre> <br>  But if in the middle of this process communication with the Internet disappears, then the queue will be interrupted.  Let's fix it. <br><br>  To begin with, we will write a function that will return a promise that will be solved at the moment when the client resumes the connection: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">awaitOnline</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Если клиент уже online — немедленно возвращаем результат if (navigator.onLine) { resolve() return } // Регистрируем обработчик и решаем промис как только клиет будет online window.addEventListener( 'online', () =&gt; resolve(), {once: true} // Автоматически удаляем обработчик после первого события ) }) }</span></span></code> </pre><br>  Now add it to our main code. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> url = <span class="hljs-string"><span class="hljs-string">' ... '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (url) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> awaitOnline() <span class="hljs-comment"><span class="hljs-comment">// Выполнение приостановится в этом месте до момента возобновления сети const resp = await fetch(url) const json = await resp.json() url = json.url } }</span></span></code> </pre><br>  In this simple way, with each iteration, our algorithm will check the status of the network, and will pause if there is no connection.  And it will automatically continue execution from the same place as soon as the connection is restored. <br><br>  Of course, this is not a panacea.  But such a small hack will make your application a little more fault tolerant. </div>